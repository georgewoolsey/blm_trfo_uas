<!DOCTYPE html>
<html lang="en-US" xml:lang="en-US">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 4 Treatment Unit Silvicultural Summary | BLM Tres Rios Field Office: Dawson project area UAS data</title>
  <meta name="description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 4 Treatment Unit Silvicultural Summary | BLM Tres Rios Field Office: Dawson project area UAS data" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 4 Treatment Unit Silvicultural Summary | BLM Tres Rios Field Office: Dawson project area UAS data" />
  
  <meta name="twitter:description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="George Woolsey" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="slash-piles.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<script type="text/javascript">

// toggle visibility of R source blocks in R Markdown output
function toggle_R() {
  var x = document.getElementsByClassName('r');
  if (x.length == 0) return;
  function toggle_vis(o) {
    var d = o.style.display;
    o.style.display = (d == 'block' || d == '') ? 'none':'block';
  }

  for (i = 0; i < x.length; i++) {
    var y = x[i];
    if (y.tagName.toLowerCase() === 'pre') toggle_vis(y);
  }

    var elem = document.getElementById("myButton1");
    if (elem.value === "Hide Code") elem.value = "Show Code";
    else elem.value = "Hide Code";
}

document.write('<input onclick="toggle_R();" type="button" value="Hide Code" id="myButton1" style="position: absolute; top: 10%; right: 2%; z-index: 200"></input>')

</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#objective"><i class="fa fa-check"></i><b>1.1</b> Objective</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="processing.html"><a href="processing.html"><i class="fa fa-check"></i><b>2</b> Point Cloud Processing</a>
<ul>
<li class="chapter" data-level="2.1" data-path="processing.html"><a href="processing.html#data-location"><i class="fa fa-check"></i><b>2.1</b> Data Location</a></li>
<li class="chapter" data-level="2.2" data-path="processing.html"><a href="processing.html#point-cloud-to-raster-cloud2raster"><i class="fa fa-check"></i><b>2.2</b> Point Cloud to Raster: <code>cloud2raster()</code></a></li>
<li class="chapter" data-level="2.3" data-path="processing.html"><a href="processing.html#individial-tree-detection-tuning-itd_tuning"><i class="fa fa-check"></i><b>2.3</b> Individial Tree Detection Tuning: <code id="itd">itd_tuning()</code></a></li>
<li class="chapter" data-level="2.4" data-path="processing.html"><a href="processing.html#tree-extraction-raster2trees"><i class="fa fa-check"></i><b>2.4</b> Tree Extraction: <code id="trees">raster2trees()</code></a></li>
<li class="chapter" data-level="2.5" data-path="processing.html"><a href="processing.html#cbh-modeling-trees_cbh"><i class="fa fa-check"></i><b>2.5</b> CBH Modeling: <code>trees_cbh()</code></a></li>
<li class="chapter" data-level="2.6" data-path="processing.html"><a href="processing.html#dbh-modeling-trees_dbh"><i class="fa fa-check"></i><b>2.6</b> DBH Modeling: <code>trees_dbh()</code></a></li>
<li class="chapter" data-level="2.7" data-path="processing.html"><a href="processing.html#hmd-modeling-trees_hmd"><i class="fa fa-check"></i><b>2.7</b> HMD Modeling: <code>trees_hmd()</code></a></li>
<li class="chapter" data-level="2.8" data-path="processing.html"><a href="processing.html#forest-type-trees_type"><i class="fa fa-check"></i><b>2.8</b> Forest Type: <code id="trees_type">trees_type()</code></a></li>
<li class="chapter" data-level="2.9" data-path="processing.html"><a href="processing.html#combine-data"><i class="fa fa-check"></i><b>2.9</b> Combine data</a></li>
<li class="chapter" data-level="2.10" data-path="processing.html"><a href="processing.html#crown-biomass-trees_biomass"><i class="fa fa-check"></i><b>2.10</b> Crown Biomass: <code id="trees_biomass">trees_biomass()</code></a></li>
<li class="chapter" data-level="2.11" data-path="processing.html"><a href="processing.html#processing-time-summary"><i class="fa fa-check"></i><b>2.11</b> Processing Time Summary</a></li>
<li class="chapter" data-level="2.12" data-path="processing.html"><a href="processing.html#data-export"><i class="fa fa-check"></i><b>2.12</b> Data Export</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="slash-piles.html"><a href="slash-piles.html"><i class="fa fa-check"></i><b>3</b> Slash Piles</a>
<ul>
<li class="chapter" data-level="3.1" data-path="slash-piles.html"><a href="slash-piles.html#slash-pile-detection-workflow"><i class="fa fa-check"></i><b>3.1</b> Slash Pile Detection Workflow</a></li>
<li class="chapter" data-level="3.2" data-path="slash-piles.html"><a href="slash-piles.html#candidate-pile-review"><i class="fa fa-check"></i><b>3.2</b> Candidate Pile Review</a></li>
<li class="chapter" data-level="3.3" data-path="slash-piles.html"><a href="slash-piles.html#slash-pile-summary-statistics"><i class="fa fa-check"></i><b>3.3</b> Slash Pile Summary Statistics</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html"><i class="fa fa-check"></i><b>4</b> Treatment Unit Silvicultural Summary</a>
<ul>
<li class="chapter" data-level="4.1" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html#remove-slash-piles"><i class="fa fa-check"></i><b>4.1</b> Remove Slash Piles</a></li>
<li class="chapter" data-level="4.2" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html#function-to-calculate-silviclutural-metrics"><i class="fa fa-check"></i><b>4.2</b> Function to Calculate Silviclutural Metrics</a></li>
<li class="chapter" data-level="4.3" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html#treatment-unit-summaries"><i class="fa fa-check"></i><b>4.3</b> Treatment Unit Summaries</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html#tabular"><i class="fa fa-check"></i><b>4.3.1</b> Tabular</a></li>
<li class="chapter" data-level="4.3.2" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html#visual"><i class="fa fa-check"></i><b>4.3.2</b> Visual</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">BLM Tres Rios Field Office: Dawson project area UAS data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="treatment-unit-silvicultural-summary" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Section 4</span> Treatment Unit Silvicultural Summary<a href="treatment-unit-silvicultural-summary.html#treatment-unit-silvicultural-summary" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this section, we’re going to aggregate the detected trees by treatment unit to produce silvicultural summaries. Before we do that, we’ll use pile predictions as a mask to remove smaller, detected “trees” that are actually piles or downed trees/debris so that we are only working with trees within units.</p>
<div id="remove-slash-piles" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Remove Slash Piles<a href="treatment-unit-silvicultural-summary.html#remove-slash-piles" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>read back in the tree point data and attach to treatment units</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="treatment-unit-silvicultural-summary.html#cb141-1" tabindex="-1"></a>treetops_sf <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="at">dsn =</span> treetops_fnm, <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb141-2"><a href="treatment-unit-silvicultural-summary.html#cb141-2" tabindex="-1"></a><span class="co"># attach to treatment unit</span></span>
<span id="cb141-3"><a href="treatment-unit-silvicultural-summary.html#cb141-3" tabindex="-1"></a>treetops_sf <span class="ot">&lt;-</span> treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb141-4"><a href="treatment-unit-silvicultural-summary.html#cb141-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb141-5"><a href="treatment-unit-silvicultural-summary.html#cb141-5" tabindex="-1"></a>    treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb141-6"><a href="treatment-unit-silvicultural-summary.html#cb141-6" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(stand_boundary)) <span class="sc">%&gt;%</span> </span>
<span id="cb141-7"><a href="treatment-unit-silvicultural-summary.html#cb141-7" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_intersection</span>(</span>
<span id="cb141-8"><a href="treatment-unit-silvicultural-summary.html#cb141-8" tabindex="-1"></a>        stand_boundary <span class="sc">%&gt;%</span></span>
<span id="cb141-9"><a href="treatment-unit-silvicultural-summary.html#cb141-9" tabindex="-1"></a>          dplyr<span class="sc">::</span><span class="fu">select</span>(unit,block,tretmnt,unit_ha) <span class="sc">%&gt;%</span> </span>
<span id="cb141-10"><a href="treatment-unit-silvicultural-summary.html#cb141-10" tabindex="-1"></a>          dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">type =</span> tretmnt) <span class="sc">%&gt;%</span> </span>
<span id="cb141-11"><a href="treatment-unit-silvicultural-summary.html#cb141-11" tabindex="-1"></a>          dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb141-12"><a href="treatment-unit-silvicultural-summary.html#cb141-12" tabindex="-1"></a>            <span class="at">type =</span></span>
<span id="cb141-13"><a href="treatment-unit-silvicultural-summary.html#cb141-13" tabindex="-1"></a>              <span class="fu">tolower</span>(type) <span class="sc">%&gt;%</span> </span>
<span id="cb141-14"><a href="treatment-unit-silvicultural-summary.html#cb141-14" tabindex="-1"></a>              stringr<span class="sc">::</span><span class="fu">str_squish</span>()</span>
<span id="cb141-15"><a href="treatment-unit-silvicultural-summary.html#cb141-15" tabindex="-1"></a>          ) <span class="sc">%&gt;%</span> </span>
<span id="cb141-16"><a href="treatment-unit-silvicultural-summary.html#cb141-16" tabindex="-1"></a>          dplyr<span class="sc">::</span><span class="fu">rename_with</span>(<span class="at">.fn =</span> <span class="sc">~</span><span class="fu">paste0</span>(<span class="st">&quot;trtmnt_&quot;</span>, .x, <span class="at">recycle0 =</span> T))</span>
<span id="cb141-17"><a href="treatment-unit-silvicultural-summary.html#cb141-17" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb141-18"><a href="treatment-unit-silvicultural-summary.html#cb141-18" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb141-19"><a href="treatment-unit-silvicultural-summary.html#cb141-19" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(treeID, tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;trtmnt_&quot;</span>))</span>
<span id="cb141-20"><a href="treatment-unit-silvicultural-summary.html#cb141-20" tabindex="-1"></a>    , <span class="at">by =</span> <span class="st">&quot;treeID&quot;</span></span>
<span id="cb141-21"><a href="treatment-unit-silvicultural-summary.html#cb141-21" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb141-22"><a href="treatment-unit-silvicultural-summary.html#cb141-22" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb141-23"><a href="treatment-unit-silvicultural-summary.html#cb141-23" tabindex="-1"></a>    <span class="at">is_in_trtmnt_unit =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(trtmnt_type) <span class="sc">|</span> trtmnt_type<span class="sc">==</span><span class="st">&quot;control&quot;</span>,F,T)</span>
<span id="cb141-24"><a href="treatment-unit-silvicultural-summary.html#cb141-24" tabindex="-1"></a>  )</span>
<span id="cb141-25"><a href="treatment-unit-silvicultural-summary.html#cb141-25" tabindex="-1"></a><span class="co"># treetops_sf %&gt;% dplyr::glimpse()</span></span></code></pre></div>
<p>use our slash pile mask to remove detected “trees” that are likely not trees. if a tree top point falls within the boundary of a detected pile footprint, it will be removed</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="treatment-unit-silvicultural-summary.html#cb142-1" tabindex="-1"></a><span class="co"># save nrow</span></span>
<span id="cb142-2"><a href="treatment-unit-silvicultural-summary.html#cb142-2" tabindex="-1"></a>nrow_temp <span class="ot">&lt;-</span> <span class="fu">nrow</span>(treetops_sf)</span>
<span id="cb142-3"><a href="treatment-unit-silvicultural-summary.html#cb142-3" tabindex="-1"></a>treetops_sf <span class="ot">&lt;-</span> </span>
<span id="cb142-4"><a href="treatment-unit-silvicultural-summary.html#cb142-4" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_filter</span>(</span>
<span id="cb142-5"><a href="treatment-unit-silvicultural-summary.html#cb142-5" tabindex="-1"></a>    treetops_sf</span>
<span id="cb142-6"><a href="treatment-unit-silvicultural-summary.html#cb142-6" tabindex="-1"></a>    , piles_workflow_ans <span class="sc">%&gt;%</span> </span>
<span id="cb142-7"><a href="treatment-unit-silvicultural-summary.html#cb142-7" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">filter</span>(is_in_trtmnt_unit, inrange_th_votes<span class="sc">&gt;=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-8"><a href="treatment-unit-silvicultural-summary.html#cb142-8" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_union</span>()</span>
<span id="cb142-9"><a href="treatment-unit-silvicultural-summary.html#cb142-9" tabindex="-1"></a>    , <span class="at">.predicate =</span> sf<span class="sc">::</span>st_disjoint</span>
<span id="cb142-10"><a href="treatment-unit-silvicultural-summary.html#cb142-10" tabindex="-1"></a>  )</span></code></pre></div>
<p>what proportion of “trees” were removed?</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="treatment-unit-silvicultural-summary.html#cb143-1" tabindex="-1"></a><span class="co"># nrow_temp</span></span>
<span id="cb143-2"><a href="treatment-unit-silvicultural-summary.html#cb143-2" tabindex="-1"></a><span class="co"># nrow(treetops_sf)</span></span>
<span id="cb143-3"><a href="treatment-unit-silvicultural-summary.html#cb143-3" tabindex="-1"></a>scales<span class="sc">::</span><span class="fu">percent</span>((nrow_temp<span class="sc">-</span><span class="fu">nrow</span>(treetops_sf))<span class="sc">/</span>nrow_temp, <span class="at">accuracy =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2.7%&quot;</code></pre>
<p>nice. now we’ll keep only trees that are at least 2 m in height since we included trees as small as 1.37 m in our <a href="processing.html#trees">tree detection</a></p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="treatment-unit-silvicultural-summary.html#cb145-1" tabindex="-1"></a>treetops_sf <span class="ot">&lt;-</span> treetops_sf <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(tree_height_m<span class="sc">&gt;=</span><span class="dv">2</span>)</span></code></pre></div>
<p>using our cleaned trees data, how many trees per treatment unit?</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="treatment-unit-silvicultural-summary.html#cb146-1" tabindex="-1"></a>treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb146-2"><a href="treatment-unit-silvicultural-summary.html#cb146-2" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb146-3"><a href="treatment-unit-silvicultural-summary.html#cb146-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(trtmnt_type, trtmnt_block, trtmnt_unit,trtmnt_unit_ha) <span class="sc">%&gt;%</span> </span>
<span id="cb146-4"><a href="treatment-unit-silvicultural-summary.html#cb146-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb146-5"><a href="treatment-unit-silvicultural-summary.html#cb146-5" tabindex="-1"></a>    <span class="at">trees_per_ha =</span> n<span class="sc">/</span>trtmnt_unit_ha</span>
<span id="cb146-6"><a href="treatment-unit-silvicultural-summary.html#cb146-6" tabindex="-1"></a>    , <span class="at">trtmnt_unit_ha =</span> scales<span class="sc">::</span><span class="fu">comma</span>(trtmnt_unit_ha,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb146-7"><a href="treatment-unit-silvicultural-summary.html#cb146-7" tabindex="-1"></a>    , <span class="at">n =</span> scales<span class="sc">::</span><span class="fu">comma</span>(n,<span class="at">accuracy=</span><span class="dv">1</span>)</span>
<span id="cb146-8"><a href="treatment-unit-silvicultural-summary.html#cb146-8" tabindex="-1"></a>    , <span class="at">trees_per_ha =</span> scales<span class="sc">::</span><span class="fu">comma</span>(trees_per_ha,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb146-9"><a href="treatment-unit-silvicultural-summary.html#cb146-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb146-10"><a href="treatment-unit-silvicultural-summary.html#cb146-10" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb146-11"><a href="treatment-unit-silvicultural-summary.html#cb146-11" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;count trees by treatment unit&quot;</span></span>
<span id="cb146-12"><a href="treatment-unit-silvicultural-summary.html#cb146-12" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb146-13"><a href="treatment-unit-silvicultural-summary.html#cb146-13" tabindex="-1"></a>      <span class="st">&quot;type&quot;</span>,<span class="st">&quot;block&quot;</span>,<span class="st">&quot;unit&quot;</span>,<span class="st">&quot;ha&quot;</span></span>
<span id="cb146-14"><a href="treatment-unit-silvicultural-summary.html#cb146-14" tabindex="-1"></a>      , <span class="st">&quot;# trees&quot;</span>, <span class="st">&quot;trees ha&lt;sup&gt;-1&lt;/sup&gt;&quot;</span></span>
<span id="cb146-15"><a href="treatment-unit-silvicultural-summary.html#cb146-15" tabindex="-1"></a>    )</span>
<span id="cb146-16"><a href="treatment-unit-silvicultural-summary.html#cb146-16" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb146-17"><a href="treatment-unit-silvicultural-summary.html#cb146-17" tabindex="-1"></a>    <span class="co"># , digits = 2</span></span>
<span id="cb146-18"><a href="treatment-unit-silvicultural-summary.html#cb146-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb146-19"><a href="treatment-unit-silvicultural-summary.html#cb146-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="fl">9.7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb146-20"><a href="treatment-unit-silvicultural-summary.html#cb146-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">column_spec</span>(<span class="fu">seq</span>(<span class="dv">4</span>,<span class="dv">6</span>,<span class="at">by=</span><span class="dv">2</span>), <span class="at">border_right =</span> <span class="cn">TRUE</span>, <span class="at">include_thead =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb146-21"><a href="treatment-unit-silvicultural-summary.html#cb146-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb146-22"><a href="treatment-unit-silvicultural-summary.html#cb146-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8.4in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8.4in; ">
<table class="table" style="font-size: 9.7px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-125">Table 4.1: </span>count trees by treatment unit
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
type
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
block
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
unit
</th>
<th style="text-align:left;border-right:1px solid;position: sticky; top:0; background-color: #FFFFFF;">
ha
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
# trees
</th>
<th style="text-align:left;border-right:1px solid;position: sticky; top:0; background-color: #FFFFFF;">
trees ha<sup>-1</sup>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
control
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
U11
</td>
<td style="text-align:left;border-right:1px solid;">
11.5
</td>
<td style="text-align:left;">
9,614
</td>
<td style="text-align:left;border-right:1px solid;">
832.4
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
U23
</td>
<td style="text-align:left;border-right:1px solid;">
10.3
</td>
<td style="text-align:left;">
10,443
</td>
<td style="text-align:left;border-right:1px solid;">
1,013.1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
U21
</td>
<td style="text-align:left;border-right:1px solid;">
8.1
</td>
<td style="text-align:left;">
8,410
</td>
<td style="text-align:left;border-right:1px solid;">
1,039.4
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
U4
</td>
<td style="text-align:left;border-right:1px solid;">
6.7
</td>
<td style="text-align:left;">
6,417
</td>
<td style="text-align:left;border-right:1px solid;">
958.8
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
U38
</td>
<td style="text-align:left;border-right:1px solid;">
8.6
</td>
<td style="text-align:left;">
7,030
</td>
<td style="text-align:left;border-right:1px solid;">
817.8
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
U30
</td>
<td style="text-align:left;border-right:1px solid;">
10.1
</td>
<td style="text-align:left;">
10,692
</td>
<td style="text-align:left;border-right:1px solid;">
1,055.2
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
U46
</td>
<td style="text-align:left;border-right:1px solid;">
8.6
</td>
<td style="text-align:left;">
7,783
</td>
<td style="text-align:left;border-right:1px solid;">
910.0
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
U31
</td>
<td style="text-align:left;border-right:1px solid;">
8.1
</td>
<td style="text-align:left;">
7,378
</td>
<td style="text-align:left;border-right:1px solid;">
912.4
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
U54
</td>
<td style="text-align:left;border-right:1px solid;">
10.3
</td>
<td style="text-align:left;">
8,839
</td>
<td style="text-align:left;border-right:1px solid;">
854.1
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
U42
</td>
<td style="text-align:left;border-right:1px solid;">
8.3
</td>
<td style="text-align:left;">
6,306
</td>
<td style="text-align:left;border-right:1px solid;">
755.6
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
U48
</td>
<td style="text-align:left;border-right:1px solid;">
8.3
</td>
<td style="text-align:left;">
6,534
</td>
<td style="text-align:left;border-right:1px solid;">
789.5
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
U34
</td>
<td style="text-align:left;border-right:1px solid;">
9.2
</td>
<td style="text-align:left;">
9,752
</td>
<td style="text-align:left;border-right:1px solid;">
1,055.5
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
heterogenous
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
U40
</td>
<td style="text-align:left;border-right:1px solid;">
9.1
</td>
<td style="text-align:left;">
4,623
</td>
<td style="text-align:left;border-right:1px solid;">
506.8
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
U16
</td>
<td style="text-align:left;border-right:1px solid;">
9.5
</td>
<td style="text-align:left;">
5,576
</td>
<td style="text-align:left;border-right:1px solid;">
586.6
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
U26
</td>
<td style="text-align:left;border-right:1px solid;">
9.0
</td>
<td style="text-align:left;">
4,586
</td>
<td style="text-align:left;border-right:1px solid;">
511.3
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
U36
</td>
<td style="text-align:left;border-right:1px solid;">
8.5
</td>
<td style="text-align:left;">
4,014
</td>
<td style="text-align:left;border-right:1px solid;">
472.0
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
U39
</td>
<td style="text-align:left;border-right:1px solid;">
8.3
</td>
<td style="text-align:left;">
4,108
</td>
<td style="text-align:left;border-right:1px solid;">
494.3
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
U29
</td>
<td style="text-align:left;border-right:1px solid;">
9.2
</td>
<td style="text-align:left;">
5,487
</td>
<td style="text-align:left;border-right:1px solid;">
598.2
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
U44
</td>
<td style="text-align:left;border-right:1px solid;">
8.6
</td>
<td style="text-align:left;">
4,792
</td>
<td style="text-align:left;border-right:1px solid;">
556.9
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
U2
</td>
<td style="text-align:left;border-right:1px solid;">
8.3
</td>
<td style="text-align:left;">
4,327
</td>
<td style="text-align:left;border-right:1px solid;">
522.2
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
U53
</td>
<td style="text-align:left;border-right:1px solid;">
8.4
</td>
<td style="text-align:left;">
4,835
</td>
<td style="text-align:left;border-right:1px solid;">
573.0
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
U41
</td>
<td style="text-align:left;border-right:1px solid;">
8.2
</td>
<td style="text-align:left;">
4,475
</td>
<td style="text-align:left;border-right:1px solid;">
545.7
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
U43
</td>
<td style="text-align:left;border-right:1px solid;">
8.1
</td>
<td style="text-align:left;">
4,481
</td>
<td style="text-align:left;border-right:1px solid;">
550.9
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
U55
</td>
<td style="text-align:left;border-right:1px solid;">
9.2
</td>
<td style="text-align:left;">
5,556
</td>
<td style="text-align:left;border-right:1px solid;">
603.6
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
uniform- high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
U10
</td>
<td style="text-align:left;border-right:1px solid;">
5.2
</td>
<td style="text-align:left;">
1,877
</td>
<td style="text-align:left;border-right:1px solid;">
362.7
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
U19
</td>
<td style="text-align:left;border-right:1px solid;">
4.5
</td>
<td style="text-align:left;">
1,339
</td>
<td style="text-align:left;border-right:1px solid;">
298.1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
U18
</td>
<td style="text-align:left;border-right:1px solid;">
4.1
</td>
<td style="text-align:left;">
1,072
</td>
<td style="text-align:left;border-right:1px solid;">
261.0
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
U27
</td>
<td style="text-align:left;border-right:1px solid;">
4.2
</td>
<td style="text-align:left;">
1,746
</td>
<td style="text-align:left;border-right:1px solid;">
419.3
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
U37
</td>
<td style="text-align:left;border-right:1px solid;">
5.6
</td>
<td style="text-align:left;">
1,576
</td>
<td style="text-align:left;border-right:1px solid;">
280.3
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
U28
</td>
<td style="text-align:left;border-right:1px solid;">
4.3
</td>
<td style="text-align:left;">
999
</td>
<td style="text-align:left;border-right:1px solid;">
232.8
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
U45
</td>
<td style="text-align:left;border-right:1px solid;">
4.3
</td>
<td style="text-align:left;">
981
</td>
<td style="text-align:left;border-right:1px solid;">
228.3
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
U33
</td>
<td style="text-align:left;border-right:1px solid;">
4.5
</td>
<td style="text-align:left;">
863
</td>
<td style="text-align:left;border-right:1px solid;">
192.4
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
U52
</td>
<td style="text-align:left;border-right:1px solid;">
4.1
</td>
<td style="text-align:left;">
1,606
</td>
<td style="text-align:left;border-right:1px solid;">
391.6
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
U35
</td>
<td style="text-align:left;border-right:1px solid;">
4.4
</td>
<td style="text-align:left;">
1,036
</td>
<td style="text-align:left;border-right:1px solid;">
233.5
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
U49
</td>
<td style="text-align:left;border-right:1px solid;">
4.4
</td>
<td style="text-align:left;">
1,828
</td>
<td style="text-align:left;border-right:1px solid;">
416.2
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
U32
</td>
<td style="text-align:left;border-right:1px solid;">
5.1
</td>
<td style="text-align:left;">
978
</td>
<td style="text-align:left;border-right:1px solid;">
193.6
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
uniform- low
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
U10
</td>
<td style="text-align:left;border-right:1px solid;">
5.2
</td>
<td style="text-align:left;">
1,888
</td>
<td style="text-align:left;border-right:1px solid;">
364.8
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
U19
</td>
<td style="text-align:left;border-right:1px solid;">
4.5
</td>
<td style="text-align:left;">
2,458
</td>
<td style="text-align:left;border-right:1px solid;">
547.2
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
U18
</td>
<td style="text-align:left;border-right:1px solid;">
4.1
</td>
<td style="text-align:left;">
1,521
</td>
<td style="text-align:left;border-right:1px solid;">
370.4
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
U27
</td>
<td style="text-align:left;border-right:1px solid;">
4.2
</td>
<td style="text-align:left;">
1,921
</td>
<td style="text-align:left;border-right:1px solid;">
461.3
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
U37
</td>
<td style="text-align:left;border-right:1px solid;">
5.6
</td>
<td style="text-align:left;">
2,009
</td>
<td style="text-align:left;border-right:1px solid;">
357.3
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
U28
</td>
<td style="text-align:left;border-right:1px solid;">
4.3
</td>
<td style="text-align:left;">
1,784
</td>
<td style="text-align:left;border-right:1px solid;">
415.7
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
U45
</td>
<td style="text-align:left;border-right:1px solid;">
4.3
</td>
<td style="text-align:left;">
1,228
</td>
<td style="text-align:left;border-right:1px solid;">
285.8
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
U33
</td>
<td style="text-align:left;border-right:1px solid;">
4.5
</td>
<td style="text-align:left;">
1,630
</td>
<td style="text-align:left;border-right:1px solid;">
363.4
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
U52
</td>
<td style="text-align:left;border-right:1px solid;">
4.1
</td>
<td style="text-align:left;">
2,056
</td>
<td style="text-align:left;border-right:1px solid;">
501.4
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
U35
</td>
<td style="text-align:left;border-right:1px solid;">
4.4
</td>
<td style="text-align:left;">
2,033
</td>
<td style="text-align:left;border-right:1px solid;">
458.3
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
U49
</td>
<td style="text-align:left;border-right:1px solid;">
4.4
</td>
<td style="text-align:left;">
2,472
</td>
<td style="text-align:left;border-right:1px solid;">
562.9
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
U32
</td>
<td style="text-align:left;border-right:1px solid;">
5.1
</td>
<td style="text-align:left;">
2,176
</td>
<td style="text-align:left;border-right:1px solid;">
430.8
</td>
</tr>
</tbody>
</table>
</div>
<p>where are these units in space?</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="treatment-unit-silvicultural-summary.html#cb147-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(</span>
<span id="cb147-2"><a href="treatment-unit-silvicultural-summary.html#cb147-2" tabindex="-1"></a>    <span class="at">data =</span> stand_boundary</span>
<span id="cb147-3"><a href="treatment-unit-silvicultural-summary.html#cb147-3" tabindex="-1"></a>    , ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">ordered</span>(block), <span class="at">fill =</span> <span class="fu">ordered</span>(<span class="fu">tolower</span>(tretmnt)))</span>
<span id="cb147-4"><a href="treatment-unit-silvicultural-summary.html#cb147-4" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb147-5"><a href="treatment-unit-silvicultural-summary.html#cb147-5" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb147-6"><a href="treatment-unit-silvicultural-summary.html#cb147-6" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb147-7"><a href="treatment-unit-silvicultural-summary.html#cb147-7" tabindex="-1"></a>  <span class="co"># ggplot2::scale_color_viridis_d(option = &quot;turbo&quot;) +</span></span>
<span id="cb147-8"><a href="treatment-unit-silvicultural-summary.html#cb147-8" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(</span>
<span id="cb147-9"><a href="treatment-unit-silvicultural-summary.html#cb147-9" tabindex="-1"></a>    <span class="at">values =</span> viridis<span class="sc">::</span><span class="fu">turbo</span>(<span class="at">n =</span> <span class="fu">length</span>(<span class="fu">unique</span>(stand_boundary<span class="sc">$</span>block))) <span class="sc">%&gt;%</span> <span class="fu">sample</span>()</span>
<span id="cb147-10"><a href="treatment-unit-silvicultural-summary.html#cb147-10" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb147-11"><a href="treatment-unit-silvicultural-summary.html#cb147-11" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;treatment</span><span class="sc">\n</span><span class="st">type&quot;</span>, <span class="at">color =</span> <span class="st">&quot;treatment</span><span class="sc">\n</span><span class="st">block&quot;</span>) <span class="sc">+</span></span>
<span id="cb147-12"><a href="treatment-unit-silvicultural-summary.html#cb147-12" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb147-13"><a href="treatment-unit-silvicultural-summary.html#cb147-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">guides</span>(</span>
<span id="cb147-14"><a href="treatment-unit-silvicultural-summary.html#cb147-14" tabindex="-1"></a>    <span class="at">fill =</span> ggplot2<span class="sc">::</span><span class="fu">guide_legend</span>(</span>
<span id="cb147-15"><a href="treatment-unit-silvicultural-summary.html#cb147-15" tabindex="-1"></a>      <span class="at">override.aes =</span> <span class="fu">list</span>(</span>
<span id="cb147-16"><a href="treatment-unit-silvicultural-summary.html#cb147-16" tabindex="-1"></a>        <span class="at">color =</span> <span class="cn">NA</span>, <span class="at">shape =</span> <span class="dv">15</span>, <span class="at">linetype =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">alpha =</span> <span class="dv">1</span></span>
<span id="cb147-17"><a href="treatment-unit-silvicultural-summary.html#cb147-17" tabindex="-1"></a>      )</span>
<span id="cb147-18"><a href="treatment-unit-silvicultural-summary.html#cb147-18" tabindex="-1"></a>    )</span>
<span id="cb147-19"><a href="treatment-unit-silvicultural-summary.html#cb147-19" tabindex="-1"></a>    , <span class="at">color =</span> ggplot2<span class="sc">::</span><span class="fu">guide_legend</span>(</span>
<span id="cb147-20"><a href="treatment-unit-silvicultural-summary.html#cb147-20" tabindex="-1"></a>      <span class="at">override.aes =</span> <span class="fu">list</span>(</span>
<span id="cb147-21"><a href="treatment-unit-silvicultural-summary.html#cb147-21" tabindex="-1"></a>        <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">shape =</span> <span class="dv">15</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">alpha =</span> <span class="dv">1</span></span>
<span id="cb147-22"><a href="treatment-unit-silvicultural-summary.html#cb147-22" tabindex="-1"></a>      )</span>
<span id="cb147-23"><a href="treatment-unit-silvicultural-summary.html#cb147-23" tabindex="-1"></a>    )</span>
<span id="cb147-24"><a href="treatment-unit-silvicultural-summary.html#cb147-24" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-126-1.png" alt="" width="1008" /></p>
</div>
<div id="function-to-calculate-silviclutural-metrics" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Function to Calculate Silviclutural Metrics<a href="treatment-unit-silvicultural-summary.html#function-to-calculate-silviclutural-metrics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>let’s make a function to summarize the data and create common silvicultural metrics within our stand boundary</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="treatment-unit-silvicultural-summary.html#cb148-1" tabindex="-1"></a><span class="do">###################################################################################</span></span>
<span id="cb148-2"><a href="treatment-unit-silvicultural-summary.html#cb148-2" tabindex="-1"></a><span class="co"># define a function to convert columns in data frame from metric to imperial</span></span>
<span id="cb148-3"><a href="treatment-unit-silvicultural-summary.html#cb148-3" tabindex="-1"></a><span class="co"># see: </span></span>
<span id="cb148-4"><a href="treatment-unit-silvicultural-summary.html#cb148-4" tabindex="-1"></a><span class="co"># https://www.forestnb.com/archives/forest-nb-news/resources/conversions/</span></span>
<span id="cb148-5"><a href="treatment-unit-silvicultural-summary.html#cb148-5" tabindex="-1"></a><span class="co"># https://www.ars.usda.gov/is/np/agbyproducts/agbyappendix.pdf</span></span>
<span id="cb148-6"><a href="treatment-unit-silvicultural-summary.html#cb148-6" tabindex="-1"></a><span class="do">###################################################################################</span></span>
<span id="cb148-7"><a href="treatment-unit-silvicultural-summary.html#cb148-7" tabindex="-1"></a>calc_imperial_units_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb148-8"><a href="treatment-unit-silvicultural-summary.html#cb148-8" tabindex="-1"></a>  df <span class="sc">%&gt;%</span> </span>
<span id="cb148-9"><a href="treatment-unit-silvicultural-summary.html#cb148-9" tabindex="-1"></a>  <span class="co"># convert to imperial units</span></span>
<span id="cb148-10"><a href="treatment-unit-silvicultural-summary.html#cb148-10" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb148-11"><a href="treatment-unit-silvicultural-summary.html#cb148-11" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb148-12"><a href="treatment-unit-silvicultural-summary.html#cb148-12" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_cm&quot;</span>)</span>
<span id="cb148-13"><a href="treatment-unit-silvicultural-summary.html#cb148-13" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">0.394</span></span>
<span id="cb148-14"><a href="treatment-unit-silvicultural-summary.html#cb148-14" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_in&quot;</span></span>
<span id="cb148-15"><a href="treatment-unit-silvicultural-summary.html#cb148-15" tabindex="-1"></a>      )</span>
<span id="cb148-16"><a href="treatment-unit-silvicultural-summary.html#cb148-16" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb148-17"><a href="treatment-unit-silvicultural-summary.html#cb148-17" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_m&quot;</span>)</span>
<span id="cb148-18"><a href="treatment-unit-silvicultural-summary.html#cb148-18" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">3.281</span></span>
<span id="cb148-19"><a href="treatment-unit-silvicultural-summary.html#cb148-19" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_ft&quot;</span></span>
<span id="cb148-20"><a href="treatment-unit-silvicultural-summary.html#cb148-20" tabindex="-1"></a>      )</span>
<span id="cb148-21"><a href="treatment-unit-silvicultural-summary.html#cb148-21" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb148-22"><a href="treatment-unit-silvicultural-summary.html#cb148-22" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_m2_per_ha&quot;</span>)</span>
<span id="cb148-23"><a href="treatment-unit-silvicultural-summary.html#cb148-23" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">4.359</span></span>
<span id="cb148-24"><a href="treatment-unit-silvicultural-summary.html#cb148-24" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_ftac&quot;</span></span>
<span id="cb148-25"><a href="treatment-unit-silvicultural-summary.html#cb148-25" tabindex="-1"></a>      )</span>
<span id="cb148-26"><a href="treatment-unit-silvicultural-summary.html#cb148-26" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb148-27"><a href="treatment-unit-silvicultural-summary.html#cb148-27" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_kg_per_ha&quot;</span>)</span>
<span id="cb148-28"><a href="treatment-unit-silvicultural-summary.html#cb148-28" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">0.892178</span></span>
<span id="cb148-29"><a href="treatment-unit-silvicultural-summary.html#cb148-29" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_lbsac&quot;</span></span>
<span id="cb148-30"><a href="treatment-unit-silvicultural-summary.html#cb148-30" tabindex="-1"></a>      )</span>
<span id="cb148-31"><a href="treatment-unit-silvicultural-summary.html#cb148-31" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb148-32"><a href="treatment-unit-silvicultural-summary.html#cb148-32" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_per_ha&quot;</span>) <span class="sc">&amp;</span> </span>
<span id="cb148-33"><a href="treatment-unit-silvicultural-summary.html#cb148-33" tabindex="-1"></a>          <span class="sc">!</span>tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_m2_per_ha&quot;</span>) <span class="sc">&amp;</span> </span>
<span id="cb148-34"><a href="treatment-unit-silvicultural-summary.html#cb148-34" tabindex="-1"></a>          <span class="sc">!</span>tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_kg_per_ha&quot;</span>)</span>
<span id="cb148-35"><a href="treatment-unit-silvicultural-summary.html#cb148-35" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">0.405</span></span>
<span id="cb148-36"><a href="treatment-unit-silvicultural-summary.html#cb148-36" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_ac&quot;</span></span>
<span id="cb148-37"><a href="treatment-unit-silvicultural-summary.html#cb148-37" tabindex="-1"></a>      )</span>
<span id="cb148-38"><a href="treatment-unit-silvicultural-summary.html#cb148-38" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb148-39"><a href="treatment-unit-silvicultural-summary.html#cb148-39" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_area_ha&quot;</span>)</span>
<span id="cb148-40"><a href="treatment-unit-silvicultural-summary.html#cb148-40" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">2.471</span></span>
<span id="cb148-41"><a href="treatment-unit-silvicultural-summary.html#cb148-41" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_ac&quot;</span></span>
<span id="cb148-42"><a href="treatment-unit-silvicultural-summary.html#cb148-42" tabindex="-1"></a>      )</span>
<span id="cb148-43"><a href="treatment-unit-silvicultural-summary.html#cb148-43" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb148-44"><a href="treatment-unit-silvicultural-summary.html#cb148-44" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;kg_per_m2&quot;</span>)</span>
<span id="cb148-45"><a href="treatment-unit-silvicultural-summary.html#cb148-45" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">0.20482</span></span>
<span id="cb148-46"><a href="treatment-unit-silvicultural-summary.html#cb148-46" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_lbsft2&quot;</span></span>
<span id="cb148-47"><a href="treatment-unit-silvicultural-summary.html#cb148-47" tabindex="-1"></a>      )</span>
<span id="cb148-48"><a href="treatment-unit-silvicultural-summary.html#cb148-48" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb148-49"><a href="treatment-unit-silvicultural-summary.html#cb148-49" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;kg_per_m3&quot;</span>)</span>
<span id="cb148-50"><a href="treatment-unit-silvicultural-summary.html#cb148-50" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">0.0624</span></span>
<span id="cb148-51"><a href="treatment-unit-silvicultural-summary.html#cb148-51" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_lbsft3&quot;</span></span>
<span id="cb148-52"><a href="treatment-unit-silvicultural-summary.html#cb148-52" tabindex="-1"></a>      )</span>
<span id="cb148-53"><a href="treatment-unit-silvicultural-summary.html#cb148-53" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb148-54"><a href="treatment-unit-silvicultural-summary.html#cb148-54" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_m2&quot;</span>) <span class="sc">&amp;</span> <span class="sc">!</span>tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;per_m2&quot;</span>)</span>
<span id="cb148-55"><a href="treatment-unit-silvicultural-summary.html#cb148-55" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">10.764</span></span>
<span id="cb148-56"><a href="treatment-unit-silvicultural-summary.html#cb148-56" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_ft2&quot;</span></span>
<span id="cb148-57"><a href="treatment-unit-silvicultural-summary.html#cb148-57" tabindex="-1"></a>      )</span>
<span id="cb148-58"><a href="treatment-unit-silvicultural-summary.html#cb148-58" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb148-59"><a href="treatment-unit-silvicultural-summary.html#cb148-59" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename_with</span>(</span>
<span id="cb148-60"><a href="treatment-unit-silvicultural-summary.html#cb148-60" tabindex="-1"></a>      <span class="at">.fn =</span> <span class="cf">function</span>(x){dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb148-61"><a href="treatment-unit-silvicultural-summary.html#cb148-61" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_cm_in&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_cm_in&quot;</span>,<span class="st">&quot;_in&quot;</span>)</span>
<span id="cb148-62"><a href="treatment-unit-silvicultural-summary.html#cb148-62" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_m_ft&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_m_ft&quot;</span>,<span class="st">&quot;_ft&quot;</span>)</span>
<span id="cb148-63"><a href="treatment-unit-silvicultural-summary.html#cb148-63" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_m2_per_ha_ftac&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_m2_per_ha_ftac&quot;</span>,<span class="st">&quot;_ft2_per_ac&quot;</span>)</span>
<span id="cb148-64"><a href="treatment-unit-silvicultural-summary.html#cb148-64" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_kg_per_ha_lbsac&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_kg_per_ha_lbsac&quot;</span>,<span class="st">&quot;_lbs_per_ac&quot;</span>)</span>
<span id="cb148-65"><a href="treatment-unit-silvicultural-summary.html#cb148-65" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_per_ha_ac&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_per_ha_ac&quot;</span>,<span class="st">&quot;_per_ac&quot;</span>)</span>
<span id="cb148-66"><a href="treatment-unit-silvicultural-summary.html#cb148-66" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_area_ha_ac&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_area_ha_ac&quot;</span>,<span class="st">&quot;_area_ac&quot;</span>)</span>
<span id="cb148-67"><a href="treatment-unit-silvicultural-summary.html#cb148-67" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_kg_per_m2_lbsft2&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_kg_per_m2_lbsft2&quot;</span>,<span class="st">&quot;_lbs_per_ft2&quot;</span>)</span>
<span id="cb148-68"><a href="treatment-unit-silvicultural-summary.html#cb148-68" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_kg_per_m3_lbsft3&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_kg_per_m3_lbsft3&quot;</span>,<span class="st">&quot;_lbs_per_ft3&quot;</span>)</span>
<span id="cb148-69"><a href="treatment-unit-silvicultural-summary.html#cb148-69" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_m2_ft2&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_m2_ft2&quot;</span>,<span class="st">&quot;_ft2&quot;</span>)</span>
<span id="cb148-70"><a href="treatment-unit-silvicultural-summary.html#cb148-70" tabindex="-1"></a>        , <span class="cn">TRUE</span> <span class="sc">~</span> x</span>
<span id="cb148-71"><a href="treatment-unit-silvicultural-summary.html#cb148-71" tabindex="-1"></a>      )}</span>
<span id="cb148-72"><a href="treatment-unit-silvicultural-summary.html#cb148-72" tabindex="-1"></a>    )</span>
<span id="cb148-73"><a href="treatment-unit-silvicultural-summary.html#cb148-73" tabindex="-1"></a>}</span>
<span id="cb148-74"><a href="treatment-unit-silvicultural-summary.html#cb148-74" tabindex="-1"></a></span>
<span id="cb148-75"><a href="treatment-unit-silvicultural-summary.html#cb148-75" tabindex="-1"></a><span class="do">###################################################################################</span></span>
<span id="cb148-76"><a href="treatment-unit-silvicultural-summary.html#cb148-76" tabindex="-1"></a><span class="do">### stand-level summaries</span></span>
<span id="cb148-77"><a href="treatment-unit-silvicultural-summary.html#cb148-77" tabindex="-1"></a><span class="do">###################################################################################</span></span>
<span id="cb148-78"><a href="treatment-unit-silvicultural-summary.html#cb148-78" tabindex="-1"></a>calc_silv_metrics <span class="ot">&lt;-</span> <span class="cf">function</span>(tree_list, <span class="at">stand_area_ha =</span> <span class="cn">NULL</span>, <span class="at">study_boundary =</span> <span class="cn">NULL</span>, <span class="at">calc_imperial_units =</span> F) {</span>
<span id="cb148-79"><a href="treatment-unit-silvicultural-summary.html#cb148-79" tabindex="-1"></a>  <span class="co"># get study area</span></span>
<span id="cb148-80"><a href="treatment-unit-silvicultural-summary.html#cb148-80" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(study_boundary)){</span>
<span id="cb148-81"><a href="treatment-unit-silvicultural-summary.html#cb148-81" tabindex="-1"></a>    <span class="co"># bounds check</span></span>
<span id="cb148-82"><a href="treatment-unit-silvicultural-summary.html#cb148-82" tabindex="-1"></a>    <span class="cf">if</span>(</span>
<span id="cb148-83"><a href="treatment-unit-silvicultural-summary.html#cb148-83" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">inherits</span>(study_boundary,<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb148-84"><a href="treatment-unit-silvicultural-summary.html#cb148-84" tabindex="-1"></a>      <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">inherits</span>(study_boundary,<span class="st">&quot;sfc&quot;</span>)</span>
<span id="cb148-85"><a href="treatment-unit-silvicultural-summary.html#cb148-85" tabindex="-1"></a>    ){<span class="fu">stop</span>(<span class="st">&quot;study_boundary must be sf class object&quot;</span>)}</span>
<span id="cb148-86"><a href="treatment-unit-silvicultural-summary.html#cb148-86" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.na</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(study_boundary))){<span class="fu">stop</span>(<span class="st">&quot;study_boundary does not have a CRS&quot;</span>)}</span>
<span id="cb148-87"><a href="treatment-unit-silvicultural-summary.html#cb148-87" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">inherits</span>(study_boundary,<span class="st">&quot;sf&quot;</span>) <span class="sc">&amp;&amp;</span> <span class="fu">nrow</span>(study_boundary)<span class="sc">!=</span><span class="dv">1</span>){</span>
<span id="cb148-88"><a href="treatment-unit-silvicultural-summary.html#cb148-88" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">&quot;study_boundary must only have a single record geometry&quot;</span>)</span>
<span id="cb148-89"><a href="treatment-unit-silvicultural-summary.html#cb148-89" tabindex="-1"></a>    }</span>
<span id="cb148-90"><a href="treatment-unit-silvicultural-summary.html#cb148-90" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">inherits</span>(study_boundary,<span class="st">&quot;sfc&quot;</span>) <span class="sc">&amp;&amp;</span> <span class="fu">length</span>(study_boundary)<span class="sc">!=</span><span class="dv">1</span>){</span>
<span id="cb148-91"><a href="treatment-unit-silvicultural-summary.html#cb148-91" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">&quot;study_boundary must only have a single record geometry&quot;</span>)</span>
<span id="cb148-92"><a href="treatment-unit-silvicultural-summary.html#cb148-92" tabindex="-1"></a>    }</span>
<span id="cb148-93"><a href="treatment-unit-silvicultural-summary.html#cb148-93" tabindex="-1"></a>    <span class="cf">if</span>(</span>
<span id="cb148-94"><a href="treatment-unit-silvicultural-summary.html#cb148-94" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">all</span>( sf<span class="sc">::</span><span class="fu">st_is</span>(study_boundary, <span class="fu">c</span>(<span class="st">&quot;POLYGON&quot;</span>,<span class="st">&quot;MULTIPOLYGON&quot;</span>)) )</span>
<span id="cb148-95"><a href="treatment-unit-silvicultural-summary.html#cb148-95" tabindex="-1"></a>    ){</span>
<span id="cb148-96"><a href="treatment-unit-silvicultural-summary.html#cb148-96" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">&quot;study_boundary must contain POLYGON type geometry only&quot;</span>)</span>
<span id="cb148-97"><a href="treatment-unit-silvicultural-summary.html#cb148-97" tabindex="-1"></a>    }</span>
<span id="cb148-98"><a href="treatment-unit-silvicultural-summary.html#cb148-98" tabindex="-1"></a>    <span class="co"># area</span></span>
<span id="cb148-99"><a href="treatment-unit-silvicultural-summary.html#cb148-99" tabindex="-1"></a>    xxstand_area_ha <span class="ot">&lt;-</span> study_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb148-100"><a href="treatment-unit-silvicultural-summary.html#cb148-100" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_area</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb148-101"><a href="treatment-unit-silvicultural-summary.html#cb148-101" tabindex="-1"></a>      <span class="fu">as.numeric</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb148-102"><a href="treatment-unit-silvicultural-summary.html#cb148-102" tabindex="-1"></a>      <span class="st">`</span><span class="at">/</span><span class="st">`</span>(<span class="dv">10000</span>)</span>
<span id="cb148-103"><a href="treatment-unit-silvicultural-summary.html#cb148-103" tabindex="-1"></a>  }<span class="cf">else</span> <span class="cf">if</span>(<span class="fu">is.numeric</span>(stand_area_ha)){</span>
<span id="cb148-104"><a href="treatment-unit-silvicultural-summary.html#cb148-104" tabindex="-1"></a>    xxstand_area_ha <span class="ot">&lt;-</span> stand_area_ha[<span class="dv">1</span>]</span>
<span id="cb148-105"><a href="treatment-unit-silvicultural-summary.html#cb148-105" tabindex="-1"></a>  }<span class="cf">else</span>{</span>
<span id="cb148-106"><a href="treatment-unit-silvicultural-summary.html#cb148-106" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;must provide `stand_area_ha` as numeric or `study_boundary` as sf object&quot;</span>)</span>
<span id="cb148-107"><a href="treatment-unit-silvicultural-summary.html#cb148-107" tabindex="-1"></a>  }</span>
<span id="cb148-108"><a href="treatment-unit-silvicultural-summary.html#cb148-108" tabindex="-1"></a>  </span>
<span id="cb148-109"><a href="treatment-unit-silvicultural-summary.html#cb148-109" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.null</span>(xxstand_area_ha) <span class="sc">||</span> <span class="fu">is.na</span>(xxstand_area_ha) <span class="sc">||</span> dplyr<span class="sc">::</span><span class="fu">coalesce</span>(xxstand_area_ha,<span class="dv">0</span>)<span class="sc">&lt;=</span><span class="dv">0</span>){</span>
<span id="cb148-110"><a href="treatment-unit-silvicultural-summary.html#cb148-110" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;could not determine valid stand_area_ha&quot;</span>)</span>
<span id="cb148-111"><a href="treatment-unit-silvicultural-summary.html#cb148-111" tabindex="-1"></a>  }</span>
<span id="cb148-112"><a href="treatment-unit-silvicultural-summary.html#cb148-112" tabindex="-1"></a>  </span>
<span id="cb148-113"><a href="treatment-unit-silvicultural-summary.html#cb148-113" tabindex="-1"></a>  <span class="co"># summarize tree list</span></span>
<span id="cb148-114"><a href="treatment-unit-silvicultural-summary.html#cb148-114" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">inherits</span>(tree_list,<span class="st">&quot;data.frame&quot;</span>)){<span class="fu">stop</span>(<span class="st">&quot;tree_list must be data.frame class object&quot;</span>)}</span>
<span id="cb148-115"><a href="treatment-unit-silvicultural-summary.html#cb148-115" tabindex="-1"></a>  </span>
<span id="cb148-116"><a href="treatment-unit-silvicultural-summary.html#cb148-116" tabindex="-1"></a>  <span class="do">###### !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! NEED TO PUT IN CHECKS FOR COLUMNS USED</span></span>
<span id="cb148-117"><a href="treatment-unit-silvicultural-summary.html#cb148-117" tabindex="-1"></a>  <span class="co"># see: cloud2trees::check_df_cols_all_missing()</span></span>
<span id="cb148-118"><a href="treatment-unit-silvicultural-summary.html#cb148-118" tabindex="-1"></a>  <span class="cf">if</span>( <span class="sc">!</span><span class="fu">any</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="fu">names</span>(tree_list), <span class="st">&quot;landfire_crown_biomass_kg&quot;</span>)) ){</span>
<span id="cb148-119"><a href="treatment-unit-silvicultural-summary.html#cb148-119" tabindex="-1"></a>    tree_list <span class="ot">&lt;-</span> tree_list <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">landfire_crown_biomass_kg=</span><span class="fu">as.numeric</span>(<span class="cn">NA</span>))</span>
<span id="cb148-120"><a href="treatment-unit-silvicultural-summary.html#cb148-120" tabindex="-1"></a>  }</span>
<span id="cb148-121"><a href="treatment-unit-silvicultural-summary.html#cb148-121" tabindex="-1"></a>  <span class="cf">if</span>( <span class="sc">!</span><span class="fu">any</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="fu">names</span>(tree_list), <span class="st">&quot;cruz_crown_biomass_kg&quot;</span>)) ){</span>
<span id="cb148-122"><a href="treatment-unit-silvicultural-summary.html#cb148-122" tabindex="-1"></a>    tree_list <span class="ot">&lt;-</span> tree_list <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">cruz_crown_biomass_kg=</span><span class="fu">as.numeric</span>(<span class="cn">NA</span>))</span>
<span id="cb148-123"><a href="treatment-unit-silvicultural-summary.html#cb148-123" tabindex="-1"></a>  }</span>
<span id="cb148-124"><a href="treatment-unit-silvicultural-summary.html#cb148-124" tabindex="-1"></a>  <span class="cf">if</span>( <span class="sc">!</span><span class="fu">any</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="fu">names</span>(tree_list), <span class="st">&quot;landfire_tree_kg_per_m3&quot;</span>)) ){</span>
<span id="cb148-125"><a href="treatment-unit-silvicultural-summary.html#cb148-125" tabindex="-1"></a>    tree_list <span class="ot">&lt;-</span> tree_list <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">landfire_tree_kg_per_m3=</span><span class="fu">as.numeric</span>(<span class="cn">NA</span>))</span>
<span id="cb148-126"><a href="treatment-unit-silvicultural-summary.html#cb148-126" tabindex="-1"></a>  }</span>
<span id="cb148-127"><a href="treatment-unit-silvicultural-summary.html#cb148-127" tabindex="-1"></a>  <span class="cf">if</span>( <span class="sc">!</span><span class="fu">any</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="fu">names</span>(tree_list), <span class="st">&quot;cruz_tree_kg_per_m3&quot;</span>)) ){</span>
<span id="cb148-128"><a href="treatment-unit-silvicultural-summary.html#cb148-128" tabindex="-1"></a>    tree_list <span class="ot">&lt;-</span> tree_list <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">cruz_tree_kg_per_m3=</span><span class="fu">as.numeric</span>(<span class="cn">NA</span>))</span>
<span id="cb148-129"><a href="treatment-unit-silvicultural-summary.html#cb148-129" tabindex="-1"></a>  }</span>
<span id="cb148-130"><a href="treatment-unit-silvicultural-summary.html#cb148-130" tabindex="-1"></a>  </span>
<span id="cb148-131"><a href="treatment-unit-silvicultural-summary.html#cb148-131" tabindex="-1"></a>  <span class="co"># agg</span></span>
<span id="cb148-132"><a href="treatment-unit-silvicultural-summary.html#cb148-132" tabindex="-1"></a>  agg <span class="ot">&lt;-</span> tree_list <span class="sc">%&gt;%</span></span>
<span id="cb148-133"><a href="treatment-unit-silvicultural-summary.html#cb148-133" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb148-134"><a href="treatment-unit-silvicultural-summary.html#cb148-134" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb148-135"><a href="treatment-unit-silvicultural-summary.html#cb148-135" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb148-136"><a href="treatment-unit-silvicultural-summary.html#cb148-136" tabindex="-1"></a>      <span class="at">n_trees =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()</span>
<span id="cb148-137"><a href="treatment-unit-silvicultural-summary.html#cb148-137" tabindex="-1"></a>      , <span class="at">mean_dbh_cm =</span> <span class="fu">mean</span>(dbh_cm, <span class="at">na.rm =</span> T)</span>
<span id="cb148-138"><a href="treatment-unit-silvicultural-summary.html#cb148-138" tabindex="-1"></a>      , <span class="at">mean_tree_height_m =</span> <span class="fu">mean</span>(tree_height_m, <span class="at">na.rm =</span> T)</span>
<span id="cb148-139"><a href="treatment-unit-silvicultural-summary.html#cb148-139" tabindex="-1"></a>      , <span class="at">mean_tree_cbh_m =</span> <span class="fu">mean</span>(tree_cbh_m, <span class="at">na.rm =</span> T)</span>
<span id="cb148-140"><a href="treatment-unit-silvicultural-summary.html#cb148-140" tabindex="-1"></a>      , <span class="at">loreys_height_m =</span> <span class="fu">sum</span>(basal_area_m2<span class="sc">*</span>tree_height_m, <span class="at">na.rm =</span> T) <span class="sc">/</span> <span class="fu">sum</span>(basal_area_m2, <span class="at">na.rm =</span> T)</span>
<span id="cb148-141"><a href="treatment-unit-silvicultural-summary.html#cb148-141" tabindex="-1"></a>      , <span class="at">basal_area_m2 =</span> <span class="fu">sum</span>(basal_area_m2, <span class="at">na.rm =</span> T)</span>
<span id="cb148-142"><a href="treatment-unit-silvicultural-summary.html#cb148-142" tabindex="-1"></a>      , <span class="at">sum_dbh_cm_sq =</span> <span class="fu">sum</span>(dbh_cm<span class="sc">^</span><span class="dv">2</span>, <span class="at">na.rm =</span> T)</span>
<span id="cb148-143"><a href="treatment-unit-silvicultural-summary.html#cb148-143" tabindex="-1"></a>      , <span class="at">landfire_crown_biomass_kg =</span> <span class="fu">sum</span>(landfire_crown_biomass_kg, <span class="at">na.rm =</span> F)</span>
<span id="cb148-144"><a href="treatment-unit-silvicultural-summary.html#cb148-144" tabindex="-1"></a>      , <span class="at">cruz_crown_biomass_kg =</span> <span class="fu">sum</span>(cruz_crown_biomass_kg, <span class="at">na.rm =</span> F)</span>
<span id="cb148-145"><a href="treatment-unit-silvicultural-summary.html#cb148-145" tabindex="-1"></a>      , <span class="at">mean_landfire_tree_kg_per_m3 =</span> <span class="fu">mean</span>(landfire_tree_kg_per_m3, <span class="at">na.rm =</span> T)</span>
<span id="cb148-146"><a href="treatment-unit-silvicultural-summary.html#cb148-146" tabindex="-1"></a>      , <span class="at">mean_cruz_tree_kg_per_m3 =</span> <span class="fu">mean</span>(cruz_tree_kg_per_m3, <span class="at">na.rm =</span> T)</span>
<span id="cb148-147"><a href="treatment-unit-silvicultural-summary.html#cb148-147" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb148-148"><a href="treatment-unit-silvicultural-summary.html#cb148-148" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb148-149"><a href="treatment-unit-silvicultural-summary.html#cb148-149" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb148-150"><a href="treatment-unit-silvicultural-summary.html#cb148-150" tabindex="-1"></a>      <span class="at">stand_area_ha =</span> xxstand_area_ha</span>
<span id="cb148-151"><a href="treatment-unit-silvicultural-summary.html#cb148-151" tabindex="-1"></a>      , <span class="at">trees_per_ha =</span> (n_trees<span class="sc">/</span>stand_area_ha)</span>
<span id="cb148-152"><a href="treatment-unit-silvicultural-summary.html#cb148-152" tabindex="-1"></a>      , <span class="at">basal_area_m2_per_ha =</span> (basal_area_m2<span class="sc">/</span>stand_area_ha)</span>
<span id="cb148-153"><a href="treatment-unit-silvicultural-summary.html#cb148-153" tabindex="-1"></a>      , <span class="at">qmd_cm =</span> <span class="fu">sqrt</span>(sum_dbh_cm_sq<span class="sc">/</span>n_trees)</span>
<span id="cb148-154"><a href="treatment-unit-silvicultural-summary.html#cb148-154" tabindex="-1"></a>      , <span class="at">landfire_cfl_kg_per_m2 =</span> landfire_crown_biomass_kg<span class="sc">/</span>(stand_area_ha<span class="sc">*</span><span class="dv">10000</span>)</span>
<span id="cb148-155"><a href="treatment-unit-silvicultural-summary.html#cb148-155" tabindex="-1"></a>      , <span class="at">cruz_cfl_kg_per_m2 =</span> cruz_crown_biomass_kg<span class="sc">/</span>(stand_area_ha<span class="sc">*</span><span class="dv">10000</span>)</span>
<span id="cb148-156"><a href="treatment-unit-silvicultural-summary.html#cb148-156" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb148-157"><a href="treatment-unit-silvicultural-summary.html#cb148-157" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(sum_dbh_cm_sq,landfire_crown_biomass_kg,cruz_crown_biomass_kg))</span>
<span id="cb148-158"><a href="treatment-unit-silvicultural-summary.html#cb148-158" tabindex="-1"></a>  <span class="co"># imperial</span></span>
<span id="cb148-159"><a href="treatment-unit-silvicultural-summary.html#cb148-159" tabindex="-1"></a>  <span class="cf">if</span>(calc_imperial_units){</span>
<span id="cb148-160"><a href="treatment-unit-silvicultural-summary.html#cb148-160" tabindex="-1"></a>    agg <span class="ot">&lt;-</span> <span class="fu">calc_imperial_units_fn</span>(agg)</span>
<span id="cb148-161"><a href="treatment-unit-silvicultural-summary.html#cb148-161" tabindex="-1"></a>  }</span>
<span id="cb148-162"><a href="treatment-unit-silvicultural-summary.html#cb148-162" tabindex="-1"></a>  <span class="fu">return</span>(agg)</span>
<span id="cb148-163"><a href="treatment-unit-silvicultural-summary.html#cb148-163" tabindex="-1"></a>}</span></code></pre></div>
<p>check out the data structure returned by the <code>calc_silv_metrics()</code> function</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="treatment-unit-silvicultural-summary.html#cb149-1" tabindex="-1"></a><span class="fu">calc_silv_metrics</span>(</span>
<span id="cb149-2"><a href="treatment-unit-silvicultural-summary.html#cb149-2" tabindex="-1"></a>    <span class="at">tree_list =</span> treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb149-3"><a href="treatment-unit-silvicultural-summary.html#cb149-3" tabindex="-1"></a>      <span class="co"># just get one unit</span></span>
<span id="cb149-4"><a href="treatment-unit-silvicultural-summary.html#cb149-4" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb149-5"><a href="treatment-unit-silvicultural-summary.html#cb149-5" tabindex="-1"></a>        trtmnt_type<span class="sc">==</span>treetops_sf<span class="sc">$</span>trtmnt_type[<span class="dv">1</span>]</span>
<span id="cb149-6"><a href="treatment-unit-silvicultural-summary.html#cb149-6" tabindex="-1"></a>        , trtmnt_block<span class="sc">==</span>treetops_sf<span class="sc">$</span>trtmnt_block[<span class="dv">1</span>]</span>
<span id="cb149-7"><a href="treatment-unit-silvicultural-summary.html#cb149-7" tabindex="-1"></a>        , trtmnt_unit<span class="sc">==</span>treetops_sf<span class="sc">$</span>trtmnt_unit[<span class="dv">1</span>]</span>
<span id="cb149-8"><a href="treatment-unit-silvicultural-summary.html#cb149-8" tabindex="-1"></a>      )</span>
<span id="cb149-9"><a href="treatment-unit-silvicultural-summary.html#cb149-9" tabindex="-1"></a>    , <span class="at">stand_area_ha =</span> treetops_sf<span class="sc">$</span>trtmnt_unit_ha[<span class="dv">1</span>]</span>
<span id="cb149-10"><a href="treatment-unit-silvicultural-summary.html#cb149-10" tabindex="-1"></a>    , <span class="at">calc_imperial_units =</span> T</span>
<span id="cb149-11"><a href="treatment-unit-silvicultural-summary.html#cb149-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb149-12"><a href="treatment-unit-silvicultural-summary.html#cb149-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 1
## Columns: 27
## $ n_trees                        &lt;int&gt; 10443
## $ mean_dbh_cm                    &lt;dbl&gt; 24.03183
## $ mean_tree_height_m             &lt;dbl&gt; 4.395676
## $ mean_tree_cbh_m                &lt;dbl&gt; 2.120214
## $ loreys_height_m                &lt;dbl&gt; 5.319859
## $ basal_area_m2                  &lt;dbl&gt; 534.4338
## $ mean_landfire_tree_kg_per_m3   &lt;dbl&gt; 0.6795806
## $ mean_cruz_tree_kg_per_m3       &lt;dbl&gt; 1.15825
## $ stand_area_ha                  &lt;dbl&gt; 10.30788
## $ trees_per_ha                   &lt;dbl&gt; 1013.108
## $ basal_area_m2_per_ha           &lt;dbl&gt; 51.8471
## $ qmd_cm                         &lt;dbl&gt; 25.52639
## $ landfire_cfl_kg_per_m2         &lt;dbl&gt; 0.4942284
## $ cruz_cfl_kg_per_m2             &lt;dbl&gt; NA
## $ mean_dbh_in                    &lt;dbl&gt; 9.468542
## $ qmd_in                         &lt;dbl&gt; 10.0574
## $ mean_tree_height_ft            &lt;dbl&gt; 14.42221
## $ mean_tree_cbh_ft               &lt;dbl&gt; 6.956424
## $ loreys_height_ft               &lt;dbl&gt; 17.45446
## $ basal_area_ft2_per_ac          &lt;dbl&gt; 226.0015
## $ trees_per_ac                   &lt;dbl&gt; 410.3088
## $ stand_area_ac                  &lt;dbl&gt; 25.47078
## $ landfire_cfl_lbs_per_ft2       &lt;dbl&gt; 0.1012279
## $ cruz_cfl_lbs_per_ft2           &lt;dbl&gt; NA
## $ mean_landfire_tree_lbs_per_ft3 &lt;dbl&gt; 0.04240583
## $ mean_cruz_tree_lbs_per_ft3     &lt;dbl&gt; 0.07227478
## $ basal_area_ft2                 &lt;dbl&gt; 5752.645</code></pre>
</div>
<div id="treatment-unit-summaries" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Treatment Unit Summaries<a href="treatment-unit-silvicultural-summary.html#treatment-unit-summaries" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>let’s summarize the tree data by treatment unit</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="treatment-unit-silvicultural-summary.html#cb151-1" tabindex="-1"></a>unit_sum_df <span class="ot">&lt;-</span></span>
<span id="cb151-2"><a href="treatment-unit-silvicultural-summary.html#cb151-2" tabindex="-1"></a>  treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb151-3"><a href="treatment-unit-silvicultural-summary.html#cb151-3" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb151-4"><a href="treatment-unit-silvicultural-summary.html#cb151-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(trtmnt_type,trtmnt_block,trtmnt_unit,trtmnt_unit_ha)</span>
<span id="cb151-5"><a href="treatment-unit-silvicultural-summary.html#cb151-5" tabindex="-1"></a>unit_sum_df <span class="ot">&lt;-</span></span>
<span id="cb151-6"><a href="treatment-unit-silvicultural-summary.html#cb151-6" tabindex="-1"></a>  <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(unit_sum_df) <span class="sc">%&gt;%</span> </span>
<span id="cb151-7"><a href="treatment-unit-silvicultural-summary.html#cb151-7" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(x){</span>
<span id="cb151-8"><a href="treatment-unit-silvicultural-summary.html#cb151-8" tabindex="-1"></a>    unit_temp <span class="ot">&lt;-</span> unit_sum_df <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(x)</span>
<span id="cb151-9"><a href="treatment-unit-silvicultural-summary.html#cb151-9" tabindex="-1"></a>    unit_temp <span class="sc">%&gt;%</span> </span>
<span id="cb151-10"><a href="treatment-unit-silvicultural-summary.html#cb151-10" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(</span>
<span id="cb151-11"><a href="treatment-unit-silvicultural-summary.html#cb151-11" tabindex="-1"></a>        <span class="fu">calc_silv_metrics</span>(</span>
<span id="cb151-12"><a href="treatment-unit-silvicultural-summary.html#cb151-12" tabindex="-1"></a>          <span class="at">tree_list =</span> treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb151-13"><a href="treatment-unit-silvicultural-summary.html#cb151-13" tabindex="-1"></a>            <span class="co"># just get one unit</span></span>
<span id="cb151-14"><a href="treatment-unit-silvicultural-summary.html#cb151-14" tabindex="-1"></a>            dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb151-15"><a href="treatment-unit-silvicultural-summary.html#cb151-15" tabindex="-1"></a>              unit_temp</span>
<span id="cb151-16"><a href="treatment-unit-silvicultural-summary.html#cb151-16" tabindex="-1"></a>              , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(trtmnt_type,trtmnt_block,trtmnt_unit)</span>
<span id="cb151-17"><a href="treatment-unit-silvicultural-summary.html#cb151-17" tabindex="-1"></a>            )</span>
<span id="cb151-18"><a href="treatment-unit-silvicultural-summary.html#cb151-18" tabindex="-1"></a>          , <span class="at">stand_area_ha =</span> unit_temp<span class="sc">$</span>trtmnt_unit_ha</span>
<span id="cb151-19"><a href="treatment-unit-silvicultural-summary.html#cb151-19" tabindex="-1"></a>          , <span class="at">calc_imperial_units =</span> T</span>
<span id="cb151-20"><a href="treatment-unit-silvicultural-summary.html#cb151-20" tabindex="-1"></a>        )</span>
<span id="cb151-21"><a href="treatment-unit-silvicultural-summary.html#cb151-21" tabindex="-1"></a>      )</span>
<span id="cb151-22"><a href="treatment-unit-silvicultural-summary.html#cb151-22" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span> </span>
<span id="cb151-23"><a href="treatment-unit-silvicultural-summary.html#cb151-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">bind_rows</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb151-24"><a href="treatment-unit-silvicultural-summary.html#cb151-24" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb151-25"><a href="treatment-unit-silvicultural-summary.html#cb151-25" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="fu">c</span>(trtmnt_type,trtmnt_block,trtmnt_unit),ordered)</span>
<span id="cb151-26"><a href="treatment-unit-silvicultural-summary.html#cb151-26" tabindex="-1"></a>    , <span class="at">my_fct =</span> forcats<span class="sc">::</span><span class="fu">fct_cross</span>(trtmnt_type,trtmnt_block,trtmnt_unit)</span>
<span id="cb151-27"><a href="treatment-unit-silvicultural-summary.html#cb151-27" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb151-28"><a href="treatment-unit-silvicultural-summary.html#cb151-28" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(trtmnt_type),trees_per_ha) <span class="sc">%&gt;%</span> </span>
<span id="cb151-29"><a href="treatment-unit-silvicultural-summary.html#cb151-29" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">my_fct =</span> forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(my_fct))</span>
<span id="cb151-30"><a href="treatment-unit-silvicultural-summary.html#cb151-30" tabindex="-1"></a></span>
<span id="cb151-31"><a href="treatment-unit-silvicultural-summary.html#cb151-31" tabindex="-1"></a><span class="co"># unit_sum_df %&gt;% dplyr::glimpse()</span></span></code></pre></div>
<div id="tabular" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Tabular<a href="treatment-unit-silvicultural-summary.html#tabular" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="metric-units" class="section level4 hasAnchor" number="4.3.1.1">
<h4><span class="header-section-number">4.3.1.1</span> Metric units<a href="treatment-unit-silvicultural-summary.html#metric-units" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="treatment-unit-silvicultural-summary.html#cb152-1" tabindex="-1"></a>unit_sum_df <span class="sc">%&gt;%</span> </span>
<span id="cb152-2"><a href="treatment-unit-silvicultural-summary.html#cb152-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(trtmnt_type, trtmnt_block, trtmnt_unit) <span class="sc">%&gt;%</span> </span>
<span id="cb152-3"><a href="treatment-unit-silvicultural-summary.html#cb152-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb152-4"><a href="treatment-unit-silvicultural-summary.html#cb152-4" tabindex="-1"></a>    trtmnt_type, trtmnt_block, trtmnt_unit</span>
<span id="cb152-5"><a href="treatment-unit-silvicultural-summary.html#cb152-5" tabindex="-1"></a>    , stand_area_ha</span>
<span id="cb152-6"><a href="treatment-unit-silvicultural-summary.html#cb152-6" tabindex="-1"></a>    <span class="co"># different</span></span>
<span id="cb152-7"><a href="treatment-unit-silvicultural-summary.html#cb152-7" tabindex="-1"></a>    , n_trees</span>
<span id="cb152-8"><a href="treatment-unit-silvicultural-summary.html#cb152-8" tabindex="-1"></a>    , trees_per_ha</span>
<span id="cb152-9"><a href="treatment-unit-silvicultural-summary.html#cb152-9" tabindex="-1"></a>    , mean_tree_height_m</span>
<span id="cb152-10"><a href="treatment-unit-silvicultural-summary.html#cb152-10" tabindex="-1"></a>    , loreys_height_m</span>
<span id="cb152-11"><a href="treatment-unit-silvicultural-summary.html#cb152-11" tabindex="-1"></a>    , mean_dbh_cm</span>
<span id="cb152-12"><a href="treatment-unit-silvicultural-summary.html#cb152-12" tabindex="-1"></a>    , qmd_cm</span>
<span id="cb152-13"><a href="treatment-unit-silvicultural-summary.html#cb152-13" tabindex="-1"></a>    , basal_area_m2_per_ha</span>
<span id="cb152-14"><a href="treatment-unit-silvicultural-summary.html#cb152-14" tabindex="-1"></a>    , mean_landfire_tree_kg_per_m3</span>
<span id="cb152-15"><a href="treatment-unit-silvicultural-summary.html#cb152-15" tabindex="-1"></a>    , mean_cruz_tree_kg_per_m3</span>
<span id="cb152-16"><a href="treatment-unit-silvicultural-summary.html#cb152-16" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb152-17"><a href="treatment-unit-silvicultural-summary.html#cb152-17" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb152-18"><a href="treatment-unit-silvicultural-summary.html#cb152-18" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="fu">c</span>(n_trees), <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="dv">1</span>))</span>
<span id="cb152-19"><a href="treatment-unit-silvicultural-summary.html#cb152-19" tabindex="-1"></a>  , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb152-20"><a href="treatment-unit-silvicultural-summary.html#cb152-20" tabindex="-1"></a>    <span class="sc">-</span><span class="fu">c</span>(tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;trtmnt_&quot;</span>),n_trees,tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;3&quot;</span>))</span>
<span id="cb152-21"><a href="treatment-unit-silvicultural-summary.html#cb152-21" tabindex="-1"></a>    , <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb152-22"><a href="treatment-unit-silvicultural-summary.html#cb152-22" tabindex="-1"></a>  )</span>
<span id="cb152-23"><a href="treatment-unit-silvicultural-summary.html#cb152-23" tabindex="-1"></a>  , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb152-24"><a href="treatment-unit-silvicultural-summary.html#cb152-24" tabindex="-1"></a>    tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;3&quot;</span>)</span>
<span id="cb152-25"><a href="treatment-unit-silvicultural-summary.html#cb152-25" tabindex="-1"></a>    , <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="fl">0.001</span>)</span>
<span id="cb152-26"><a href="treatment-unit-silvicultural-summary.html#cb152-26" tabindex="-1"></a>  )</span>
<span id="cb152-27"><a href="treatment-unit-silvicultural-summary.html#cb152-27" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb152-28"><a href="treatment-unit-silvicultural-summary.html#cb152-28" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb152-29"><a href="treatment-unit-silvicultural-summary.html#cb152-29" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&quot;Stand summary metrics in metric units&quot;</span></span>
<span id="cb152-30"><a href="treatment-unit-silvicultural-summary.html#cb152-30" tabindex="-1"></a>  , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb152-31"><a href="treatment-unit-silvicultural-summary.html#cb152-31" tabindex="-1"></a>    <span class="st">&quot;type&quot;</span>,<span class="st">&quot;block&quot;</span>,<span class="st">&quot;unit&quot;</span>,<span class="st">&quot;ha&quot;</span></span>
<span id="cb152-32"><a href="treatment-unit-silvicultural-summary.html#cb152-32" tabindex="-1"></a>    , <span class="st">&quot;trees&quot;</span></span>
<span id="cb152-33"><a href="treatment-unit-silvicultural-summary.html#cb152-33" tabindex="-1"></a>    , <span class="st">&quot;trees ha&lt;sup&gt;-1&lt;/sup&gt;&quot;</span></span>
<span id="cb152-34"><a href="treatment-unit-silvicultural-summary.html#cb152-34" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;tree ht. (m)&quot;</span></span>
<span id="cb152-35"><a href="treatment-unit-silvicultural-summary.html#cb152-35" tabindex="-1"></a>    , <span class="st">&quot;Lorey&#39;s&lt;br&gt;tree ht. (m)&quot;</span></span>
<span id="cb152-36"><a href="treatment-unit-silvicultural-summary.html#cb152-36" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;DBH (cm)&quot;</span></span>
<span id="cb152-37"><a href="treatment-unit-silvicultural-summary.html#cb152-37" tabindex="-1"></a>    , <span class="st">&quot;QMD (cm)&quot;</span></span>
<span id="cb152-38"><a href="treatment-unit-silvicultural-summary.html#cb152-38" tabindex="-1"></a>    , <span class="st">&quot;BA (m&lt;sup&gt;2&lt;/sup&gt; ha&lt;sup&gt;-1&lt;/sup&gt;)&quot;</span></span>
<span id="cb152-39"><a href="treatment-unit-silvicultural-summary.html#cb152-39" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;CBD (kg m&lt;sup&gt;-3&lt;/sup&gt;)&lt;br&gt;LANDFIRE&quot;</span></span>
<span id="cb152-40"><a href="treatment-unit-silvicultural-summary.html#cb152-40" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;CBD (kg m&lt;sup&gt;-3&lt;/sup&gt;)&lt;br&gt;Cruz&quot;</span></span>
<span id="cb152-41"><a href="treatment-unit-silvicultural-summary.html#cb152-41" tabindex="-1"></a>  )</span>
<span id="cb152-42"><a href="treatment-unit-silvicultural-summary.html#cb152-42" tabindex="-1"></a>  , <span class="at">escape =</span> F</span>
<span id="cb152-43"><a href="treatment-unit-silvicultural-summary.html#cb152-43" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb152-44"><a href="treatment-unit-silvicultural-summary.html#cb152-44" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="fl">9.7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb152-45"><a href="treatment-unit-silvicultural-summary.html#cb152-45" tabindex="-1"></a><span class="co"># kableExtra::column_spec(seq(4,10,by=2), border_right = TRUE, include_thead = TRUE) %&gt;% </span></span>
<span id="cb152-46"><a href="treatment-unit-silvicultural-summary.html#cb152-46" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb152-47"><a href="treatment-unit-silvicultural-summary.html#cb152-47" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8.4in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8.4in; ">
<table class="table" style="font-size: 9.7px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-131">Table 4.2: </span>Stand summary metrics in metric units
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
type
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
block
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
unit
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
ha
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
trees
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
trees ha<sup>-1</sup>
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>tree ht. (m)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Lorey’s<br>tree ht. (m)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>DBH (cm)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
QMD (cm)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
BA (m<sup>2</sup> ha<sup>-1</sup>)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>CBD (kg m<sup>-3</sup>)<br>LANDFIRE
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>CBD (kg m<sup>-3</sup>)<br>Cruz
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
control
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U11
</td>
<td style="text-align:left;">
11.5
</td>
<td style="text-align:left;">
9,614
</td>
<td style="text-align:left;">
832.4
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
23.0
</td>
<td style="text-align:left;">
24.2
</td>
<td style="text-align:left;">
38.4
</td>
<td style="text-align:left;">
0.664
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U23
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
10,443
</td>
<td style="text-align:left;">
1,013.1
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
5.3
</td>
<td style="text-align:left;">
24.0
</td>
<td style="text-align:left;">
25.5
</td>
<td style="text-align:left;">
51.8
</td>
<td style="text-align:left;">
0.680
</td>
<td style="text-align:left;">
1.158
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U21
</td>
<td style="text-align:left;">
8.1
</td>
<td style="text-align:left;">
8,410
</td>
<td style="text-align:left;">
1,039.4
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
23.5
</td>
<td style="text-align:left;">
24.7
</td>
<td style="text-align:left;">
49.9
</td>
<td style="text-align:left;">
0.508
</td>
<td style="text-align:left;">
0.982
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U4
</td>
<td style="text-align:left;">
6.7
</td>
<td style="text-align:left;">
6,417
</td>
<td style="text-align:left;">
958.8
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
22.7
</td>
<td style="text-align:left;">
24.3
</td>
<td style="text-align:left;">
44.3
</td>
<td style="text-align:left;">
0.642
</td>
<td style="text-align:left;">
1.044
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U38
</td>
<td style="text-align:left;">
8.6
</td>
<td style="text-align:left;">
7,030
</td>
<td style="text-align:left;">
817.8
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
23.3
</td>
<td style="text-align:left;">
24.5
</td>
<td style="text-align:left;">
38.6
</td>
<td style="text-align:left;">
0.423
</td>
<td style="text-align:left;">
0.626
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U30
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
10,692
</td>
<td style="text-align:left;">
1,055.2
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
23.2
</td>
<td style="text-align:left;">
24.3
</td>
<td style="text-align:left;">
48.9
</td>
<td style="text-align:left;">
0.508
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U46
</td>
<td style="text-align:left;">
8.6
</td>
<td style="text-align:left;">
7,783
</td>
<td style="text-align:left;">
910.0
</td>
<td style="text-align:left;">
4.6
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
25.1
</td>
<td style="text-align:left;">
26.5
</td>
<td style="text-align:left;">
50.1
</td>
<td style="text-align:left;">
0.560
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U31
</td>
<td style="text-align:left;">
8.1
</td>
<td style="text-align:left;">
7,378
</td>
<td style="text-align:left;">
912.4
</td>
<td style="text-align:left;">
4.6
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
25.1
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
49.8
</td>
<td style="text-align:left;">
0.562
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U54
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
8,839
</td>
<td style="text-align:left;">
854.1
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.3
</td>
<td style="text-align:left;">
25.2
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
46.8
</td>
<td style="text-align:left;">
0.681
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U42
</td>
<td style="text-align:left;">
8.3
</td>
<td style="text-align:left;">
6,306
</td>
<td style="text-align:left;">
755.6
</td>
<td style="text-align:left;">
4.1
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
22.6
</td>
<td style="text-align:left;">
24.1
</td>
<td style="text-align:left;">
34.3
</td>
<td style="text-align:left;">
0.663
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U48
</td>
<td style="text-align:left;">
8.3
</td>
<td style="text-align:left;">
6,534
</td>
<td style="text-align:left;">
789.5
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
23.8
</td>
<td style="text-align:left;">
25.3
</td>
<td style="text-align:left;">
39.6
</td>
<td style="text-align:left;">
0.713
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U34
</td>
<td style="text-align:left;">
9.2
</td>
<td style="text-align:left;">
9,752
</td>
<td style="text-align:left;">
1,055.5
</td>
<td style="text-align:left;">
3.8
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
20.6
</td>
<td style="text-align:left;">
21.7
</td>
<td style="text-align:left;">
39.0
</td>
<td style="text-align:left;">
0.664
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
heterogenous
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U40
</td>
<td style="text-align:left;">
9.1
</td>
<td style="text-align:left;">
4,623
</td>
<td style="text-align:left;">
506.8
</td>
<td style="text-align:left;">
4.6
</td>
<td style="text-align:left;">
5.3
</td>
<td style="text-align:left;">
25.3
</td>
<td style="text-align:left;">
26.6
</td>
<td style="text-align:left;">
28.1
</td>
<td style="text-align:left;">
0.921
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U16
</td>
<td style="text-align:left;">
9.5
</td>
<td style="text-align:left;">
5,576
</td>
<td style="text-align:left;">
586.6
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
25.9
</td>
<td style="text-align:left;">
27.2
</td>
<td style="text-align:left;">
34.0
</td>
<td style="text-align:left;">
0.981
</td>
<td style="text-align:left;">
1.054
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U26
</td>
<td style="text-align:left;">
9.0
</td>
<td style="text-align:left;">
4,586
</td>
<td style="text-align:left;">
511.3
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.7
</td>
<td style="text-align:left;">
25.9
</td>
<td style="text-align:left;">
27.4
</td>
<td style="text-align:left;">
30.1
</td>
<td style="text-align:left;">
0.859
</td>
<td style="text-align:left;">
0.906
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U36
</td>
<td style="text-align:left;">
8.5
</td>
<td style="text-align:left;">
4,014
</td>
<td style="text-align:left;">
472.0
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.3
</td>
<td style="text-align:left;">
24.9
</td>
<td style="text-align:left;">
26.1
</td>
<td style="text-align:left;">
25.3
</td>
<td style="text-align:left;">
0.764
</td>
<td style="text-align:left;">
0.787
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U39
</td>
<td style="text-align:left;">
8.3
</td>
<td style="text-align:left;">
4,108
</td>
<td style="text-align:left;">
494.3
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
27.4
</td>
<td style="text-align:left;">
29.1
</td>
<td style="text-align:left;">
0.850
</td>
<td style="text-align:left;">
0.909
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U29
</td>
<td style="text-align:left;">
9.2
</td>
<td style="text-align:left;">
5,487
</td>
<td style="text-align:left;">
598.2
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
25.1
</td>
<td style="text-align:left;">
26.1
</td>
<td style="text-align:left;">
32.1
</td>
<td style="text-align:left;">
0.777
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U44
</td>
<td style="text-align:left;">
8.6
</td>
<td style="text-align:left;">
4,792
</td>
<td style="text-align:left;">
556.9
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
24.5
</td>
<td style="text-align:left;">
25.6
</td>
<td style="text-align:left;">
28.6
</td>
<td style="text-align:left;">
0.965
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U2
</td>
<td style="text-align:left;">
8.3
</td>
<td style="text-align:left;">
4,327
</td>
<td style="text-align:left;">
522.2
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
27.5
</td>
<td style="text-align:left;">
30.9
</td>
<td style="text-align:left;">
0.964
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U53
</td>
<td style="text-align:left;">
8.4
</td>
<td style="text-align:left;">
4,835
</td>
<td style="text-align:left;">
573.0
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
24.1
</td>
<td style="text-align:left;">
25.2
</td>
<td style="text-align:left;">
28.6
</td>
<td style="text-align:left;">
1.015
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U41
</td>
<td style="text-align:left;">
8.2
</td>
<td style="text-align:left;">
4,475
</td>
<td style="text-align:left;">
545.7
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
26.9
</td>
<td style="text-align:left;">
28.1
</td>
<td style="text-align:left;">
33.8
</td>
<td style="text-align:left;">
0.874
</td>
<td style="text-align:left;">
0.699
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U43
</td>
<td style="text-align:left;">
8.1
</td>
<td style="text-align:left;">
4,481
</td>
<td style="text-align:left;">
550.9
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
26.0
</td>
<td style="text-align:left;">
27.2
</td>
<td style="text-align:left;">
31.9
</td>
<td style="text-align:left;">
0.972
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U55
</td>
<td style="text-align:left;">
9.2
</td>
<td style="text-align:left;">
5,556
</td>
<td style="text-align:left;">
603.6
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
24.6
</td>
<td style="text-align:left;">
25.6
</td>
<td style="text-align:left;">
31.2
</td>
<td style="text-align:left;">
0.936
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
uniform- high
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U10
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
1,877
</td>
<td style="text-align:left;">
362.7
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
27.1
</td>
<td style="text-align:left;">
28.1
</td>
<td style="text-align:left;">
22.4
</td>
<td style="text-align:left;">
1.104
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U19
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
1,339
</td>
<td style="text-align:left;">
298.1
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
26.7
</td>
<td style="text-align:left;">
28.0
</td>
<td style="text-align:left;">
18.4
</td>
<td style="text-align:left;">
0.990
</td>
<td style="text-align:left;">
1.166
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U18
</td>
<td style="text-align:left;">
4.1
</td>
<td style="text-align:left;">
1,072
</td>
<td style="text-align:left;">
261.0
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
24.5
</td>
<td style="text-align:left;">
26.0
</td>
<td style="text-align:left;">
13.9
</td>
<td style="text-align:left;">
0.973
</td>
<td style="text-align:left;">
1.010
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U27
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
1,746
</td>
<td style="text-align:left;">
419.3
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
5.8
</td>
<td style="text-align:left;">
28.6
</td>
<td style="text-align:left;">
29.5
</td>
<td style="text-align:left;">
28.7
</td>
<td style="text-align:left;">
1.166
</td>
<td style="text-align:left;">
1.072
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U37
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
1,576
</td>
<td style="text-align:left;">
280.3
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
6.0
</td>
<td style="text-align:left;">
28.2
</td>
<td style="text-align:left;">
29.4
</td>
<td style="text-align:left;">
19.0
</td>
<td style="text-align:left;">
1.022
</td>
<td style="text-align:left;">
0.838
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U28
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
999
</td>
<td style="text-align:left;">
232.8
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
27.1
</td>
<td style="text-align:left;">
28.1
</td>
<td style="text-align:left;">
14.5
</td>
<td style="text-align:left;">
1.046
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U45
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
981
</td>
<td style="text-align:left;">
228.3
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
5.8
</td>
<td style="text-align:left;">
28.2
</td>
<td style="text-align:left;">
29.3
</td>
<td style="text-align:left;">
15.4
</td>
<td style="text-align:left;">
0.955
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U33
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
863
</td>
<td style="text-align:left;">
192.4
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.3
</td>
<td style="text-align:left;">
26.8
</td>
<td style="text-align:left;">
27.6
</td>
<td style="text-align:left;">
11.5
</td>
<td style="text-align:left;">
1.076
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U52
</td>
<td style="text-align:left;">
4.1
</td>
<td style="text-align:left;">
1,606
</td>
<td style="text-align:left;">
391.6
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
27.3
</td>
<td style="text-align:left;">
22.9
</td>
<td style="text-align:left;">
1.238
</td>
<td style="text-align:left;">
1.123
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U35
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
1,036
</td>
<td style="text-align:left;">
233.5
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
26.2
</td>
<td style="text-align:left;">
27.1
</td>
<td style="text-align:left;">
13.5
</td>
<td style="text-align:left;">
1.009
</td>
<td style="text-align:left;">
1.184
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U49
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
1,828
</td>
<td style="text-align:left;">
416.2
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
5.7
</td>
<td style="text-align:left;">
28.7
</td>
<td style="text-align:left;">
29.6
</td>
<td style="text-align:left;">
28.6
</td>
<td style="text-align:left;">
1.179
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U32
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
978
</td>
<td style="text-align:left;">
193.6
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
27.4
</td>
<td style="text-align:left;">
11.4
</td>
<td style="text-align:left;">
1.090
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
uniform- low
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U10
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
1,888
</td>
<td style="text-align:left;">
364.8
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
24.8
</td>
<td style="text-align:left;">
25.8
</td>
<td style="text-align:left;">
19.1
</td>
<td style="text-align:left;">
1.011
</td>
<td style="text-align:left;">
0.973
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U19
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
2,458
</td>
<td style="text-align:left;">
547.2
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
26.9
</td>
<td style="text-align:left;">
28.1
</td>
<td style="text-align:left;">
33.9
</td>
<td style="text-align:left;">
1.105
</td>
<td style="text-align:left;">
1.330
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U18
</td>
<td style="text-align:left;">
4.1
</td>
<td style="text-align:left;">
1,521
</td>
<td style="text-align:left;">
370.4
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
24.9
</td>
<td style="text-align:left;">
26.0
</td>
<td style="text-align:left;">
19.6
</td>
<td style="text-align:left;">
1.129
</td>
<td style="text-align:left;">
0.924
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U27
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
1,921
</td>
<td style="text-align:left;">
461.3
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
26.8
</td>
<td style="text-align:left;">
27.9
</td>
<td style="text-align:left;">
28.2
</td>
<td style="text-align:left;">
1.089
</td>
<td style="text-align:left;">
1.100
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U37
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
2,009
</td>
<td style="text-align:left;">
357.3
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
25.3
</td>
<td style="text-align:left;">
26.2
</td>
<td style="text-align:left;">
19.3
</td>
<td style="text-align:left;">
0.957
</td>
<td style="text-align:left;">
0.534
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U28
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
1,784
</td>
<td style="text-align:left;">
415.7
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.3
</td>
<td style="text-align:left;">
26.2
</td>
<td style="text-align:left;">
27.2
</td>
<td style="text-align:left;">
24.2
</td>
<td style="text-align:left;">
1.118
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U45
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
1,228
</td>
<td style="text-align:left;">
285.8
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
5.7
</td>
<td style="text-align:left;">
27.6
</td>
<td style="text-align:left;">
28.6
</td>
<td style="text-align:left;">
18.4
</td>
<td style="text-align:left;">
1.110
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U33
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
1,630
</td>
<td style="text-align:left;">
363.4
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
25.5
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
19.9
</td>
<td style="text-align:left;">
1.057
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U52
</td>
<td style="text-align:left;">
4.1
</td>
<td style="text-align:left;">
2,056
</td>
<td style="text-align:left;">
501.4
</td>
<td style="text-align:left;">
4.6
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
25.7
</td>
<td style="text-align:left;">
26.6
</td>
<td style="text-align:left;">
27.8
</td>
<td style="text-align:left;">
1.282
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U35
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
2,033
</td>
<td style="text-align:left;">
458.3
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
26.6
</td>
<td style="text-align:left;">
27.8
</td>
<td style="text-align:left;">
27.8
</td>
<td style="text-align:left;">
1.021
</td>
<td style="text-align:left;">
1.392
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U49
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
2,472
</td>
<td style="text-align:left;">
562.9
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
27.3
</td>
<td style="text-align:left;">
28.3
</td>
<td style="text-align:left;">
35.4
</td>
<td style="text-align:left;">
1.043
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U32
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
2,176
</td>
<td style="text-align:left;">
430.8
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
24.4
</td>
<td style="text-align:left;">
25.4
</td>
<td style="text-align:left;">
21.9
</td>
<td style="text-align:left;">
1.022
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="imperial-units" class="section level4 hasAnchor" number="4.3.1.2">
<h4><span class="header-section-number">4.3.1.2</span> Imperial units<a href="treatment-unit-silvicultural-summary.html#imperial-units" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="treatment-unit-silvicultural-summary.html#cb153-1" tabindex="-1"></a>unit_sum_df <span class="sc">%&gt;%</span> </span>
<span id="cb153-2"><a href="treatment-unit-silvicultural-summary.html#cb153-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(trtmnt_type, trtmnt_block, trtmnt_unit) <span class="sc">%&gt;%</span> </span>
<span id="cb153-3"><a href="treatment-unit-silvicultural-summary.html#cb153-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb153-4"><a href="treatment-unit-silvicultural-summary.html#cb153-4" tabindex="-1"></a>    trtmnt_type, trtmnt_block, trtmnt_unit</span>
<span id="cb153-5"><a href="treatment-unit-silvicultural-summary.html#cb153-5" tabindex="-1"></a>    , stand_area_ac</span>
<span id="cb153-6"><a href="treatment-unit-silvicultural-summary.html#cb153-6" tabindex="-1"></a>    <span class="co"># different</span></span>
<span id="cb153-7"><a href="treatment-unit-silvicultural-summary.html#cb153-7" tabindex="-1"></a>    , n_trees</span>
<span id="cb153-8"><a href="treatment-unit-silvicultural-summary.html#cb153-8" tabindex="-1"></a>    , trees_per_ac</span>
<span id="cb153-9"><a href="treatment-unit-silvicultural-summary.html#cb153-9" tabindex="-1"></a>    , mean_tree_height_ft</span>
<span id="cb153-10"><a href="treatment-unit-silvicultural-summary.html#cb153-10" tabindex="-1"></a>    , loreys_height_ft</span>
<span id="cb153-11"><a href="treatment-unit-silvicultural-summary.html#cb153-11" tabindex="-1"></a>    , mean_dbh_in</span>
<span id="cb153-12"><a href="treatment-unit-silvicultural-summary.html#cb153-12" tabindex="-1"></a>    , qmd_in</span>
<span id="cb153-13"><a href="treatment-unit-silvicultural-summary.html#cb153-13" tabindex="-1"></a>    , basal_area_ft2_per_ac</span>
<span id="cb153-14"><a href="treatment-unit-silvicultural-summary.html#cb153-14" tabindex="-1"></a>    , mean_landfire_tree_lbs_per_ft3</span>
<span id="cb153-15"><a href="treatment-unit-silvicultural-summary.html#cb153-15" tabindex="-1"></a>    , mean_cruz_tree_lbs_per_ft3</span>
<span id="cb153-16"><a href="treatment-unit-silvicultural-summary.html#cb153-16" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb153-17"><a href="treatment-unit-silvicultural-summary.html#cb153-17" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb153-18"><a href="treatment-unit-silvicultural-summary.html#cb153-18" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="fu">c</span>(n_trees), <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="dv">1</span>))</span>
<span id="cb153-19"><a href="treatment-unit-silvicultural-summary.html#cb153-19" tabindex="-1"></a>  , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb153-20"><a href="treatment-unit-silvicultural-summary.html#cb153-20" tabindex="-1"></a>    <span class="sc">-</span><span class="fu">c</span>(n_trees,tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;trtmnt_&quot;</span>),tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;3&quot;</span>))</span>
<span id="cb153-21"><a href="treatment-unit-silvicultural-summary.html#cb153-21" tabindex="-1"></a>    , <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb153-22"><a href="treatment-unit-silvicultural-summary.html#cb153-22" tabindex="-1"></a>  )</span>
<span id="cb153-23"><a href="treatment-unit-silvicultural-summary.html#cb153-23" tabindex="-1"></a>  , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb153-24"><a href="treatment-unit-silvicultural-summary.html#cb153-24" tabindex="-1"></a>    tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;3&quot;</span>)</span>
<span id="cb153-25"><a href="treatment-unit-silvicultural-summary.html#cb153-25" tabindex="-1"></a>    , <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="fl">0.001</span>)</span>
<span id="cb153-26"><a href="treatment-unit-silvicultural-summary.html#cb153-26" tabindex="-1"></a>  )</span>
<span id="cb153-27"><a href="treatment-unit-silvicultural-summary.html#cb153-27" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb153-28"><a href="treatment-unit-silvicultural-summary.html#cb153-28" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb153-29"><a href="treatment-unit-silvicultural-summary.html#cb153-29" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&quot;Stand summary metrics in imperial units&quot;</span></span>
<span id="cb153-30"><a href="treatment-unit-silvicultural-summary.html#cb153-30" tabindex="-1"></a>  , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb153-31"><a href="treatment-unit-silvicultural-summary.html#cb153-31" tabindex="-1"></a>    <span class="st">&quot;type&quot;</span>,<span class="st">&quot;block&quot;</span>,<span class="st">&quot;unit&quot;</span>,<span class="st">&quot;ac&quot;</span></span>
<span id="cb153-32"><a href="treatment-unit-silvicultural-summary.html#cb153-32" tabindex="-1"></a>    , <span class="st">&quot;trees&quot;</span></span>
<span id="cb153-33"><a href="treatment-unit-silvicultural-summary.html#cb153-33" tabindex="-1"></a>    , <span class="st">&quot;trees ac&lt;sup&gt;-1&lt;/sup&gt;&quot;</span></span>
<span id="cb153-34"><a href="treatment-unit-silvicultural-summary.html#cb153-34" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;tree ht. (ft)&quot;</span></span>
<span id="cb153-35"><a href="treatment-unit-silvicultural-summary.html#cb153-35" tabindex="-1"></a>    , <span class="st">&quot;Lorey&#39;s&lt;br&gt;tree ht. (ft)&quot;</span></span>
<span id="cb153-36"><a href="treatment-unit-silvicultural-summary.html#cb153-36" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;DBH (in)&quot;</span></span>
<span id="cb153-37"><a href="treatment-unit-silvicultural-summary.html#cb153-37" tabindex="-1"></a>    , <span class="st">&quot;QMD (in)&quot;</span></span>
<span id="cb153-38"><a href="treatment-unit-silvicultural-summary.html#cb153-38" tabindex="-1"></a>    , <span class="st">&quot;BA (ft&lt;sup&gt;2&lt;/sup&gt; ac&lt;sup&gt;-1&lt;/sup&gt;)&quot;</span></span>
<span id="cb153-39"><a href="treatment-unit-silvicultural-summary.html#cb153-39" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;CBD (lb ft&lt;sup&gt;-3&lt;/sup&gt;)&lt;br&gt;LANDFIRE&quot;</span></span>
<span id="cb153-40"><a href="treatment-unit-silvicultural-summary.html#cb153-40" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;CBD (lb ft&lt;sup&gt;-3&lt;/sup&gt;)&lt;br&gt;Cruz&quot;</span></span>
<span id="cb153-41"><a href="treatment-unit-silvicultural-summary.html#cb153-41" tabindex="-1"></a>  )</span>
<span id="cb153-42"><a href="treatment-unit-silvicultural-summary.html#cb153-42" tabindex="-1"></a>  , <span class="at">escape =</span> F</span>
<span id="cb153-43"><a href="treatment-unit-silvicultural-summary.html#cb153-43" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb153-44"><a href="treatment-unit-silvicultural-summary.html#cb153-44" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="fl">9.7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb153-45"><a href="treatment-unit-silvicultural-summary.html#cb153-45" tabindex="-1"></a><span class="co"># kableExtra::column_spec(seq(4,10,by=2), border_right = TRUE, include_thead = TRUE) %&gt;% </span></span>
<span id="cb153-46"><a href="treatment-unit-silvicultural-summary.html#cb153-46" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb153-47"><a href="treatment-unit-silvicultural-summary.html#cb153-47" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8.4in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8.4in; ">
<table class="table" style="font-size: 9.7px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-132">Table 4.3: </span>Stand summary metrics in imperial units
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
type
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
block
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
unit
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
ac
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
trees
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
trees ac<sup>-1</sup>
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>tree ht. (ft)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Lorey’s<br>tree ht. (ft)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>DBH (in)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
QMD (in)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
BA (ft<sup>2</sup> ac<sup>-1</sup>)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>CBD (lb ft<sup>-3</sup>)<br>LANDFIRE
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>CBD (lb ft<sup>-3</sup>)<br>Cruz
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
control
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U11
</td>
<td style="text-align:left;">
28.5
</td>
<td style="text-align:left;">
9,614
</td>
<td style="text-align:left;">
337.1
</td>
<td style="text-align:left;">
13.6
</td>
<td style="text-align:left;">
16.1
</td>
<td style="text-align:left;">
9.0
</td>
<td style="text-align:left;">
9.5
</td>
<td style="text-align:left;">
167.3
</td>
<td style="text-align:left;">
0.041
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U23
</td>
<td style="text-align:left;">
25.5
</td>
<td style="text-align:left;">
10,443
</td>
<td style="text-align:left;">
410.3
</td>
<td style="text-align:left;">
14.4
</td>
<td style="text-align:left;">
17.5
</td>
<td style="text-align:left;">
9.5
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
226.0
</td>
<td style="text-align:left;">
0.042
</td>
<td style="text-align:left;">
0.072
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U21
</td>
<td style="text-align:left;">
20.0
</td>
<td style="text-align:left;">
8,410
</td>
<td style="text-align:left;">
420.9
</td>
<td style="text-align:left;">
13.9
</td>
<td style="text-align:left;">
16.2
</td>
<td style="text-align:left;">
9.3
</td>
<td style="text-align:left;">
9.7
</td>
<td style="text-align:left;">
217.4
</td>
<td style="text-align:left;">
0.032
</td>
<td style="text-align:left;">
0.061
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U4
</td>
<td style="text-align:left;">
16.5
</td>
<td style="text-align:left;">
6,417
</td>
<td style="text-align:left;">
388.3
</td>
<td style="text-align:left;">
13.6
</td>
<td style="text-align:left;">
16.8
</td>
<td style="text-align:left;">
8.9
</td>
<td style="text-align:left;">
9.6
</td>
<td style="text-align:left;">
193.1
</td>
<td style="text-align:left;">
0.040
</td>
<td style="text-align:left;">
0.065
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U38
</td>
<td style="text-align:left;">
21.2
</td>
<td style="text-align:left;">
7,030
</td>
<td style="text-align:left;">
331.2
</td>
<td style="text-align:left;">
13.8
</td>
<td style="text-align:left;">
16.3
</td>
<td style="text-align:left;">
9.2
</td>
<td style="text-align:left;">
9.7
</td>
<td style="text-align:left;">
168.4
</td>
<td style="text-align:left;">
0.026
</td>
<td style="text-align:left;">
0.039
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U30
</td>
<td style="text-align:left;">
25.0
</td>
<td style="text-align:left;">
10,692
</td>
<td style="text-align:left;">
427.4
</td>
<td style="text-align:left;">
13.7
</td>
<td style="text-align:left;">
15.8
</td>
<td style="text-align:left;">
9.1
</td>
<td style="text-align:left;">
9.6
</td>
<td style="text-align:left;">
213.1
</td>
<td style="text-align:left;">
0.032
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U46
</td>
<td style="text-align:left;">
21.1
</td>
<td style="text-align:left;">
7,783
</td>
<td style="text-align:left;">
368.5
</td>
<td style="text-align:left;">
15.0
</td>
<td style="text-align:left;">
17.9
</td>
<td style="text-align:left;">
9.9
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
218.5
</td>
<td style="text-align:left;">
0.035
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U31
</td>
<td style="text-align:left;">
20.0
</td>
<td style="text-align:left;">
7,378
</td>
<td style="text-align:left;">
369.5
</td>
<td style="text-align:left;">
15.0
</td>
<td style="text-align:left;">
17.7
</td>
<td style="text-align:left;">
9.9
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
217.1
</td>
<td style="text-align:left;">
0.035
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U54
</td>
<td style="text-align:left;">
25.6
</td>
<td style="text-align:left;">
8,839
</td>
<td style="text-align:left;">
345.9
</td>
<td style="text-align:left;">
14.9
</td>
<td style="text-align:left;">
17.3
</td>
<td style="text-align:left;">
9.9
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
204.2
</td>
<td style="text-align:left;">
0.042
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U42
</td>
<td style="text-align:left;">
20.6
</td>
<td style="text-align:left;">
6,306
</td>
<td style="text-align:left;">
306.0
</td>
<td style="text-align:left;">
13.5
</td>
<td style="text-align:left;">
16.3
</td>
<td style="text-align:left;">
8.9
</td>
<td style="text-align:left;">
9.5
</td>
<td style="text-align:left;">
149.7
</td>
<td style="text-align:left;">
0.041
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U48
</td>
<td style="text-align:left;">
20.5
</td>
<td style="text-align:left;">
6,534
</td>
<td style="text-align:left;">
319.7
</td>
<td style="text-align:left;">
14.2
</td>
<td style="text-align:left;">
17.1
</td>
<td style="text-align:left;">
9.4
</td>
<td style="text-align:left;">
10.0
</td>
<td style="text-align:left;">
172.8
</td>
<td style="text-align:left;">
0.045
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U34
</td>
<td style="text-align:left;">
22.8
</td>
<td style="text-align:left;">
9,752
</td>
<td style="text-align:left;">
427.5
</td>
<td style="text-align:left;">
12.3
</td>
<td style="text-align:left;">
14.4
</td>
<td style="text-align:left;">
8.1
</td>
<td style="text-align:left;">
8.5
</td>
<td style="text-align:left;">
170.0
</td>
<td style="text-align:left;">
0.041
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
heterogenous
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U40
</td>
<td style="text-align:left;">
22.5
</td>
<td style="text-align:left;">
4,623
</td>
<td style="text-align:left;">
205.3
</td>
<td style="text-align:left;">
15.0
</td>
<td style="text-align:left;">
17.5
</td>
<td style="text-align:left;">
10.0
</td>
<td style="text-align:left;">
10.5
</td>
<td style="text-align:left;">
122.6
</td>
<td style="text-align:left;">
0.058
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U16
</td>
<td style="text-align:left;">
23.5
</td>
<td style="text-align:left;">
5,576
</td>
<td style="text-align:left;">
237.6
</td>
<td style="text-align:left;">
15.5
</td>
<td style="text-align:left;">
18.2
</td>
<td style="text-align:left;">
10.2
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
148.4
</td>
<td style="text-align:left;">
0.061
</td>
<td style="text-align:left;">
0.066
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U26
</td>
<td style="text-align:left;">
22.2
</td>
<td style="text-align:left;">
4,586
</td>
<td style="text-align:left;">
207.1
</td>
<td style="text-align:left;">
15.6
</td>
<td style="text-align:left;">
18.7
</td>
<td style="text-align:left;">
10.2
</td>
<td style="text-align:left;">
10.8
</td>
<td style="text-align:left;">
131.3
</td>
<td style="text-align:left;">
0.054
</td>
<td style="text-align:left;">
0.057
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U36
</td>
<td style="text-align:left;">
21.0
</td>
<td style="text-align:left;">
4,014
</td>
<td style="text-align:left;">
191.1
</td>
<td style="text-align:left;">
14.8
</td>
<td style="text-align:left;">
17.4
</td>
<td style="text-align:left;">
9.8
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
110.4
</td>
<td style="text-align:left;">
0.048
</td>
<td style="text-align:left;">
0.049
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U39
</td>
<td style="text-align:left;">
20.5
</td>
<td style="text-align:left;">
4,108
</td>
<td style="text-align:left;">
200.2
</td>
<td style="text-align:left;">
15.5
</td>
<td style="text-align:left;">
17.6
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
10.8
</td>
<td style="text-align:left;">
127.0
</td>
<td style="text-align:left;">
0.053
</td>
<td style="text-align:left;">
0.057
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U29
</td>
<td style="text-align:left;">
22.7
</td>
<td style="text-align:left;">
5,487
</td>
<td style="text-align:left;">
242.3
</td>
<td style="text-align:left;">
14.7
</td>
<td style="text-align:left;">
16.8
</td>
<td style="text-align:left;">
9.9
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
139.8
</td>
<td style="text-align:left;">
0.048
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U44
</td>
<td style="text-align:left;">
21.3
</td>
<td style="text-align:left;">
4,792
</td>
<td style="text-align:left;">
225.5
</td>
<td style="text-align:left;">
14.4
</td>
<td style="text-align:left;">
16.4
</td>
<td style="text-align:left;">
9.7
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
124.8
</td>
<td style="text-align:left;">
0.060
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U2
</td>
<td style="text-align:left;">
20.5
</td>
<td style="text-align:left;">
4,327
</td>
<td style="text-align:left;">
211.5
</td>
<td style="text-align:left;">
15.6
</td>
<td style="text-align:left;">
17.9
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
10.8
</td>
<td style="text-align:left;">
134.8
</td>
<td style="text-align:left;">
0.060
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U53
</td>
<td style="text-align:left;">
20.9
</td>
<td style="text-align:left;">
4,835
</td>
<td style="text-align:left;">
232.1
</td>
<td style="text-align:left;">
14.2
</td>
<td style="text-align:left;">
16.4
</td>
<td style="text-align:left;">
9.5
</td>
<td style="text-align:left;">
9.9
</td>
<td style="text-align:left;">
124.9
</td>
<td style="text-align:left;">
0.063
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U41
</td>
<td style="text-align:left;">
20.3
</td>
<td style="text-align:left;">
4,475
</td>
<td style="text-align:left;">
221.0
</td>
<td style="text-align:left;">
16.0
</td>
<td style="text-align:left;">
18.3
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
147.3
</td>
<td style="text-align:left;">
0.055
</td>
<td style="text-align:left;">
0.044
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U43
</td>
<td style="text-align:left;">
20.1
</td>
<td style="text-align:left;">
4,481
</td>
<td style="text-align:left;">
223.1
</td>
<td style="text-align:left;">
15.4
</td>
<td style="text-align:left;">
17.7
</td>
<td style="text-align:left;">
10.2
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
139.1
</td>
<td style="text-align:left;">
0.061
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U55
</td>
<td style="text-align:left;">
22.7
</td>
<td style="text-align:left;">
5,556
</td>
<td style="text-align:left;">
244.4
</td>
<td style="text-align:left;">
14.4
</td>
<td style="text-align:left;">
16.4
</td>
<td style="text-align:left;">
9.7
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
135.8
</td>
<td style="text-align:left;">
0.058
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
uniform- high
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U10
</td>
<td style="text-align:left;">
12.8
</td>
<td style="text-align:left;">
1,877
</td>
<td style="text-align:left;">
146.9
</td>
<td style="text-align:left;">
15.9
</td>
<td style="text-align:left;">
17.8
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
97.7
</td>
<td style="text-align:left;">
0.069
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U19
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
1,339
</td>
<td style="text-align:left;">
120.7
</td>
<td style="text-align:left;">
15.9
</td>
<td style="text-align:left;">
18.5
</td>
<td style="text-align:left;">
10.5
</td>
<td style="text-align:left;">
11.0
</td>
<td style="text-align:left;">
80.0
</td>
<td style="text-align:left;">
0.062
</td>
<td style="text-align:left;">
0.073
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U18
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
1,072
</td>
<td style="text-align:left;">
105.7
</td>
<td style="text-align:left;">
14.7
</td>
<td style="text-align:left;">
17.9
</td>
<td style="text-align:left;">
9.6
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
60.5
</td>
<td style="text-align:left;">
0.061
</td>
<td style="text-align:left;">
0.063
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U27
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
1,746
</td>
<td style="text-align:left;">
169.8
</td>
<td style="text-align:left;">
17.0
</td>
<td style="text-align:left;">
19.1
</td>
<td style="text-align:left;">
11.3
</td>
<td style="text-align:left;">
11.6
</td>
<td style="text-align:left;">
125.2
</td>
<td style="text-align:left;">
0.073
</td>
<td style="text-align:left;">
0.067
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U37
</td>
<td style="text-align:left;">
13.9
</td>
<td style="text-align:left;">
1,576
</td>
<td style="text-align:left;">
113.5
</td>
<td style="text-align:left;">
17.1
</td>
<td style="text-align:left;">
19.7
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
11.6
</td>
<td style="text-align:left;">
82.7
</td>
<td style="text-align:left;">
0.064
</td>
<td style="text-align:left;">
0.052
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U28
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
999
</td>
<td style="text-align:left;">
94.3
</td>
<td style="text-align:left;">
16.0
</td>
<td style="text-align:left;">
18.1
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
63.1
</td>
<td style="text-align:left;">
0.065
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U45
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
981
</td>
<td style="text-align:left;">
92.5
</td>
<td style="text-align:left;">
16.8
</td>
<td style="text-align:left;">
19.0
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
11.5
</td>
<td style="text-align:left;">
67.0
</td>
<td style="text-align:left;">
0.060
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U33
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
863
</td>
<td style="text-align:left;">
77.9
</td>
<td style="text-align:left;">
15.6
</td>
<td style="text-align:left;">
17.2
</td>
<td style="text-align:left;">
10.5
</td>
<td style="text-align:left;">
10.9
</td>
<td style="text-align:left;">
50.1
</td>
<td style="text-align:left;">
0.067
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U52
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
1,606
</td>
<td style="text-align:left;">
158.6
</td>
<td style="text-align:left;">
15.4
</td>
<td style="text-align:left;">
17.2
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
10.8
</td>
<td style="text-align:left;">
100.0
</td>
<td style="text-align:left;">
0.077
</td>
<td style="text-align:left;">
0.070
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U35
</td>
<td style="text-align:left;">
11.0
</td>
<td style="text-align:left;">
1,036
</td>
<td style="text-align:left;">
94.6
</td>
<td style="text-align:left;">
15.3
</td>
<td style="text-align:left;">
17.1
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
58.8
</td>
<td style="text-align:left;">
0.063
</td>
<td style="text-align:left;">
0.074
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U49
</td>
<td style="text-align:left;">
10.9
</td>
<td style="text-align:left;">
1,828
</td>
<td style="text-align:left;">
168.6
</td>
<td style="text-align:left;">
17.0
</td>
<td style="text-align:left;">
18.9
</td>
<td style="text-align:left;">
11.3
</td>
<td style="text-align:left;">
11.6
</td>
<td style="text-align:left;">
124.6
</td>
<td style="text-align:left;">
0.074
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U32
</td>
<td style="text-align:left;">
12.5
</td>
<td style="text-align:left;">
978
</td>
<td style="text-align:left;">
78.4
</td>
<td style="text-align:left;">
15.5
</td>
<td style="text-align:left;">
17.6
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
10.8
</td>
<td style="text-align:left;">
49.9
</td>
<td style="text-align:left;">
0.068
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
uniform- low
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U10
</td>
<td style="text-align:left;">
12.8
</td>
<td style="text-align:left;">
1,888
</td>
<td style="text-align:left;">
147.8
</td>
<td style="text-align:left;">
14.5
</td>
<td style="text-align:left;">
16.4
</td>
<td style="text-align:left;">
9.8
</td>
<td style="text-align:left;">
10.2
</td>
<td style="text-align:left;">
83.2
</td>
<td style="text-align:left;">
0.063
</td>
<td style="text-align:left;">
0.061
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U19
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
2,458
</td>
<td style="text-align:left;">
221.6
</td>
<td style="text-align:left;">
16.0
</td>
<td style="text-align:left;">
18.3
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
147.7
</td>
<td style="text-align:left;">
0.069
</td>
<td style="text-align:left;">
0.083
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U18
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
1,521
</td>
<td style="text-align:left;">
150.0
</td>
<td style="text-align:left;">
14.6
</td>
<td style="text-align:left;">
16.7
</td>
<td style="text-align:left;">
9.8
</td>
<td style="text-align:left;">
10.2
</td>
<td style="text-align:left;">
85.5
</td>
<td style="text-align:left;">
0.070
</td>
<td style="text-align:left;">
0.058
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U27
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
1,921
</td>
<td style="text-align:left;">
186.8
</td>
<td style="text-align:left;">
15.9
</td>
<td style="text-align:left;">
18.2
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
11.0
</td>
<td style="text-align:left;">
122.8
</td>
<td style="text-align:left;">
0.068
</td>
<td style="text-align:left;">
0.069
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U37
</td>
<td style="text-align:left;">
13.9
</td>
<td style="text-align:left;">
2,009
</td>
<td style="text-align:left;">
144.7
</td>
<td style="text-align:left;">
14.7
</td>
<td style="text-align:left;">
16.4
</td>
<td style="text-align:left;">
10.0
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
84.1
</td>
<td style="text-align:left;">
0.060
</td>
<td style="text-align:left;">
0.033
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U28
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
1,784
</td>
<td style="text-align:left;">
168.4
</td>
<td style="text-align:left;">
15.4
</td>
<td style="text-align:left;">
17.4
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
105.4
</td>
<td style="text-align:left;">
0.070
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U45
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
1,228
</td>
<td style="text-align:left;">
115.8
</td>
<td style="text-align:left;">
16.5
</td>
<td style="text-align:left;">
18.7
</td>
<td style="text-align:left;">
10.9
</td>
<td style="text-align:left;">
11.3
</td>
<td style="text-align:left;">
80.2
</td>
<td style="text-align:left;">
0.069
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U33
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
1,630
</td>
<td style="text-align:left;">
147.2
</td>
<td style="text-align:left;">
14.9
</td>
<td style="text-align:left;">
16.6
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
86.9
</td>
<td style="text-align:left;">
0.066
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U52
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
2,056
</td>
<td style="text-align:left;">
203.1
</td>
<td style="text-align:left;">
15.0
</td>
<td style="text-align:left;">
16.7
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
10.5
</td>
<td style="text-align:left;">
121.3
</td>
<td style="text-align:left;">
0.080
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U35
</td>
<td style="text-align:left;">
11.0
</td>
<td style="text-align:left;">
2,033
</td>
<td style="text-align:left;">
185.6
</td>
<td style="text-align:left;">
15.8
</td>
<td style="text-align:left;">
18.1
</td>
<td style="text-align:left;">
10.5
</td>
<td style="text-align:left;">
10.9
</td>
<td style="text-align:left;">
121.1
</td>
<td style="text-align:left;">
0.064
</td>
<td style="text-align:left;">
0.087
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U49
</td>
<td style="text-align:left;">
10.9
</td>
<td style="text-align:left;">
2,472
</td>
<td style="text-align:left;">
228.0
</td>
<td style="text-align:left;">
16.2
</td>
<td style="text-align:left;">
18.5
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
11.2
</td>
<td style="text-align:left;">
154.5
</td>
<td style="text-align:left;">
0.065
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U32
</td>
<td style="text-align:left;">
12.5
</td>
<td style="text-align:left;">
2,176
</td>
<td style="text-align:left;">
174.5
</td>
<td style="text-align:left;">
14.3
</td>
<td style="text-align:left;">
16.2
</td>
<td style="text-align:left;">
9.6
</td>
<td style="text-align:left;">
10.0
</td>
<td style="text-align:left;">
95.3
</td>
<td style="text-align:left;">
0.064
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="visual" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Visual<a href="treatment-unit-silvicultural-summary.html#visual" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>we’ll start with a simple bar plot to see if the aggregated trees per ha generally align with the treatment types</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="treatment-unit-silvicultural-summary.html#cb154-1" tabindex="-1"></a>unit_sum_df <span class="sc">%&gt;%</span> </span>
<span id="cb154-2"><a href="treatment-unit-silvicultural-summary.html#cb154-2" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x=</span>trees_per_ha,<span class="at">y=</span>my_fct,<span class="at">fill=</span>trtmnt_type,<span class="at">group =</span> trtmnt_type)) <span class="sc">+</span></span>
<span id="cb154-3"><a href="treatment-unit-silvicultural-summary.html#cb154-3" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb154-4"><a href="treatment-unit-silvicultural-summary.html#cb154-4" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb154-5"><a href="treatment-unit-silvicultural-summary.html#cb154-5" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb154-6"><a href="treatment-unit-silvicultural-summary.html#cb154-6" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb154-7"><a href="treatment-unit-silvicultural-summary.html#cb154-7" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;trees per ha&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb154-8"><a href="treatment-unit-silvicultural-summary.html#cb154-8" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb154-9"><a href="treatment-unit-silvicultural-summary.html#cb154-9" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb154-10"><a href="treatment-unit-silvicultural-summary.html#cb154-10" tabindex="-1"></a>    , <span class="at">axis.text.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>)</span>
<span id="cb154-11"><a href="treatment-unit-silvicultural-summary.html#cb154-11" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb154-12"><a href="treatment-unit-silvicultural-summary.html#cb154-12" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-133-1.png" alt="" width="1008" /></p>
<p>that’s looks about right, let’s check out a unit-level distribution of the TPH</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="treatment-unit-silvicultural-summary.html#cb155-1" tabindex="-1"></a><span class="co"># reusable function for plotting</span></span>
<span id="cb155-2"><a href="treatment-unit-silvicultural-summary.html#cb155-2" tabindex="-1"></a>plt_metric_dist_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(df, metric_name, <span class="at">metric_label =</span> <span class="cn">NA</span>) {</span>
<span id="cb155-3"><a href="treatment-unit-silvicultural-summary.html#cb155-3" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">is.na</span>(metric_label))){metric_label <span class="ot">&lt;-</span> metric_name}</span>
<span id="cb155-4"><a href="treatment-unit-silvicultural-summary.html#cb155-4" tabindex="-1"></a>  tit <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb155-5"><a href="treatment-unit-silvicultural-summary.html#cb155-5" tabindex="-1"></a>    <span class="st">&quot;distribution of treatment unit&quot;</span></span>
<span id="cb155-6"><a href="treatment-unit-silvicultural-summary.html#cb155-6" tabindex="-1"></a>    ,metric_label</span>
<span id="cb155-7"><a href="treatment-unit-silvicultural-summary.html#cb155-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb155-8"><a href="treatment-unit-silvicultural-summary.html#cb155-8" tabindex="-1"></a>  latex2exp<span class="sc">::</span><span class="fu">TeX</span>()</span>
<span id="cb155-9"><a href="treatment-unit-silvicultural-summary.html#cb155-9" tabindex="-1"></a>  </span>
<span id="cb155-10"><a href="treatment-unit-silvicultural-summary.html#cb155-10" tabindex="-1"></a>  df <span class="sc">%&gt;%</span> </span>
<span id="cb155-11"><a href="treatment-unit-silvicultural-summary.html#cb155-11" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x=</span>.data[[metric_name]],<span class="at">fill=</span>trtmnt_type)) <span class="sc">+</span></span>
<span id="cb155-12"><a href="treatment-unit-silvicultural-summary.html#cb155-12" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y=</span>ggplot2<span class="sc">::</span><span class="fu">after_stat</span>(scaled)), <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb155-13"><a href="treatment-unit-silvicultural-summary.html#cb155-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_grid</span>(</span>
<span id="cb155-14"><a href="treatment-unit-silvicultural-summary.html#cb155-14" tabindex="-1"></a>    <span class="at">rows =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(trtmnt_type)</span>
<span id="cb155-15"><a href="treatment-unit-silvicultural-summary.html#cb155-15" tabindex="-1"></a>    , <span class="at">axes =</span> <span class="st">&quot;all&quot;</span></span>
<span id="cb155-16"><a href="treatment-unit-silvicultural-summary.html#cb155-16" tabindex="-1"></a>    , <span class="at">switch =</span> <span class="st">&quot;y&quot;</span></span>
<span id="cb155-17"><a href="treatment-unit-silvicultural-summary.html#cb155-17" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb155-18"><a href="treatment-unit-silvicultural-summary.html#cb155-18" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb155-19"><a href="treatment-unit-silvicultural-summary.html#cb155-19" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="cn">NA</span>),<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb155-20"><a href="treatment-unit-silvicultural-summary.html#cb155-20" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks=</span><span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb155-21"><a href="treatment-unit-silvicultural-summary.html#cb155-21" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb155-22"><a href="treatment-unit-silvicultural-summary.html#cb155-22" tabindex="-1"></a>    <span class="at">fill=</span><span class="st">&quot;&quot;</span>,<span class="at">x=</span>latex2exp<span class="sc">::</span><span class="fu">TeX</span>(metric_label),<span class="at">y=</span><span class="st">&quot;&quot;</span></span>
<span id="cb155-23"><a href="treatment-unit-silvicultural-summary.html#cb155-23" tabindex="-1"></a>    , <span class="at">title =</span> tit</span>
<span id="cb155-24"><a href="treatment-unit-silvicultural-summary.html#cb155-24" tabindex="-1"></a>    , <span class="at">subtitle =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">by treatment type&quot;</span></span>
<span id="cb155-25"><a href="treatment-unit-silvicultural-summary.html#cb155-25" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb155-26"><a href="treatment-unit-silvicultural-summary.html#cb155-26" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb155-27"><a href="treatment-unit-silvicultural-summary.html#cb155-27" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb155-28"><a href="treatment-unit-silvicultural-summary.html#cb155-28" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb155-29"><a href="treatment-unit-silvicultural-summary.html#cb155-29" tabindex="-1"></a>    , <span class="at">strip.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb155-30"><a href="treatment-unit-silvicultural-summary.html#cb155-30" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb155-31"><a href="treatment-unit-silvicultural-summary.html#cb155-31" tabindex="-1"></a>    , <span class="at">plot.subtitle =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="sc">-</span><span class="dv">10</span>, <span class="at">unit =</span> <span class="st">&quot;pt&quot;</span>))</span>
<span id="cb155-32"><a href="treatment-unit-silvicultural-summary.html#cb155-32" tabindex="-1"></a>  )</span>
<span id="cb155-33"><a href="treatment-unit-silvicultural-summary.html#cb155-33" tabindex="-1"></a>}</span>
<span id="cb155-34"><a href="treatment-unit-silvicultural-summary.html#cb155-34" tabindex="-1"></a>plt_metric_violin_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(df, metric_name, <span class="at">metric_label =</span> <span class="cn">NA</span>) {</span>
<span id="cb155-35"><a href="treatment-unit-silvicultural-summary.html#cb155-35" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">is.na</span>(metric_label))){metric_label <span class="ot">&lt;-</span> metric_name}</span>
<span id="cb155-36"><a href="treatment-unit-silvicultural-summary.html#cb155-36" tabindex="-1"></a>  tit <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb155-37"><a href="treatment-unit-silvicultural-summary.html#cb155-37" tabindex="-1"></a>    <span class="st">&quot;distribution of treatment unit&quot;</span></span>
<span id="cb155-38"><a href="treatment-unit-silvicultural-summary.html#cb155-38" tabindex="-1"></a>    ,metric_label</span>
<span id="cb155-39"><a href="treatment-unit-silvicultural-summary.html#cb155-39" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb155-40"><a href="treatment-unit-silvicultural-summary.html#cb155-40" tabindex="-1"></a>  latex2exp<span class="sc">::</span><span class="fu">TeX</span>()</span>
<span id="cb155-41"><a href="treatment-unit-silvicultural-summary.html#cb155-41" tabindex="-1"></a>  </span>
<span id="cb155-42"><a href="treatment-unit-silvicultural-summary.html#cb155-42" tabindex="-1"></a>  df <span class="sc">%&gt;%</span> </span>
<span id="cb155-43"><a href="treatment-unit-silvicultural-summary.html#cb155-43" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x=</span>.data[[metric_name]])) <span class="sc">+</span></span>
<span id="cb155-44"><a href="treatment-unit-silvicultural-summary.html#cb155-44" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_violin</span>(</span>
<span id="cb155-45"><a href="treatment-unit-silvicultural-summary.html#cb155-45" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y =</span> <span class="dv">0</span>, <span class="at">fill=</span>trtmnt_type)</span>
<span id="cb155-46"><a href="treatment-unit-silvicultural-summary.html#cb155-46" tabindex="-1"></a>    , <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">color =</span> <span class="cn">NA</span></span>
<span id="cb155-47"><a href="treatment-unit-silvicultural-summary.html#cb155-47" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb155-48"><a href="treatment-unit-silvicultural-summary.html#cb155-48" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.1</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">outliers =</span> F) <span class="sc">+</span></span>
<span id="cb155-49"><a href="treatment-unit-silvicultural-summary.html#cb155-49" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_grid</span>(</span>
<span id="cb155-50"><a href="treatment-unit-silvicultural-summary.html#cb155-50" tabindex="-1"></a>    <span class="at">rows =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(trtmnt_type)</span>
<span id="cb155-51"><a href="treatment-unit-silvicultural-summary.html#cb155-51" tabindex="-1"></a>    , <span class="at">axes =</span> <span class="st">&quot;all&quot;</span></span>
<span id="cb155-52"><a href="treatment-unit-silvicultural-summary.html#cb155-52" tabindex="-1"></a>    , <span class="at">switch =</span> <span class="st">&quot;y&quot;</span></span>
<span id="cb155-53"><a href="treatment-unit-silvicultural-summary.html#cb155-53" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb155-54"><a href="treatment-unit-silvicultural-summary.html#cb155-54" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb155-55"><a href="treatment-unit-silvicultural-summary.html#cb155-55" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="cn">NA</span>),<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb155-56"><a href="treatment-unit-silvicultural-summary.html#cb155-56" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks=</span><span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb155-57"><a href="treatment-unit-silvicultural-summary.html#cb155-57" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb155-58"><a href="treatment-unit-silvicultural-summary.html#cb155-58" tabindex="-1"></a>    <span class="at">fill=</span><span class="st">&quot;&quot;</span>,<span class="at">x=</span>latex2exp<span class="sc">::</span><span class="fu">TeX</span>(metric_label),<span class="at">y=</span><span class="st">&quot;&quot;</span></span>
<span id="cb155-59"><a href="treatment-unit-silvicultural-summary.html#cb155-59" tabindex="-1"></a>    , <span class="at">title =</span> tit</span>
<span id="cb155-60"><a href="treatment-unit-silvicultural-summary.html#cb155-60" tabindex="-1"></a>    , <span class="at">subtitle =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">by treatment type&quot;</span></span>
<span id="cb155-61"><a href="treatment-unit-silvicultural-summary.html#cb155-61" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb155-62"><a href="treatment-unit-silvicultural-summary.html#cb155-62" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb155-63"><a href="treatment-unit-silvicultural-summary.html#cb155-63" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb155-64"><a href="treatment-unit-silvicultural-summary.html#cb155-64" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb155-65"><a href="treatment-unit-silvicultural-summary.html#cb155-65" tabindex="-1"></a>    , <span class="at">strip.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb155-66"><a href="treatment-unit-silvicultural-summary.html#cb155-66" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb155-67"><a href="treatment-unit-silvicultural-summary.html#cb155-67" tabindex="-1"></a>    , <span class="at">plot.subtitle =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="sc">-</span><span class="dv">10</span>, <span class="at">unit =</span> <span class="st">&quot;pt&quot;</span>))</span>
<span id="cb155-68"><a href="treatment-unit-silvicultural-summary.html#cb155-68" tabindex="-1"></a>  )</span>
<span id="cb155-69"><a href="treatment-unit-silvicultural-summary.html#cb155-69" tabindex="-1"></a>}</span>
<span id="cb155-70"><a href="treatment-unit-silvicultural-summary.html#cb155-70" tabindex="-1"></a><span class="co"># plot it</span></span>
<span id="cb155-71"><a href="treatment-unit-silvicultural-summary.html#cb155-71" tabindex="-1"></a><span class="fu">plt_metric_violin_fn</span>(unit_sum_df,<span class="st">&quot;trees_per_ha&quot;</span>,<span class="at">metric_label =</span> <span class="st">&quot;trees $ha^{-1}$&quot;</span>)</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-134-1.png" alt="" width="1008" /></p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="treatment-unit-silvicultural-summary.html#cb156-1" tabindex="-1"></a><span class="co"># plt_metric_dist_fn(unit_sum_df,&quot;trees_per_ha&quot;,metric_label = &quot;trees $ha^{-1}$&quot;)</span></span></code></pre></div>
<p>since we also have imperial units let’s see TPA</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="treatment-unit-silvicultural-summary.html#cb157-1" tabindex="-1"></a><span class="fu">plt_metric_violin_fn</span>(unit_sum_df,<span class="st">&quot;trees_per_ac&quot;</span>,<span class="at">metric_label =</span> <span class="st">&quot;trees $ac^{-1}$&quot;</span>)</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-135-1.png" alt="" width="1008" /></p>
<p>we can also look at the QMD in cm</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="treatment-unit-silvicultural-summary.html#cb158-1" tabindex="-1"></a><span class="fu">plt_metric_violin_fn</span>(unit_sum_df,<span class="st">&quot;qmd_cm&quot;</span>,<span class="at">metric_label =</span> <span class="st">&quot;QMD (cm)&quot;</span>)</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-136-1.png" alt="" width="1008" /></p>
<p>and QMD in inches</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="treatment-unit-silvicultural-summary.html#cb159-1" tabindex="-1"></a><span class="fu">plt_metric_violin_fn</span>(unit_sum_df,<span class="st">&quot;qmd_in&quot;</span>,<span class="at">metric_label =</span> <span class="st">&quot;QMD (in)&quot;</span>)</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-137-1.png" alt="" width="1008" /></p>
<p>and basal area in square meters per hectare</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="treatment-unit-silvicultural-summary.html#cb160-1" tabindex="-1"></a><span class="fu">plt_metric_violin_fn</span>(unit_sum_df,<span class="st">&quot;basal_area_m2_per_ha&quot;</span>,<span class="at">metric_label =</span> <span class="st">&quot;basal area ($m^{2} ha^{-1}$)&quot;</span>)</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-138-1.png" alt="" width="1008" /></p>
<p>but also basal area in square feet per acre</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="treatment-unit-silvicultural-summary.html#cb161-1" tabindex="-1"></a><span class="fu">plt_metric_violin_fn</span>(unit_sum_df,<span class="st">&quot;basal_area_ft2_per_ac&quot;</span>,<span class="at">metric_label =</span> <span class="st">&quot;basal area ($ft^{2} ac^{-1}$)&quot;</span>)</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-139-1.png" alt="" width="1008" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="slash-piles.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

</body>

</html>
