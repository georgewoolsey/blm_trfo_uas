<!DOCTYPE html>
<html lang="en-US" xml:lang="en-US">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 4 Treatment Unit Silvicultural Summary | BLM Tres Rios Field Office: Dawson project area UAS data</title>
  <meta name="description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 4 Treatment Unit Silvicultural Summary | BLM Tres Rios Field Office: Dawson project area UAS data" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 4 Treatment Unit Silvicultural Summary | BLM Tres Rios Field Office: Dawson project area UAS data" />
  
  <meta name="twitter:description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="George Woolsey" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="slash-piles.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.9/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<script type="text/javascript">

// toggle visibility of R source blocks in R Markdown output
function toggle_R() {
  var x = document.getElementsByClassName('r');
  if (x.length == 0) return;
  function toggle_vis(o) {
    var d = o.style.display;
    o.style.display = (d == 'block' || d == '') ? 'none':'block';
  }

  for (i = 0; i < x.length; i++) {
    var y = x[i];
    if (y.tagName.toLowerCase() === 'pre') toggle_vis(y);
  }

    var elem = document.getElementById("myButton1");
    if (elem.value === "Hide Code") elem.value = "Show Code";
    else elem.value = "Hide Code";
}

document.write('<input onclick="toggle_R();" type="button" value="Hide Code" id="myButton1" style="position: absolute; top: 10%; right: 2%; z-index: 200"></input>')

</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#objective"><i class="fa fa-check"></i><b>1.1</b> Objective</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="processing.html"><a href="processing.html"><i class="fa fa-check"></i><b>2</b> Point Cloud Processing</a>
<ul>
<li class="chapter" data-level="2.1" data-path="processing.html"><a href="processing.html#data-location"><i class="fa fa-check"></i><b>2.1</b> Data Location</a></li>
<li class="chapter" data-level="2.2" data-path="processing.html"><a href="processing.html#point-cloud-to-raster-cloud2raster"><i class="fa fa-check"></i><b>2.2</b> Point Cloud to Raster: <code>cloud2raster()</code></a></li>
<li class="chapter" data-level="2.3" data-path="processing.html"><a href="processing.html#individial-tree-detection-tuning-itd_tuning"><i class="fa fa-check"></i><b>2.3</b> Individial Tree Detection Tuning: <code id="itd">itd_tuning()</code></a></li>
<li class="chapter" data-level="2.4" data-path="processing.html"><a href="processing.html#tree-extraction-raster2trees"><i class="fa fa-check"></i><b>2.4</b> Tree Extraction: <code id="trees">raster2trees()</code></a></li>
<li class="chapter" data-level="2.5" data-path="processing.html"><a href="processing.html#cbh-modeling-trees_cbh"><i class="fa fa-check"></i><b>2.5</b> CBH Modeling: <code>trees_cbh()</code></a></li>
<li class="chapter" data-level="2.6" data-path="processing.html"><a href="processing.html#dbh-modeling-trees_dbh"><i class="fa fa-check"></i><b>2.6</b> DBH Modeling: <code>trees_dbh()</code></a></li>
<li class="chapter" data-level="2.7" data-path="processing.html"><a href="processing.html#hmd-modeling-trees_hmd"><i class="fa fa-check"></i><b>2.7</b> HMD Modeling: <code>trees_hmd()</code></a></li>
<li class="chapter" data-level="2.8" data-path="processing.html"><a href="processing.html#forest-type-trees_type"><i class="fa fa-check"></i><b>2.8</b> Forest Type: <code id="trees_type">trees_type()</code></a></li>
<li class="chapter" data-level="2.9" data-path="processing.html"><a href="processing.html#combine-data"><i class="fa fa-check"></i><b>2.9</b> Combine data</a></li>
<li class="chapter" data-level="2.10" data-path="processing.html"><a href="processing.html#crown-biomass-trees_biomass"><i class="fa fa-check"></i><b>2.10</b> Crown Biomass: <code id="trees_biomass">trees_biomass()</code></a></li>
<li class="chapter" data-level="2.11" data-path="processing.html"><a href="processing.html#processing-time-summary"><i class="fa fa-check"></i><b>2.11</b> Processing Time Summary</a></li>
<li class="chapter" data-level="2.12" data-path="processing.html"><a href="processing.html#data-export"><i class="fa fa-check"></i><b>2.12</b> Data Export</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="slash-piles.html"><a href="slash-piles.html"><i class="fa fa-check"></i><b>3</b> Slash Piles</a>
<ul>
<li class="chapter" data-level="3.1" data-path="slash-piles.html"><a href="slash-piles.html#slash-pile-detection-workflow"><i class="fa fa-check"></i><b>3.1</b> Slash Pile Detection Workflow</a></li>
<li class="chapter" data-level="3.2" data-path="slash-piles.html"><a href="slash-piles.html#candidate-pile-review"><i class="fa fa-check"></i><b>3.2</b> Candidate Pile Review</a></li>
<li class="chapter" data-level="3.3" data-path="slash-piles.html"><a href="slash-piles.html#slash-pile-summary-statistics"><i class="fa fa-check"></i><b>3.3</b> Slash Pile Summary Statistics</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html"><i class="fa fa-check"></i><b>4</b> Treatment Unit Silvicultural Summary</a>
<ul>
<li class="chapter" data-level="4.1" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html#remove-slash-piles"><i class="fa fa-check"></i><b>4.1</b> Remove Slash Piles</a></li>
<li class="chapter" data-level="4.2" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html#function-to-calculate-silviclutural-metrics"><i class="fa fa-check"></i><b>4.2</b> Function to Calculate Silviclutural Metrics</a></li>
<li class="chapter" data-level="4.3" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html#treatment-unit-summaries"><i class="fa fa-check"></i><b>4.3</b> Treatment Unit Summaries</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html#tabular"><i class="fa fa-check"></i><b>4.3.1</b> Tabular</a></li>
<li class="chapter" data-level="4.3.2" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html#visual"><i class="fa fa-check"></i><b>4.3.2</b> Visual</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="treatment-unit-silvicultural-summary.html"><a href="treatment-unit-silvicultural-summary.html#tree-distribution-by-treatment-type"><i class="fa fa-check"></i><b>4.4</b> Tree Distribution by Treatment Type</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">BLM Tres Rios Field Office: Dawson project area UAS data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="treatment-unit-silvicultural-summary" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Section 4</span> Treatment Unit Silvicultural Summary<a href="treatment-unit-silvicultural-summary.html#treatment-unit-silvicultural-summary" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this section, we’re going to aggregate the detected trees by treatment unit to produce silvicultural summaries. Before we do that, we’ll use pile predictions as a mask to remove smaller, detected “trees” that are actually piles or downed trees/debris so that we are only working with trees within units.</p>
<div id="remove-slash-piles" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Remove Slash Piles<a href="treatment-unit-silvicultural-summary.html#remove-slash-piles" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>read back in the tree point data and attach to treatment units</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="treatment-unit-silvicultural-summary.html#cb148-1" tabindex="-1"></a>treetops_sf <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="at">dsn =</span> treetops_fnm, <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb148-2"><a href="treatment-unit-silvicultural-summary.html#cb148-2" tabindex="-1"></a><span class="co"># attach to treatment unit</span></span>
<span id="cb148-3"><a href="treatment-unit-silvicultural-summary.html#cb148-3" tabindex="-1"></a>treetops_sf <span class="ot">&lt;-</span> treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb148-4"><a href="treatment-unit-silvicultural-summary.html#cb148-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb148-5"><a href="treatment-unit-silvicultural-summary.html#cb148-5" tabindex="-1"></a>    treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb148-6"><a href="treatment-unit-silvicultural-summary.html#cb148-6" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(stand_boundary)) <span class="sc">%&gt;%</span> </span>
<span id="cb148-7"><a href="treatment-unit-silvicultural-summary.html#cb148-7" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_intersection</span>(</span>
<span id="cb148-8"><a href="treatment-unit-silvicultural-summary.html#cb148-8" tabindex="-1"></a>        stand_boundary <span class="sc">%&gt;%</span></span>
<span id="cb148-9"><a href="treatment-unit-silvicultural-summary.html#cb148-9" tabindex="-1"></a>          dplyr<span class="sc">::</span><span class="fu">select</span>(unit,block,tretmnt,unit_area_ha) <span class="sc">%&gt;%</span> </span>
<span id="cb148-10"><a href="treatment-unit-silvicultural-summary.html#cb148-10" tabindex="-1"></a>          dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">type =</span> tretmnt) <span class="sc">%&gt;%</span> </span>
<span id="cb148-11"><a href="treatment-unit-silvicultural-summary.html#cb148-11" tabindex="-1"></a>          dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb148-12"><a href="treatment-unit-silvicultural-summary.html#cb148-12" tabindex="-1"></a>            <span class="at">type =</span></span>
<span id="cb148-13"><a href="treatment-unit-silvicultural-summary.html#cb148-13" tabindex="-1"></a>              <span class="fu">tolower</span>(type) <span class="sc">%&gt;%</span> </span>
<span id="cb148-14"><a href="treatment-unit-silvicultural-summary.html#cb148-14" tabindex="-1"></a>              stringr<span class="sc">::</span><span class="fu">str_squish</span>()</span>
<span id="cb148-15"><a href="treatment-unit-silvicultural-summary.html#cb148-15" tabindex="-1"></a>          ) <span class="sc">%&gt;%</span> </span>
<span id="cb148-16"><a href="treatment-unit-silvicultural-summary.html#cb148-16" tabindex="-1"></a>          dplyr<span class="sc">::</span><span class="fu">rename_with</span>(<span class="at">.fn =</span> <span class="sc">~</span><span class="fu">paste0</span>(<span class="st">&quot;trtmnt_&quot;</span>, .x, <span class="at">recycle0 =</span> T))</span>
<span id="cb148-17"><a href="treatment-unit-silvicultural-summary.html#cb148-17" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb148-18"><a href="treatment-unit-silvicultural-summary.html#cb148-18" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb148-19"><a href="treatment-unit-silvicultural-summary.html#cb148-19" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(treeID, tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;trtmnt_&quot;</span>))</span>
<span id="cb148-20"><a href="treatment-unit-silvicultural-summary.html#cb148-20" tabindex="-1"></a>    , <span class="at">by =</span> <span class="st">&quot;treeID&quot;</span></span>
<span id="cb148-21"><a href="treatment-unit-silvicultural-summary.html#cb148-21" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb148-22"><a href="treatment-unit-silvicultural-summary.html#cb148-22" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb148-23"><a href="treatment-unit-silvicultural-summary.html#cb148-23" tabindex="-1"></a>    <span class="at">is_in_trtmnt_unit =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(trtmnt_type) <span class="sc">|</span> trtmnt_type<span class="sc">==</span><span class="st">&quot;control&quot;</span>,F,T)</span>
<span id="cb148-24"><a href="treatment-unit-silvicultural-summary.html#cb148-24" tabindex="-1"></a>    , dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="fu">c</span>(trtmnt_type,trtmnt_block,trtmnt_unit),ordered)</span>
<span id="cb148-25"><a href="treatment-unit-silvicultural-summary.html#cb148-25" tabindex="-1"></a>  )</span>
<span id="cb148-26"><a href="treatment-unit-silvicultural-summary.html#cb148-26" tabindex="-1"></a><span class="co"># treetops_sf %&gt;% dplyr::glimpse()</span></span></code></pre></div>
<p>use our slash pile mask to remove detected “trees” that are likely not trees. if a tree top point falls within the boundary of a detected pile footprint, it will be removed</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="treatment-unit-silvicultural-summary.html#cb149-1" tabindex="-1"></a><span class="co"># save nrow</span></span>
<span id="cb149-2"><a href="treatment-unit-silvicultural-summary.html#cb149-2" tabindex="-1"></a>nrow_temp <span class="ot">&lt;-</span> <span class="fu">nrow</span>(treetops_sf)</span>
<span id="cb149-3"><a href="treatment-unit-silvicultural-summary.html#cb149-3" tabindex="-1"></a>treetops_sf <span class="ot">&lt;-</span> </span>
<span id="cb149-4"><a href="treatment-unit-silvicultural-summary.html#cb149-4" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_filter</span>(</span>
<span id="cb149-5"><a href="treatment-unit-silvicultural-summary.html#cb149-5" tabindex="-1"></a>    treetops_sf</span>
<span id="cb149-6"><a href="treatment-unit-silvicultural-summary.html#cb149-6" tabindex="-1"></a>    , piles_workflow_ans <span class="sc">%&gt;%</span> </span>
<span id="cb149-7"><a href="treatment-unit-silvicultural-summary.html#cb149-7" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">filter</span>(is_in_trtmnt_unit, inrange_th_votes<span class="sc">&gt;=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb149-8"><a href="treatment-unit-silvicultural-summary.html#cb149-8" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_union</span>()</span>
<span id="cb149-9"><a href="treatment-unit-silvicultural-summary.html#cb149-9" tabindex="-1"></a>    , <span class="at">.predicate =</span> sf<span class="sc">::</span>st_disjoint</span>
<span id="cb149-10"><a href="treatment-unit-silvicultural-summary.html#cb149-10" tabindex="-1"></a>  )</span></code></pre></div>
<p>what proportion of “trees” were removed?</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="treatment-unit-silvicultural-summary.html#cb150-1" tabindex="-1"></a><span class="co"># nrow_temp</span></span>
<span id="cb150-2"><a href="treatment-unit-silvicultural-summary.html#cb150-2" tabindex="-1"></a><span class="co"># nrow(treetops_sf)</span></span>
<span id="cb150-3"><a href="treatment-unit-silvicultural-summary.html#cb150-3" tabindex="-1"></a>scales<span class="sc">::</span><span class="fu">percent</span>((nrow_temp<span class="sc">-</span><span class="fu">nrow</span>(treetops_sf))<span class="sc">/</span>nrow_temp, <span class="at">accuracy =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2.7%&quot;</code></pre>
<p>nice. now we’ll keep only trees that are at least 2 m in height since we included trees as small as 1.37 m in our <a href="processing.html#trees">tree detection</a></p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="treatment-unit-silvicultural-summary.html#cb152-1" tabindex="-1"></a>treetops_sf <span class="ot">&lt;-</span> treetops_sf <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(tree_height_m<span class="sc">&gt;=</span><span class="dv">2</span>)</span></code></pre></div>
<p>using our cleaned trees data, how many trees per treatment unit?</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="treatment-unit-silvicultural-summary.html#cb153-1" tabindex="-1"></a>treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb153-2"><a href="treatment-unit-silvicultural-summary.html#cb153-2" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb153-3"><a href="treatment-unit-silvicultural-summary.html#cb153-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(trtmnt_type, trtmnt_block, trtmnt_unit,trtmnt_unit_area_ha) <span class="sc">%&gt;%</span> </span>
<span id="cb153-4"><a href="treatment-unit-silvicultural-summary.html#cb153-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb153-5"><a href="treatment-unit-silvicultural-summary.html#cb153-5" tabindex="-1"></a>    <span class="at">trees_per_ha =</span> n<span class="sc">/</span>trtmnt_unit_area_ha</span>
<span id="cb153-6"><a href="treatment-unit-silvicultural-summary.html#cb153-6" tabindex="-1"></a>    , <span class="at">trtmnt_unit_area_ha =</span> scales<span class="sc">::</span><span class="fu">comma</span>(trtmnt_unit_area_ha,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb153-7"><a href="treatment-unit-silvicultural-summary.html#cb153-7" tabindex="-1"></a>    , <span class="at">n =</span> scales<span class="sc">::</span><span class="fu">comma</span>(n,<span class="at">accuracy=</span><span class="dv">1</span>)</span>
<span id="cb153-8"><a href="treatment-unit-silvicultural-summary.html#cb153-8" tabindex="-1"></a>    , <span class="at">trees_per_ha =</span> scales<span class="sc">::</span><span class="fu">comma</span>(trees_per_ha,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb153-9"><a href="treatment-unit-silvicultural-summary.html#cb153-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb153-10"><a href="treatment-unit-silvicultural-summary.html#cb153-10" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb153-11"><a href="treatment-unit-silvicultural-summary.html#cb153-11" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;count trees by treatment unit&quot;</span></span>
<span id="cb153-12"><a href="treatment-unit-silvicultural-summary.html#cb153-12" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb153-13"><a href="treatment-unit-silvicultural-summary.html#cb153-13" tabindex="-1"></a>      <span class="st">&quot;type&quot;</span>,<span class="st">&quot;block&quot;</span>,<span class="st">&quot;unit&quot;</span>,<span class="st">&quot;ha&quot;</span></span>
<span id="cb153-14"><a href="treatment-unit-silvicultural-summary.html#cb153-14" tabindex="-1"></a>      , <span class="st">&quot;# trees&quot;</span>, <span class="st">&quot;trees ha&lt;sup&gt;-1&lt;/sup&gt;&quot;</span></span>
<span id="cb153-15"><a href="treatment-unit-silvicultural-summary.html#cb153-15" tabindex="-1"></a>    )</span>
<span id="cb153-16"><a href="treatment-unit-silvicultural-summary.html#cb153-16" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb153-17"><a href="treatment-unit-silvicultural-summary.html#cb153-17" tabindex="-1"></a>    <span class="co"># , digits = 2</span></span>
<span id="cb153-18"><a href="treatment-unit-silvicultural-summary.html#cb153-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb153-19"><a href="treatment-unit-silvicultural-summary.html#cb153-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="fl">9.7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb153-20"><a href="treatment-unit-silvicultural-summary.html#cb153-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">column_spec</span>(<span class="fu">seq</span>(<span class="dv">4</span>,<span class="dv">6</span>,<span class="at">by=</span><span class="dv">2</span>), <span class="at">border_right =</span> <span class="cn">TRUE</span>, <span class="at">include_thead =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb153-21"><a href="treatment-unit-silvicultural-summary.html#cb153-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb153-22"><a href="treatment-unit-silvicultural-summary.html#cb153-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8.4in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8.4in; ">
<table class="table" style="font-size: 9.7px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-126">Table 4.1: </span>count trees by treatment unit
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
type
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
block
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
unit
</th>
<th style="text-align:left;border-right:1px solid;position: sticky; top:0; background-color: #FFFFFF;">
ha
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
# trees
</th>
<th style="text-align:left;border-right:1px solid;position: sticky; top:0; background-color: #FFFFFF;">
trees ha<sup>-1</sup>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
control
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U11
</td>
<td style="text-align:left;border-right:1px solid;">
11.5
</td>
<td style="text-align:left;">
9,614
</td>
<td style="text-align:left;border-right:1px solid;">
832.4
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U23
</td>
<td style="text-align:left;border-right:1px solid;">
10.3
</td>
<td style="text-align:left;">
10,443
</td>
<td style="text-align:left;border-right:1px solid;">
1,013.1
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U21
</td>
<td style="text-align:left;border-right:1px solid;">
8.1
</td>
<td style="text-align:left;">
8,410
</td>
<td style="text-align:left;border-right:1px solid;">
1,039.4
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U4
</td>
<td style="text-align:left;border-right:1px solid;">
6.7
</td>
<td style="text-align:left;">
6,417
</td>
<td style="text-align:left;border-right:1px solid;">
958.8
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U38
</td>
<td style="text-align:left;border-right:1px solid;">
8.6
</td>
<td style="text-align:left;">
7,030
</td>
<td style="text-align:left;border-right:1px solid;">
817.8
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U30
</td>
<td style="text-align:left;border-right:1px solid;">
10.1
</td>
<td style="text-align:left;">
10,692
</td>
<td style="text-align:left;border-right:1px solid;">
1,055.2
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U46
</td>
<td style="text-align:left;border-right:1px solid;">
8.6
</td>
<td style="text-align:left;">
7,783
</td>
<td style="text-align:left;border-right:1px solid;">
910.0
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U31
</td>
<td style="text-align:left;border-right:1px solid;">
8.1
</td>
<td style="text-align:left;">
7,378
</td>
<td style="text-align:left;border-right:1px solid;">
912.4
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U54
</td>
<td style="text-align:left;border-right:1px solid;">
10.3
</td>
<td style="text-align:left;">
8,839
</td>
<td style="text-align:left;border-right:1px solid;">
854.1
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U42
</td>
<td style="text-align:left;border-right:1px solid;">
8.3
</td>
<td style="text-align:left;">
6,306
</td>
<td style="text-align:left;border-right:1px solid;">
755.6
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U48
</td>
<td style="text-align:left;border-right:1px solid;">
8.3
</td>
<td style="text-align:left;">
6,534
</td>
<td style="text-align:left;border-right:1px solid;">
789.5
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U34
</td>
<td style="text-align:left;border-right:1px solid;">
9.2
</td>
<td style="text-align:left;">
9,752
</td>
<td style="text-align:left;border-right:1px solid;">
1,055.5
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
heterogenous
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U40
</td>
<td style="text-align:left;border-right:1px solid;">
9.1
</td>
<td style="text-align:left;">
4,623
</td>
<td style="text-align:left;border-right:1px solid;">
506.8
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U16
</td>
<td style="text-align:left;border-right:1px solid;">
9.5
</td>
<td style="text-align:left;">
5,576
</td>
<td style="text-align:left;border-right:1px solid;">
586.6
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U26
</td>
<td style="text-align:left;border-right:1px solid;">
9.0
</td>
<td style="text-align:left;">
4,586
</td>
<td style="text-align:left;border-right:1px solid;">
511.3
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U36
</td>
<td style="text-align:left;border-right:1px solid;">
8.5
</td>
<td style="text-align:left;">
4,014
</td>
<td style="text-align:left;border-right:1px solid;">
472.0
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U39
</td>
<td style="text-align:left;border-right:1px solid;">
8.3
</td>
<td style="text-align:left;">
4,108
</td>
<td style="text-align:left;border-right:1px solid;">
494.3
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U29
</td>
<td style="text-align:left;border-right:1px solid;">
9.2
</td>
<td style="text-align:left;">
5,487
</td>
<td style="text-align:left;border-right:1px solid;">
598.2
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U44
</td>
<td style="text-align:left;border-right:1px solid;">
8.6
</td>
<td style="text-align:left;">
4,792
</td>
<td style="text-align:left;border-right:1px solid;">
556.9
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U2
</td>
<td style="text-align:left;border-right:1px solid;">
8.3
</td>
<td style="text-align:left;">
4,327
</td>
<td style="text-align:left;border-right:1px solid;">
522.2
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U53
</td>
<td style="text-align:left;border-right:1px solid;">
8.4
</td>
<td style="text-align:left;">
4,835
</td>
<td style="text-align:left;border-right:1px solid;">
573.0
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U41
</td>
<td style="text-align:left;border-right:1px solid;">
8.2
</td>
<td style="text-align:left;">
4,475
</td>
<td style="text-align:left;border-right:1px solid;">
545.7
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U43
</td>
<td style="text-align:left;border-right:1px solid;">
8.1
</td>
<td style="text-align:left;">
4,481
</td>
<td style="text-align:left;border-right:1px solid;">
550.9
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U55
</td>
<td style="text-align:left;border-right:1px solid;">
9.2
</td>
<td style="text-align:left;">
5,556
</td>
<td style="text-align:left;border-right:1px solid;">
603.6
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
uniform- high
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U10
</td>
<td style="text-align:left;border-right:1px solid;">
5.2
</td>
<td style="text-align:left;">
1,877
</td>
<td style="text-align:left;border-right:1px solid;">
362.7
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U19
</td>
<td style="text-align:left;border-right:1px solid;">
4.5
</td>
<td style="text-align:left;">
1,339
</td>
<td style="text-align:left;border-right:1px solid;">
298.1
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U18
</td>
<td style="text-align:left;border-right:1px solid;">
4.1
</td>
<td style="text-align:left;">
1,072
</td>
<td style="text-align:left;border-right:1px solid;">
261.0
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U27
</td>
<td style="text-align:left;border-right:1px solid;">
4.2
</td>
<td style="text-align:left;">
1,746
</td>
<td style="text-align:left;border-right:1px solid;">
419.3
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U37
</td>
<td style="text-align:left;border-right:1px solid;">
5.6
</td>
<td style="text-align:left;">
1,576
</td>
<td style="text-align:left;border-right:1px solid;">
280.3
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U28
</td>
<td style="text-align:left;border-right:1px solid;">
4.3
</td>
<td style="text-align:left;">
999
</td>
<td style="text-align:left;border-right:1px solid;">
232.8
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U45
</td>
<td style="text-align:left;border-right:1px solid;">
4.3
</td>
<td style="text-align:left;">
981
</td>
<td style="text-align:left;border-right:1px solid;">
228.3
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U33
</td>
<td style="text-align:left;border-right:1px solid;">
4.5
</td>
<td style="text-align:left;">
863
</td>
<td style="text-align:left;border-right:1px solid;">
192.4
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U52
</td>
<td style="text-align:left;border-right:1px solid;">
4.1
</td>
<td style="text-align:left;">
1,606
</td>
<td style="text-align:left;border-right:1px solid;">
391.6
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U35
</td>
<td style="text-align:left;border-right:1px solid;">
4.4
</td>
<td style="text-align:left;">
1,036
</td>
<td style="text-align:left;border-right:1px solid;">
233.5
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U49
</td>
<td style="text-align:left;border-right:1px solid;">
4.4
</td>
<td style="text-align:left;">
1,828
</td>
<td style="text-align:left;border-right:1px solid;">
416.2
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U32
</td>
<td style="text-align:left;border-right:1px solid;">
5.1
</td>
<td style="text-align:left;">
978
</td>
<td style="text-align:left;border-right:1px solid;">
193.6
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
uniform- low
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U10
</td>
<td style="text-align:left;border-right:1px solid;">
5.2
</td>
<td style="text-align:left;">
1,888
</td>
<td style="text-align:left;border-right:1px solid;">
364.8
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U19
</td>
<td style="text-align:left;border-right:1px solid;">
4.5
</td>
<td style="text-align:left;">
2,458
</td>
<td style="text-align:left;border-right:1px solid;">
547.2
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U18
</td>
<td style="text-align:left;border-right:1px solid;">
4.1
</td>
<td style="text-align:left;">
1,521
</td>
<td style="text-align:left;border-right:1px solid;">
370.4
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U27
</td>
<td style="text-align:left;border-right:1px solid;">
4.2
</td>
<td style="text-align:left;">
1,921
</td>
<td style="text-align:left;border-right:1px solid;">
461.3
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U37
</td>
<td style="text-align:left;border-right:1px solid;">
5.6
</td>
<td style="text-align:left;">
2,009
</td>
<td style="text-align:left;border-right:1px solid;">
357.3
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U28
</td>
<td style="text-align:left;border-right:1px solid;">
4.3
</td>
<td style="text-align:left;">
1,784
</td>
<td style="text-align:left;border-right:1px solid;">
415.7
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U45
</td>
<td style="text-align:left;border-right:1px solid;">
4.3
</td>
<td style="text-align:left;">
1,228
</td>
<td style="text-align:left;border-right:1px solid;">
285.8
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U33
</td>
<td style="text-align:left;border-right:1px solid;">
4.5
</td>
<td style="text-align:left;">
1,630
</td>
<td style="text-align:left;border-right:1px solid;">
363.4
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U52
</td>
<td style="text-align:left;border-right:1px solid;">
4.1
</td>
<td style="text-align:left;">
2,056
</td>
<td style="text-align:left;border-right:1px solid;">
501.4
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U35
</td>
<td style="text-align:left;border-right:1px solid;">
4.4
</td>
<td style="text-align:left;">
2,033
</td>
<td style="text-align:left;border-right:1px solid;">
458.3
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U49
</td>
<td style="text-align:left;border-right:1px solid;">
4.4
</td>
<td style="text-align:left;">
2,472
</td>
<td style="text-align:left;border-right:1px solid;">
562.9
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U32
</td>
<td style="text-align:left;border-right:1px solid;">
5.1
</td>
<td style="text-align:left;">
2,176
</td>
<td style="text-align:left;border-right:1px solid;">
430.8
</td>
</tr>
</tbody>
</table>
</div>
<p>where are these units in space?</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="treatment-unit-silvicultural-summary.html#cb154-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(</span>
<span id="cb154-2"><a href="treatment-unit-silvicultural-summary.html#cb154-2" tabindex="-1"></a>    <span class="at">data =</span> stand_boundary</span>
<span id="cb154-3"><a href="treatment-unit-silvicultural-summary.html#cb154-3" tabindex="-1"></a>    , ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">ordered</span>(block), <span class="at">fill =</span> <span class="fu">ordered</span>(<span class="fu">tolower</span>(tretmnt)))</span>
<span id="cb154-4"><a href="treatment-unit-silvicultural-summary.html#cb154-4" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb154-5"><a href="treatment-unit-silvicultural-summary.html#cb154-5" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb154-6"><a href="treatment-unit-silvicultural-summary.html#cb154-6" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb154-7"><a href="treatment-unit-silvicultural-summary.html#cb154-7" tabindex="-1"></a>  <span class="co"># ggplot2::scale_color_viridis_d(option = &quot;turbo&quot;) +</span></span>
<span id="cb154-8"><a href="treatment-unit-silvicultural-summary.html#cb154-8" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(</span>
<span id="cb154-9"><a href="treatment-unit-silvicultural-summary.html#cb154-9" tabindex="-1"></a>    <span class="at">values =</span> viridis<span class="sc">::</span><span class="fu">turbo</span>(<span class="at">n =</span> <span class="fu">length</span>(<span class="fu">unique</span>(stand_boundary<span class="sc">$</span>block))) <span class="sc">%&gt;%</span> <span class="fu">sample</span>()</span>
<span id="cb154-10"><a href="treatment-unit-silvicultural-summary.html#cb154-10" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb154-11"><a href="treatment-unit-silvicultural-summary.html#cb154-11" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;treatment</span><span class="sc">\n</span><span class="st">type&quot;</span>, <span class="at">color =</span> <span class="st">&quot;treatment</span><span class="sc">\n</span><span class="st">block&quot;</span>) <span class="sc">+</span></span>
<span id="cb154-12"><a href="treatment-unit-silvicultural-summary.html#cb154-12" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb154-13"><a href="treatment-unit-silvicultural-summary.html#cb154-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">guides</span>(</span>
<span id="cb154-14"><a href="treatment-unit-silvicultural-summary.html#cb154-14" tabindex="-1"></a>    <span class="at">fill =</span> ggplot2<span class="sc">::</span><span class="fu">guide_legend</span>(</span>
<span id="cb154-15"><a href="treatment-unit-silvicultural-summary.html#cb154-15" tabindex="-1"></a>      <span class="at">override.aes =</span> <span class="fu">list</span>(</span>
<span id="cb154-16"><a href="treatment-unit-silvicultural-summary.html#cb154-16" tabindex="-1"></a>        <span class="at">color =</span> <span class="cn">NA</span>, <span class="at">shape =</span> <span class="dv">15</span>, <span class="at">linetype =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">alpha =</span> <span class="dv">1</span></span>
<span id="cb154-17"><a href="treatment-unit-silvicultural-summary.html#cb154-17" tabindex="-1"></a>      )</span>
<span id="cb154-18"><a href="treatment-unit-silvicultural-summary.html#cb154-18" tabindex="-1"></a>    )</span>
<span id="cb154-19"><a href="treatment-unit-silvicultural-summary.html#cb154-19" tabindex="-1"></a>    , <span class="at">color =</span> ggplot2<span class="sc">::</span><span class="fu">guide_legend</span>(</span>
<span id="cb154-20"><a href="treatment-unit-silvicultural-summary.html#cb154-20" tabindex="-1"></a>      <span class="at">override.aes =</span> <span class="fu">list</span>(</span>
<span id="cb154-21"><a href="treatment-unit-silvicultural-summary.html#cb154-21" tabindex="-1"></a>        <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">shape =</span> <span class="dv">15</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">alpha =</span> <span class="dv">1</span></span>
<span id="cb154-22"><a href="treatment-unit-silvicultural-summary.html#cb154-22" tabindex="-1"></a>      )</span>
<span id="cb154-23"><a href="treatment-unit-silvicultural-summary.html#cb154-23" tabindex="-1"></a>    )</span>
<span id="cb154-24"><a href="treatment-unit-silvicultural-summary.html#cb154-24" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-127-1.png" alt="" width="1008" /></p>
</div>
<div id="function-to-calculate-silviclutural-metrics" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Function to Calculate Silviclutural Metrics<a href="treatment-unit-silvicultural-summary.html#function-to-calculate-silviclutural-metrics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>let’s make a function to summarize the data and create common silvicultural metrics within our stand boundary</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="treatment-unit-silvicultural-summary.html#cb155-1" tabindex="-1"></a><span class="do">###################################################################################</span></span>
<span id="cb155-2"><a href="treatment-unit-silvicultural-summary.html#cb155-2" tabindex="-1"></a><span class="co"># define a function to convert columns in data frame from metric to imperial</span></span>
<span id="cb155-3"><a href="treatment-unit-silvicultural-summary.html#cb155-3" tabindex="-1"></a><span class="co"># see: </span></span>
<span id="cb155-4"><a href="treatment-unit-silvicultural-summary.html#cb155-4" tabindex="-1"></a><span class="co"># https://www.forestnb.com/archives/forest-nb-news/resources/conversions/</span></span>
<span id="cb155-5"><a href="treatment-unit-silvicultural-summary.html#cb155-5" tabindex="-1"></a><span class="co"># https://www.ars.usda.gov/is/np/agbyproducts/agbyappendix.pdf</span></span>
<span id="cb155-6"><a href="treatment-unit-silvicultural-summary.html#cb155-6" tabindex="-1"></a><span class="do">###################################################################################</span></span>
<span id="cb155-7"><a href="treatment-unit-silvicultural-summary.html#cb155-7" tabindex="-1"></a>calc_imperial_units_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb155-8"><a href="treatment-unit-silvicultural-summary.html#cb155-8" tabindex="-1"></a>  df <span class="sc">%&gt;%</span> </span>
<span id="cb155-9"><a href="treatment-unit-silvicultural-summary.html#cb155-9" tabindex="-1"></a>  <span class="co"># convert to imperial units</span></span>
<span id="cb155-10"><a href="treatment-unit-silvicultural-summary.html#cb155-10" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb155-11"><a href="treatment-unit-silvicultural-summary.html#cb155-11" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb155-12"><a href="treatment-unit-silvicultural-summary.html#cb155-12" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_cm&quot;</span>)</span>
<span id="cb155-13"><a href="treatment-unit-silvicultural-summary.html#cb155-13" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">0.394</span></span>
<span id="cb155-14"><a href="treatment-unit-silvicultural-summary.html#cb155-14" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_in&quot;</span></span>
<span id="cb155-15"><a href="treatment-unit-silvicultural-summary.html#cb155-15" tabindex="-1"></a>      )</span>
<span id="cb155-16"><a href="treatment-unit-silvicultural-summary.html#cb155-16" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb155-17"><a href="treatment-unit-silvicultural-summary.html#cb155-17" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_m&quot;</span>)</span>
<span id="cb155-18"><a href="treatment-unit-silvicultural-summary.html#cb155-18" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">3.281</span></span>
<span id="cb155-19"><a href="treatment-unit-silvicultural-summary.html#cb155-19" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_ft&quot;</span></span>
<span id="cb155-20"><a href="treatment-unit-silvicultural-summary.html#cb155-20" tabindex="-1"></a>      )</span>
<span id="cb155-21"><a href="treatment-unit-silvicultural-summary.html#cb155-21" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb155-22"><a href="treatment-unit-silvicultural-summary.html#cb155-22" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_m2_per_ha&quot;</span>)</span>
<span id="cb155-23"><a href="treatment-unit-silvicultural-summary.html#cb155-23" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">4.359</span></span>
<span id="cb155-24"><a href="treatment-unit-silvicultural-summary.html#cb155-24" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_ftac&quot;</span></span>
<span id="cb155-25"><a href="treatment-unit-silvicultural-summary.html#cb155-25" tabindex="-1"></a>      )</span>
<span id="cb155-26"><a href="treatment-unit-silvicultural-summary.html#cb155-26" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb155-27"><a href="treatment-unit-silvicultural-summary.html#cb155-27" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_kg_per_ha&quot;</span>)</span>
<span id="cb155-28"><a href="treatment-unit-silvicultural-summary.html#cb155-28" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">0.892178</span></span>
<span id="cb155-29"><a href="treatment-unit-silvicultural-summary.html#cb155-29" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_lbsac&quot;</span></span>
<span id="cb155-30"><a href="treatment-unit-silvicultural-summary.html#cb155-30" tabindex="-1"></a>      )</span>
<span id="cb155-31"><a href="treatment-unit-silvicultural-summary.html#cb155-31" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb155-32"><a href="treatment-unit-silvicultural-summary.html#cb155-32" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_per_ha&quot;</span>) <span class="sc">&amp;</span> </span>
<span id="cb155-33"><a href="treatment-unit-silvicultural-summary.html#cb155-33" tabindex="-1"></a>          <span class="sc">!</span>tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_m2_per_ha&quot;</span>) <span class="sc">&amp;</span> </span>
<span id="cb155-34"><a href="treatment-unit-silvicultural-summary.html#cb155-34" tabindex="-1"></a>          <span class="sc">!</span>tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_kg_per_ha&quot;</span>)</span>
<span id="cb155-35"><a href="treatment-unit-silvicultural-summary.html#cb155-35" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">0.405</span></span>
<span id="cb155-36"><a href="treatment-unit-silvicultural-summary.html#cb155-36" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_ac&quot;</span></span>
<span id="cb155-37"><a href="treatment-unit-silvicultural-summary.html#cb155-37" tabindex="-1"></a>      )</span>
<span id="cb155-38"><a href="treatment-unit-silvicultural-summary.html#cb155-38" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb155-39"><a href="treatment-unit-silvicultural-summary.html#cb155-39" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_area_ha&quot;</span>)</span>
<span id="cb155-40"><a href="treatment-unit-silvicultural-summary.html#cb155-40" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">2.471</span></span>
<span id="cb155-41"><a href="treatment-unit-silvicultural-summary.html#cb155-41" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_ac&quot;</span></span>
<span id="cb155-42"><a href="treatment-unit-silvicultural-summary.html#cb155-42" tabindex="-1"></a>      )</span>
<span id="cb155-43"><a href="treatment-unit-silvicultural-summary.html#cb155-43" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb155-44"><a href="treatment-unit-silvicultural-summary.html#cb155-44" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;kg_per_m2&quot;</span>)</span>
<span id="cb155-45"><a href="treatment-unit-silvicultural-summary.html#cb155-45" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">0.20482</span></span>
<span id="cb155-46"><a href="treatment-unit-silvicultural-summary.html#cb155-46" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_lbsft2&quot;</span></span>
<span id="cb155-47"><a href="treatment-unit-silvicultural-summary.html#cb155-47" tabindex="-1"></a>      )</span>
<span id="cb155-48"><a href="treatment-unit-silvicultural-summary.html#cb155-48" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb155-49"><a href="treatment-unit-silvicultural-summary.html#cb155-49" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;kg_per_m3&quot;</span>)</span>
<span id="cb155-50"><a href="treatment-unit-silvicultural-summary.html#cb155-50" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">0.0624</span></span>
<span id="cb155-51"><a href="treatment-unit-silvicultural-summary.html#cb155-51" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_lbsft3&quot;</span></span>
<span id="cb155-52"><a href="treatment-unit-silvicultural-summary.html#cb155-52" tabindex="-1"></a>      )</span>
<span id="cb155-53"><a href="treatment-unit-silvicultural-summary.html#cb155-53" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb155-54"><a href="treatment-unit-silvicultural-summary.html#cb155-54" tabindex="-1"></a>        <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_m2&quot;</span>) <span class="sc">&amp;</span> <span class="sc">!</span>tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;per_m2&quot;</span>)</span>
<span id="cb155-55"><a href="treatment-unit-silvicultural-summary.html#cb155-55" tabindex="-1"></a>        , <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">10.764</span></span>
<span id="cb155-56"><a href="treatment-unit-silvicultural-summary.html#cb155-56" tabindex="-1"></a>        , <span class="at">.names =</span> <span class="st">&quot;{.col}_ft2&quot;</span></span>
<span id="cb155-57"><a href="treatment-unit-silvicultural-summary.html#cb155-57" tabindex="-1"></a>      )</span>
<span id="cb155-58"><a href="treatment-unit-silvicultural-summary.html#cb155-58" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb155-59"><a href="treatment-unit-silvicultural-summary.html#cb155-59" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename_with</span>(</span>
<span id="cb155-60"><a href="treatment-unit-silvicultural-summary.html#cb155-60" tabindex="-1"></a>      <span class="at">.fn =</span> <span class="cf">function</span>(x){dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb155-61"><a href="treatment-unit-silvicultural-summary.html#cb155-61" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_cm_in&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_cm_in&quot;</span>,<span class="st">&quot;_in&quot;</span>)</span>
<span id="cb155-62"><a href="treatment-unit-silvicultural-summary.html#cb155-62" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_m_ft&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_m_ft&quot;</span>,<span class="st">&quot;_ft&quot;</span>)</span>
<span id="cb155-63"><a href="treatment-unit-silvicultural-summary.html#cb155-63" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_m2_per_ha_ftac&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_m2_per_ha_ftac&quot;</span>,<span class="st">&quot;_ft2_per_ac&quot;</span>)</span>
<span id="cb155-64"><a href="treatment-unit-silvicultural-summary.html#cb155-64" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_kg_per_ha_lbsac&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_kg_per_ha_lbsac&quot;</span>,<span class="st">&quot;_lbs_per_ac&quot;</span>)</span>
<span id="cb155-65"><a href="treatment-unit-silvicultural-summary.html#cb155-65" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_per_ha_ac&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_per_ha_ac&quot;</span>,<span class="st">&quot;_per_ac&quot;</span>)</span>
<span id="cb155-66"><a href="treatment-unit-silvicultural-summary.html#cb155-66" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_area_ha_ac&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_area_ha_ac&quot;</span>,<span class="st">&quot;_area_ac&quot;</span>)</span>
<span id="cb155-67"><a href="treatment-unit-silvicultural-summary.html#cb155-67" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_kg_per_m2_lbsft2&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_kg_per_m2_lbsft2&quot;</span>,<span class="st">&quot;_lbs_per_ft2&quot;</span>)</span>
<span id="cb155-68"><a href="treatment-unit-silvicultural-summary.html#cb155-68" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_kg_per_m3_lbsft3&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_kg_per_m3_lbsft3&quot;</span>,<span class="st">&quot;_lbs_per_ft3&quot;</span>)</span>
<span id="cb155-69"><a href="treatment-unit-silvicultural-summary.html#cb155-69" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_ends</span>(x,<span class="st">&quot;_m2_ft2&quot;</span>) <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(x,<span class="st">&quot;_m2_ft2&quot;</span>,<span class="st">&quot;_ft2&quot;</span>)</span>
<span id="cb155-70"><a href="treatment-unit-silvicultural-summary.html#cb155-70" tabindex="-1"></a>        , <span class="cn">TRUE</span> <span class="sc">~</span> x</span>
<span id="cb155-71"><a href="treatment-unit-silvicultural-summary.html#cb155-71" tabindex="-1"></a>      )}</span>
<span id="cb155-72"><a href="treatment-unit-silvicultural-summary.html#cb155-72" tabindex="-1"></a>    )</span>
<span id="cb155-73"><a href="treatment-unit-silvicultural-summary.html#cb155-73" tabindex="-1"></a>}</span>
<span id="cb155-74"><a href="treatment-unit-silvicultural-summary.html#cb155-74" tabindex="-1"></a></span>
<span id="cb155-75"><a href="treatment-unit-silvicultural-summary.html#cb155-75" tabindex="-1"></a><span class="do">###################################################################################</span></span>
<span id="cb155-76"><a href="treatment-unit-silvicultural-summary.html#cb155-76" tabindex="-1"></a><span class="do">### stand-level summaries</span></span>
<span id="cb155-77"><a href="treatment-unit-silvicultural-summary.html#cb155-77" tabindex="-1"></a><span class="do">###################################################################################</span></span>
<span id="cb155-78"><a href="treatment-unit-silvicultural-summary.html#cb155-78" tabindex="-1"></a>calc_silv_metrics <span class="ot">&lt;-</span> <span class="cf">function</span>(tree_list, <span class="at">stand_area_ha =</span> <span class="cn">NULL</span>, <span class="at">study_boundary =</span> <span class="cn">NULL</span>, <span class="at">calc_imperial_units =</span> F) {</span>
<span id="cb155-79"><a href="treatment-unit-silvicultural-summary.html#cb155-79" tabindex="-1"></a>  <span class="co"># get study area</span></span>
<span id="cb155-80"><a href="treatment-unit-silvicultural-summary.html#cb155-80" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(study_boundary)){</span>
<span id="cb155-81"><a href="treatment-unit-silvicultural-summary.html#cb155-81" tabindex="-1"></a>    <span class="co"># bounds check</span></span>
<span id="cb155-82"><a href="treatment-unit-silvicultural-summary.html#cb155-82" tabindex="-1"></a>    <span class="cf">if</span>(</span>
<span id="cb155-83"><a href="treatment-unit-silvicultural-summary.html#cb155-83" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">inherits</span>(study_boundary,<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb155-84"><a href="treatment-unit-silvicultural-summary.html#cb155-84" tabindex="-1"></a>      <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">inherits</span>(study_boundary,<span class="st">&quot;sfc&quot;</span>)</span>
<span id="cb155-85"><a href="treatment-unit-silvicultural-summary.html#cb155-85" tabindex="-1"></a>    ){<span class="fu">stop</span>(<span class="st">&quot;study_boundary must be sf class object&quot;</span>)}</span>
<span id="cb155-86"><a href="treatment-unit-silvicultural-summary.html#cb155-86" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.na</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(study_boundary))){<span class="fu">stop</span>(<span class="st">&quot;study_boundary does not have a CRS&quot;</span>)}</span>
<span id="cb155-87"><a href="treatment-unit-silvicultural-summary.html#cb155-87" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">inherits</span>(study_boundary,<span class="st">&quot;sf&quot;</span>) <span class="sc">&amp;&amp;</span> <span class="fu">nrow</span>(study_boundary)<span class="sc">!=</span><span class="dv">1</span>){</span>
<span id="cb155-88"><a href="treatment-unit-silvicultural-summary.html#cb155-88" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">&quot;study_boundary must only have a single record geometry&quot;</span>)</span>
<span id="cb155-89"><a href="treatment-unit-silvicultural-summary.html#cb155-89" tabindex="-1"></a>    }</span>
<span id="cb155-90"><a href="treatment-unit-silvicultural-summary.html#cb155-90" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">inherits</span>(study_boundary,<span class="st">&quot;sfc&quot;</span>) <span class="sc">&amp;&amp;</span> <span class="fu">length</span>(study_boundary)<span class="sc">!=</span><span class="dv">1</span>){</span>
<span id="cb155-91"><a href="treatment-unit-silvicultural-summary.html#cb155-91" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">&quot;study_boundary must only have a single record geometry&quot;</span>)</span>
<span id="cb155-92"><a href="treatment-unit-silvicultural-summary.html#cb155-92" tabindex="-1"></a>    }</span>
<span id="cb155-93"><a href="treatment-unit-silvicultural-summary.html#cb155-93" tabindex="-1"></a>    <span class="cf">if</span>(</span>
<span id="cb155-94"><a href="treatment-unit-silvicultural-summary.html#cb155-94" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">all</span>( sf<span class="sc">::</span><span class="fu">st_is</span>(study_boundary, <span class="fu">c</span>(<span class="st">&quot;POLYGON&quot;</span>,<span class="st">&quot;MULTIPOLYGON&quot;</span>)) )</span>
<span id="cb155-95"><a href="treatment-unit-silvicultural-summary.html#cb155-95" tabindex="-1"></a>    ){</span>
<span id="cb155-96"><a href="treatment-unit-silvicultural-summary.html#cb155-96" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">&quot;study_boundary must contain POLYGON type geometry only&quot;</span>)</span>
<span id="cb155-97"><a href="treatment-unit-silvicultural-summary.html#cb155-97" tabindex="-1"></a>    }</span>
<span id="cb155-98"><a href="treatment-unit-silvicultural-summary.html#cb155-98" tabindex="-1"></a>    <span class="co"># area</span></span>
<span id="cb155-99"><a href="treatment-unit-silvicultural-summary.html#cb155-99" tabindex="-1"></a>    xxstand_area_ha <span class="ot">&lt;-</span> study_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb155-100"><a href="treatment-unit-silvicultural-summary.html#cb155-100" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_area</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb155-101"><a href="treatment-unit-silvicultural-summary.html#cb155-101" tabindex="-1"></a>      <span class="fu">as.numeric</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb155-102"><a href="treatment-unit-silvicultural-summary.html#cb155-102" tabindex="-1"></a>      <span class="st">`</span><span class="at">/</span><span class="st">`</span>(<span class="dv">10000</span>)</span>
<span id="cb155-103"><a href="treatment-unit-silvicultural-summary.html#cb155-103" tabindex="-1"></a>  }<span class="cf">else</span> <span class="cf">if</span>(<span class="fu">is.numeric</span>(stand_area_ha)){</span>
<span id="cb155-104"><a href="treatment-unit-silvicultural-summary.html#cb155-104" tabindex="-1"></a>    xxstand_area_ha <span class="ot">&lt;-</span> stand_area_ha[<span class="dv">1</span>]</span>
<span id="cb155-105"><a href="treatment-unit-silvicultural-summary.html#cb155-105" tabindex="-1"></a>  }<span class="cf">else</span>{</span>
<span id="cb155-106"><a href="treatment-unit-silvicultural-summary.html#cb155-106" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;must provide `stand_area_ha` as numeric or `study_boundary` as sf object&quot;</span>)</span>
<span id="cb155-107"><a href="treatment-unit-silvicultural-summary.html#cb155-107" tabindex="-1"></a>  }</span>
<span id="cb155-108"><a href="treatment-unit-silvicultural-summary.html#cb155-108" tabindex="-1"></a>  </span>
<span id="cb155-109"><a href="treatment-unit-silvicultural-summary.html#cb155-109" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.null</span>(xxstand_area_ha) <span class="sc">||</span> <span class="fu">is.na</span>(xxstand_area_ha) <span class="sc">||</span> dplyr<span class="sc">::</span><span class="fu">coalesce</span>(xxstand_area_ha,<span class="dv">0</span>)<span class="sc">&lt;=</span><span class="dv">0</span>){</span>
<span id="cb155-110"><a href="treatment-unit-silvicultural-summary.html#cb155-110" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;could not determine valid stand_area_ha&quot;</span>)</span>
<span id="cb155-111"><a href="treatment-unit-silvicultural-summary.html#cb155-111" tabindex="-1"></a>  }</span>
<span id="cb155-112"><a href="treatment-unit-silvicultural-summary.html#cb155-112" tabindex="-1"></a>  </span>
<span id="cb155-113"><a href="treatment-unit-silvicultural-summary.html#cb155-113" tabindex="-1"></a>  <span class="co"># summarize tree list</span></span>
<span id="cb155-114"><a href="treatment-unit-silvicultural-summary.html#cb155-114" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">inherits</span>(tree_list,<span class="st">&quot;data.frame&quot;</span>)){<span class="fu">stop</span>(<span class="st">&quot;tree_list must be data.frame class object&quot;</span>)}</span>
<span id="cb155-115"><a href="treatment-unit-silvicultural-summary.html#cb155-115" tabindex="-1"></a>  </span>
<span id="cb155-116"><a href="treatment-unit-silvicultural-summary.html#cb155-116" tabindex="-1"></a>  <span class="do">###### !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! NEED TO PUT IN CHECKS FOR COLUMNS USED</span></span>
<span id="cb155-117"><a href="treatment-unit-silvicultural-summary.html#cb155-117" tabindex="-1"></a>  <span class="co"># see: cloud2trees::check_df_cols_all_missing()</span></span>
<span id="cb155-118"><a href="treatment-unit-silvicultural-summary.html#cb155-118" tabindex="-1"></a>  <span class="cf">if</span>( <span class="sc">!</span><span class="fu">any</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="fu">names</span>(tree_list), <span class="st">&quot;landfire_crown_biomass_kg&quot;</span>)) ){</span>
<span id="cb155-119"><a href="treatment-unit-silvicultural-summary.html#cb155-119" tabindex="-1"></a>    tree_list <span class="ot">&lt;-</span> tree_list <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">landfire_crown_biomass_kg=</span><span class="fu">as.numeric</span>(<span class="cn">NA</span>))</span>
<span id="cb155-120"><a href="treatment-unit-silvicultural-summary.html#cb155-120" tabindex="-1"></a>  }</span>
<span id="cb155-121"><a href="treatment-unit-silvicultural-summary.html#cb155-121" tabindex="-1"></a>  <span class="cf">if</span>( <span class="sc">!</span><span class="fu">any</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="fu">names</span>(tree_list), <span class="st">&quot;cruz_crown_biomass_kg&quot;</span>)) ){</span>
<span id="cb155-122"><a href="treatment-unit-silvicultural-summary.html#cb155-122" tabindex="-1"></a>    tree_list <span class="ot">&lt;-</span> tree_list <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">cruz_crown_biomass_kg=</span><span class="fu">as.numeric</span>(<span class="cn">NA</span>))</span>
<span id="cb155-123"><a href="treatment-unit-silvicultural-summary.html#cb155-123" tabindex="-1"></a>  }</span>
<span id="cb155-124"><a href="treatment-unit-silvicultural-summary.html#cb155-124" tabindex="-1"></a>  <span class="cf">if</span>( <span class="sc">!</span><span class="fu">any</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="fu">names</span>(tree_list), <span class="st">&quot;landfire_tree_kg_per_m3&quot;</span>)) ){</span>
<span id="cb155-125"><a href="treatment-unit-silvicultural-summary.html#cb155-125" tabindex="-1"></a>    tree_list <span class="ot">&lt;-</span> tree_list <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">landfire_tree_kg_per_m3=</span><span class="fu">as.numeric</span>(<span class="cn">NA</span>))</span>
<span id="cb155-126"><a href="treatment-unit-silvicultural-summary.html#cb155-126" tabindex="-1"></a>  }</span>
<span id="cb155-127"><a href="treatment-unit-silvicultural-summary.html#cb155-127" tabindex="-1"></a>  <span class="cf">if</span>( <span class="sc">!</span><span class="fu">any</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="fu">names</span>(tree_list), <span class="st">&quot;cruz_tree_kg_per_m3&quot;</span>)) ){</span>
<span id="cb155-128"><a href="treatment-unit-silvicultural-summary.html#cb155-128" tabindex="-1"></a>    tree_list <span class="ot">&lt;-</span> tree_list <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">cruz_tree_kg_per_m3=</span><span class="fu">as.numeric</span>(<span class="cn">NA</span>))</span>
<span id="cb155-129"><a href="treatment-unit-silvicultural-summary.html#cb155-129" tabindex="-1"></a>  }</span>
<span id="cb155-130"><a href="treatment-unit-silvicultural-summary.html#cb155-130" tabindex="-1"></a>  </span>
<span id="cb155-131"><a href="treatment-unit-silvicultural-summary.html#cb155-131" tabindex="-1"></a>  <span class="co"># agg</span></span>
<span id="cb155-132"><a href="treatment-unit-silvicultural-summary.html#cb155-132" tabindex="-1"></a>  agg <span class="ot">&lt;-</span> tree_list <span class="sc">%&gt;%</span></span>
<span id="cb155-133"><a href="treatment-unit-silvicultural-summary.html#cb155-133" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb155-134"><a href="treatment-unit-silvicultural-summary.html#cb155-134" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb155-135"><a href="treatment-unit-silvicultural-summary.html#cb155-135" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb155-136"><a href="treatment-unit-silvicultural-summary.html#cb155-136" tabindex="-1"></a>      <span class="at">n_trees =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()</span>
<span id="cb155-137"><a href="treatment-unit-silvicultural-summary.html#cb155-137" tabindex="-1"></a>      , <span class="at">mean_dbh_cm =</span> <span class="fu">mean</span>(dbh_cm, <span class="at">na.rm =</span> T)</span>
<span id="cb155-138"><a href="treatment-unit-silvicultural-summary.html#cb155-138" tabindex="-1"></a>      , <span class="at">mean_tree_height_m =</span> <span class="fu">mean</span>(tree_height_m, <span class="at">na.rm =</span> T)</span>
<span id="cb155-139"><a href="treatment-unit-silvicultural-summary.html#cb155-139" tabindex="-1"></a>      , <span class="at">mean_tree_cbh_m =</span> <span class="fu">mean</span>(tree_cbh_m, <span class="at">na.rm =</span> T)</span>
<span id="cb155-140"><a href="treatment-unit-silvicultural-summary.html#cb155-140" tabindex="-1"></a>      , <span class="at">loreys_height_m =</span> <span class="fu">sum</span>(basal_area_m2<span class="sc">*</span>tree_height_m, <span class="at">na.rm =</span> T) <span class="sc">/</span> <span class="fu">sum</span>(basal_area_m2, <span class="at">na.rm =</span> T)</span>
<span id="cb155-141"><a href="treatment-unit-silvicultural-summary.html#cb155-141" tabindex="-1"></a>      , <span class="at">basal_area_m2 =</span> <span class="fu">sum</span>(basal_area_m2, <span class="at">na.rm =</span> T)</span>
<span id="cb155-142"><a href="treatment-unit-silvicultural-summary.html#cb155-142" tabindex="-1"></a>      , <span class="at">sum_dbh_cm_sq =</span> <span class="fu">sum</span>(dbh_cm<span class="sc">^</span><span class="dv">2</span>, <span class="at">na.rm =</span> T)</span>
<span id="cb155-143"><a href="treatment-unit-silvicultural-summary.html#cb155-143" tabindex="-1"></a>      , <span class="at">landfire_crown_biomass_kg =</span> <span class="fu">sum</span>(landfire_crown_biomass_kg, <span class="at">na.rm =</span> F)</span>
<span id="cb155-144"><a href="treatment-unit-silvicultural-summary.html#cb155-144" tabindex="-1"></a>      , <span class="at">cruz_crown_biomass_kg =</span> <span class="fu">sum</span>(cruz_crown_biomass_kg, <span class="at">na.rm =</span> F)</span>
<span id="cb155-145"><a href="treatment-unit-silvicultural-summary.html#cb155-145" tabindex="-1"></a>      , <span class="at">mean_landfire_tree_kg_per_m3 =</span> <span class="fu">mean</span>(landfire_tree_kg_per_m3, <span class="at">na.rm =</span> T)</span>
<span id="cb155-146"><a href="treatment-unit-silvicultural-summary.html#cb155-146" tabindex="-1"></a>      , <span class="at">mean_cruz_tree_kg_per_m3 =</span> <span class="fu">mean</span>(cruz_tree_kg_per_m3, <span class="at">na.rm =</span> T)</span>
<span id="cb155-147"><a href="treatment-unit-silvicultural-summary.html#cb155-147" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb155-148"><a href="treatment-unit-silvicultural-summary.html#cb155-148" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb155-149"><a href="treatment-unit-silvicultural-summary.html#cb155-149" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb155-150"><a href="treatment-unit-silvicultural-summary.html#cb155-150" tabindex="-1"></a>      <span class="at">stand_area_ha =</span> xxstand_area_ha</span>
<span id="cb155-151"><a href="treatment-unit-silvicultural-summary.html#cb155-151" tabindex="-1"></a>      , <span class="at">trees_per_ha =</span> (n_trees<span class="sc">/</span>stand_area_ha)</span>
<span id="cb155-152"><a href="treatment-unit-silvicultural-summary.html#cb155-152" tabindex="-1"></a>      , <span class="at">basal_area_m2_per_ha =</span> (basal_area_m2<span class="sc">/</span>stand_area_ha)</span>
<span id="cb155-153"><a href="treatment-unit-silvicultural-summary.html#cb155-153" tabindex="-1"></a>      , <span class="at">qmd_cm =</span> <span class="fu">sqrt</span>(sum_dbh_cm_sq<span class="sc">/</span>n_trees)</span>
<span id="cb155-154"><a href="treatment-unit-silvicultural-summary.html#cb155-154" tabindex="-1"></a>      , <span class="at">landfire_cfl_kg_per_m2 =</span> landfire_crown_biomass_kg<span class="sc">/</span>(stand_area_ha<span class="sc">*</span><span class="dv">10000</span>)</span>
<span id="cb155-155"><a href="treatment-unit-silvicultural-summary.html#cb155-155" tabindex="-1"></a>      , <span class="at">cruz_cfl_kg_per_m2 =</span> cruz_crown_biomass_kg<span class="sc">/</span>(stand_area_ha<span class="sc">*</span><span class="dv">10000</span>)</span>
<span id="cb155-156"><a href="treatment-unit-silvicultural-summary.html#cb155-156" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb155-157"><a href="treatment-unit-silvicultural-summary.html#cb155-157" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(sum_dbh_cm_sq,landfire_crown_biomass_kg,cruz_crown_biomass_kg))</span>
<span id="cb155-158"><a href="treatment-unit-silvicultural-summary.html#cb155-158" tabindex="-1"></a>  <span class="co"># imperial</span></span>
<span id="cb155-159"><a href="treatment-unit-silvicultural-summary.html#cb155-159" tabindex="-1"></a>  <span class="cf">if</span>(calc_imperial_units){</span>
<span id="cb155-160"><a href="treatment-unit-silvicultural-summary.html#cb155-160" tabindex="-1"></a>    agg <span class="ot">&lt;-</span> <span class="fu">calc_imperial_units_fn</span>(agg)</span>
<span id="cb155-161"><a href="treatment-unit-silvicultural-summary.html#cb155-161" tabindex="-1"></a>  }</span>
<span id="cb155-162"><a href="treatment-unit-silvicultural-summary.html#cb155-162" tabindex="-1"></a>  <span class="fu">return</span>(agg)</span>
<span id="cb155-163"><a href="treatment-unit-silvicultural-summary.html#cb155-163" tabindex="-1"></a>}</span></code></pre></div>
<p>check out the data structure returned by the <code>calc_silv_metrics()</code> function</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="treatment-unit-silvicultural-summary.html#cb156-1" tabindex="-1"></a><span class="fu">calc_silv_metrics</span>(</span>
<span id="cb156-2"><a href="treatment-unit-silvicultural-summary.html#cb156-2" tabindex="-1"></a>    <span class="at">tree_list =</span> treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb156-3"><a href="treatment-unit-silvicultural-summary.html#cb156-3" tabindex="-1"></a>      <span class="co"># just get one unit</span></span>
<span id="cb156-4"><a href="treatment-unit-silvicultural-summary.html#cb156-4" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb156-5"><a href="treatment-unit-silvicultural-summary.html#cb156-5" tabindex="-1"></a>        trtmnt_type<span class="sc">==</span>treetops_sf<span class="sc">$</span>trtmnt_type[<span class="dv">1</span>]</span>
<span id="cb156-6"><a href="treatment-unit-silvicultural-summary.html#cb156-6" tabindex="-1"></a>        , trtmnt_block<span class="sc">==</span>treetops_sf<span class="sc">$</span>trtmnt_block[<span class="dv">1</span>]</span>
<span id="cb156-7"><a href="treatment-unit-silvicultural-summary.html#cb156-7" tabindex="-1"></a>        , trtmnt_unit<span class="sc">==</span>treetops_sf<span class="sc">$</span>trtmnt_unit[<span class="dv">1</span>]</span>
<span id="cb156-8"><a href="treatment-unit-silvicultural-summary.html#cb156-8" tabindex="-1"></a>      )</span>
<span id="cb156-9"><a href="treatment-unit-silvicultural-summary.html#cb156-9" tabindex="-1"></a>    , <span class="at">stand_area_ha =</span> treetops_sf<span class="sc">$</span>trtmnt_unit_area_ha[<span class="dv">1</span>]</span>
<span id="cb156-10"><a href="treatment-unit-silvicultural-summary.html#cb156-10" tabindex="-1"></a>    , <span class="at">calc_imperial_units =</span> T</span>
<span id="cb156-11"><a href="treatment-unit-silvicultural-summary.html#cb156-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb156-12"><a href="treatment-unit-silvicultural-summary.html#cb156-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 1
## Columns: 27
## $ n_trees                        &lt;int&gt; 10443
## $ mean_dbh_cm                    &lt;dbl&gt; 24.03183
## $ mean_tree_height_m             &lt;dbl&gt; 4.395676
## $ mean_tree_cbh_m                &lt;dbl&gt; 2.120214
## $ loreys_height_m                &lt;dbl&gt; 5.319859
## $ basal_area_m2                  &lt;dbl&gt; 534.4338
## $ mean_landfire_tree_kg_per_m3   &lt;dbl&gt; 0.6795806
## $ mean_cruz_tree_kg_per_m3       &lt;dbl&gt; 1.15825
## $ stand_area_ha                  &lt;dbl&gt; 10.30788
## $ trees_per_ha                   &lt;dbl&gt; 1013.108
## $ basal_area_m2_per_ha           &lt;dbl&gt; 51.8471
## $ qmd_cm                         &lt;dbl&gt; 25.52639
## $ landfire_cfl_kg_per_m2         &lt;dbl&gt; 0.4942284
## $ cruz_cfl_kg_per_m2             &lt;dbl&gt; NA
## $ mean_dbh_in                    &lt;dbl&gt; 9.468542
## $ qmd_in                         &lt;dbl&gt; 10.0574
## $ mean_tree_height_ft            &lt;dbl&gt; 14.42221
## $ mean_tree_cbh_ft               &lt;dbl&gt; 6.956424
## $ loreys_height_ft               &lt;dbl&gt; 17.45446
## $ basal_area_ft2_per_ac          &lt;dbl&gt; 226.0015
## $ trees_per_ac                   &lt;dbl&gt; 410.3088
## $ stand_area_ac                  &lt;dbl&gt; 25.47078
## $ landfire_cfl_lbs_per_ft2       &lt;dbl&gt; 0.1012279
## $ cruz_cfl_lbs_per_ft2           &lt;dbl&gt; NA
## $ mean_landfire_tree_lbs_per_ft3 &lt;dbl&gt; 0.04240583
## $ mean_cruz_tree_lbs_per_ft3     &lt;dbl&gt; 0.07227478
## $ basal_area_ft2                 &lt;dbl&gt; 5752.645</code></pre>
</div>
<div id="treatment-unit-summaries" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Treatment Unit Summaries<a href="treatment-unit-silvicultural-summary.html#treatment-unit-summaries" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>let’s summarize the tree data by treatment unit</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="treatment-unit-silvicultural-summary.html#cb158-1" tabindex="-1"></a>unit_sum_df <span class="ot">&lt;-</span></span>
<span id="cb158-2"><a href="treatment-unit-silvicultural-summary.html#cb158-2" tabindex="-1"></a>  treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb158-3"><a href="treatment-unit-silvicultural-summary.html#cb158-3" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb158-4"><a href="treatment-unit-silvicultural-summary.html#cb158-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(trtmnt_type,trtmnt_block,trtmnt_unit,trtmnt_unit_area_ha)</span>
<span id="cb158-5"><a href="treatment-unit-silvicultural-summary.html#cb158-5" tabindex="-1"></a>unit_sum_df <span class="ot">&lt;-</span></span>
<span id="cb158-6"><a href="treatment-unit-silvicultural-summary.html#cb158-6" tabindex="-1"></a>  <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(unit_sum_df) <span class="sc">%&gt;%</span> </span>
<span id="cb158-7"><a href="treatment-unit-silvicultural-summary.html#cb158-7" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(x){</span>
<span id="cb158-8"><a href="treatment-unit-silvicultural-summary.html#cb158-8" tabindex="-1"></a>    unit_temp <span class="ot">&lt;-</span> unit_sum_df <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(x)</span>
<span id="cb158-9"><a href="treatment-unit-silvicultural-summary.html#cb158-9" tabindex="-1"></a>    unit_temp <span class="sc">%&gt;%</span> </span>
<span id="cb158-10"><a href="treatment-unit-silvicultural-summary.html#cb158-10" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(</span>
<span id="cb158-11"><a href="treatment-unit-silvicultural-summary.html#cb158-11" tabindex="-1"></a>        <span class="fu">calc_silv_metrics</span>(</span>
<span id="cb158-12"><a href="treatment-unit-silvicultural-summary.html#cb158-12" tabindex="-1"></a>          <span class="at">tree_list =</span> treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb158-13"><a href="treatment-unit-silvicultural-summary.html#cb158-13" tabindex="-1"></a>            <span class="co"># just get one unit</span></span>
<span id="cb158-14"><a href="treatment-unit-silvicultural-summary.html#cb158-14" tabindex="-1"></a>            dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb158-15"><a href="treatment-unit-silvicultural-summary.html#cb158-15" tabindex="-1"></a>              unit_temp</span>
<span id="cb158-16"><a href="treatment-unit-silvicultural-summary.html#cb158-16" tabindex="-1"></a>              , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(trtmnt_type,trtmnt_block,trtmnt_unit)</span>
<span id="cb158-17"><a href="treatment-unit-silvicultural-summary.html#cb158-17" tabindex="-1"></a>            )</span>
<span id="cb158-18"><a href="treatment-unit-silvicultural-summary.html#cb158-18" tabindex="-1"></a>          , <span class="at">stand_area_ha =</span> unit_temp<span class="sc">$</span>trtmnt_unit_area_ha</span>
<span id="cb158-19"><a href="treatment-unit-silvicultural-summary.html#cb158-19" tabindex="-1"></a>          , <span class="at">calc_imperial_units =</span> T</span>
<span id="cb158-20"><a href="treatment-unit-silvicultural-summary.html#cb158-20" tabindex="-1"></a>        )</span>
<span id="cb158-21"><a href="treatment-unit-silvicultural-summary.html#cb158-21" tabindex="-1"></a>      )</span>
<span id="cb158-22"><a href="treatment-unit-silvicultural-summary.html#cb158-22" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span> </span>
<span id="cb158-23"><a href="treatment-unit-silvicultural-summary.html#cb158-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">bind_rows</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb158-24"><a href="treatment-unit-silvicultural-summary.html#cb158-24" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb158-25"><a href="treatment-unit-silvicultural-summary.html#cb158-25" tabindex="-1"></a>    <span class="at">my_fct =</span> forcats<span class="sc">::</span><span class="fu">fct_cross</span>(trtmnt_type,trtmnt_block,trtmnt_unit)</span>
<span id="cb158-26"><a href="treatment-unit-silvicultural-summary.html#cb158-26" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb158-27"><a href="treatment-unit-silvicultural-summary.html#cb158-27" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(trtmnt_type),trees_per_ha) <span class="sc">%&gt;%</span> </span>
<span id="cb158-28"><a href="treatment-unit-silvicultural-summary.html#cb158-28" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">my_fct =</span> forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(my_fct))</span>
<span id="cb158-29"><a href="treatment-unit-silvicultural-summary.html#cb158-29" tabindex="-1"></a></span>
<span id="cb158-30"><a href="treatment-unit-silvicultural-summary.html#cb158-30" tabindex="-1"></a><span class="co"># unit_sum_df %&gt;% dplyr::glimpse()</span></span></code></pre></div>
<div id="tabular" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Tabular<a href="treatment-unit-silvicultural-summary.html#tabular" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="metric-units" class="section level4 hasAnchor" number="4.3.1.1">
<h4><span class="header-section-number">4.3.1.1</span> Metric units<a href="treatment-unit-silvicultural-summary.html#metric-units" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="treatment-unit-silvicultural-summary.html#cb159-1" tabindex="-1"></a>unit_sum_df <span class="sc">%&gt;%</span> </span>
<span id="cb159-2"><a href="treatment-unit-silvicultural-summary.html#cb159-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(trtmnt_type, trtmnt_block, trtmnt_unit) <span class="sc">%&gt;%</span> </span>
<span id="cb159-3"><a href="treatment-unit-silvicultural-summary.html#cb159-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb159-4"><a href="treatment-unit-silvicultural-summary.html#cb159-4" tabindex="-1"></a>    trtmnt_type, trtmnt_block, trtmnt_unit</span>
<span id="cb159-5"><a href="treatment-unit-silvicultural-summary.html#cb159-5" tabindex="-1"></a>    , stand_area_ha</span>
<span id="cb159-6"><a href="treatment-unit-silvicultural-summary.html#cb159-6" tabindex="-1"></a>    <span class="co"># different</span></span>
<span id="cb159-7"><a href="treatment-unit-silvicultural-summary.html#cb159-7" tabindex="-1"></a>    , n_trees</span>
<span id="cb159-8"><a href="treatment-unit-silvicultural-summary.html#cb159-8" tabindex="-1"></a>    , trees_per_ha</span>
<span id="cb159-9"><a href="treatment-unit-silvicultural-summary.html#cb159-9" tabindex="-1"></a>    , mean_tree_height_m</span>
<span id="cb159-10"><a href="treatment-unit-silvicultural-summary.html#cb159-10" tabindex="-1"></a>    , loreys_height_m</span>
<span id="cb159-11"><a href="treatment-unit-silvicultural-summary.html#cb159-11" tabindex="-1"></a>    , mean_dbh_cm</span>
<span id="cb159-12"><a href="treatment-unit-silvicultural-summary.html#cb159-12" tabindex="-1"></a>    , qmd_cm</span>
<span id="cb159-13"><a href="treatment-unit-silvicultural-summary.html#cb159-13" tabindex="-1"></a>    , basal_area_m2_per_ha</span>
<span id="cb159-14"><a href="treatment-unit-silvicultural-summary.html#cb159-14" tabindex="-1"></a>    , mean_landfire_tree_kg_per_m3</span>
<span id="cb159-15"><a href="treatment-unit-silvicultural-summary.html#cb159-15" tabindex="-1"></a>    , mean_cruz_tree_kg_per_m3</span>
<span id="cb159-16"><a href="treatment-unit-silvicultural-summary.html#cb159-16" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb159-17"><a href="treatment-unit-silvicultural-summary.html#cb159-17" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb159-18"><a href="treatment-unit-silvicultural-summary.html#cb159-18" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="fu">c</span>(n_trees), <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="dv">1</span>))</span>
<span id="cb159-19"><a href="treatment-unit-silvicultural-summary.html#cb159-19" tabindex="-1"></a>  , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb159-20"><a href="treatment-unit-silvicultural-summary.html#cb159-20" tabindex="-1"></a>    <span class="sc">-</span><span class="fu">c</span>(tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;trtmnt_&quot;</span>),n_trees,tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;3&quot;</span>))</span>
<span id="cb159-21"><a href="treatment-unit-silvicultural-summary.html#cb159-21" tabindex="-1"></a>    , <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb159-22"><a href="treatment-unit-silvicultural-summary.html#cb159-22" tabindex="-1"></a>  )</span>
<span id="cb159-23"><a href="treatment-unit-silvicultural-summary.html#cb159-23" tabindex="-1"></a>  , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb159-24"><a href="treatment-unit-silvicultural-summary.html#cb159-24" tabindex="-1"></a>    tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;3&quot;</span>)</span>
<span id="cb159-25"><a href="treatment-unit-silvicultural-summary.html#cb159-25" tabindex="-1"></a>    , <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="fl">0.001</span>)</span>
<span id="cb159-26"><a href="treatment-unit-silvicultural-summary.html#cb159-26" tabindex="-1"></a>  )</span>
<span id="cb159-27"><a href="treatment-unit-silvicultural-summary.html#cb159-27" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb159-28"><a href="treatment-unit-silvicultural-summary.html#cb159-28" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb159-29"><a href="treatment-unit-silvicultural-summary.html#cb159-29" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&quot;Stand summary metrics in metric units&quot;</span></span>
<span id="cb159-30"><a href="treatment-unit-silvicultural-summary.html#cb159-30" tabindex="-1"></a>  , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb159-31"><a href="treatment-unit-silvicultural-summary.html#cb159-31" tabindex="-1"></a>    <span class="st">&quot;type&quot;</span>,<span class="st">&quot;block&quot;</span>,<span class="st">&quot;unit&quot;</span>,<span class="st">&quot;ha&quot;</span></span>
<span id="cb159-32"><a href="treatment-unit-silvicultural-summary.html#cb159-32" tabindex="-1"></a>    , <span class="st">&quot;trees&quot;</span></span>
<span id="cb159-33"><a href="treatment-unit-silvicultural-summary.html#cb159-33" tabindex="-1"></a>    , <span class="st">&quot;trees ha&lt;sup&gt;-1&lt;/sup&gt;&quot;</span></span>
<span id="cb159-34"><a href="treatment-unit-silvicultural-summary.html#cb159-34" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;tree ht. (m)&quot;</span></span>
<span id="cb159-35"><a href="treatment-unit-silvicultural-summary.html#cb159-35" tabindex="-1"></a>    , <span class="st">&quot;Lorey&#39;s&lt;br&gt;tree ht. (m)&quot;</span></span>
<span id="cb159-36"><a href="treatment-unit-silvicultural-summary.html#cb159-36" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;DBH (cm)&quot;</span></span>
<span id="cb159-37"><a href="treatment-unit-silvicultural-summary.html#cb159-37" tabindex="-1"></a>    , <span class="st">&quot;QMD (cm)&quot;</span></span>
<span id="cb159-38"><a href="treatment-unit-silvicultural-summary.html#cb159-38" tabindex="-1"></a>    , <span class="st">&quot;BA (m&lt;sup&gt;2&lt;/sup&gt; ha&lt;sup&gt;-1&lt;/sup&gt;)&quot;</span></span>
<span id="cb159-39"><a href="treatment-unit-silvicultural-summary.html#cb159-39" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;CBD (kg m&lt;sup&gt;-3&lt;/sup&gt;)&lt;br&gt;LANDFIRE&quot;</span></span>
<span id="cb159-40"><a href="treatment-unit-silvicultural-summary.html#cb159-40" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;CBD (kg m&lt;sup&gt;-3&lt;/sup&gt;)&lt;br&gt;Cruz&quot;</span></span>
<span id="cb159-41"><a href="treatment-unit-silvicultural-summary.html#cb159-41" tabindex="-1"></a>  )</span>
<span id="cb159-42"><a href="treatment-unit-silvicultural-summary.html#cb159-42" tabindex="-1"></a>  , <span class="at">escape =</span> F</span>
<span id="cb159-43"><a href="treatment-unit-silvicultural-summary.html#cb159-43" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb159-44"><a href="treatment-unit-silvicultural-summary.html#cb159-44" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="fl">9.7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb159-45"><a href="treatment-unit-silvicultural-summary.html#cb159-45" tabindex="-1"></a><span class="co"># kableExtra::column_spec(seq(4,10,by=2), border_right = TRUE, include_thead = TRUE) %&gt;% </span></span>
<span id="cb159-46"><a href="treatment-unit-silvicultural-summary.html#cb159-46" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb159-47"><a href="treatment-unit-silvicultural-summary.html#cb159-47" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8.4in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8.4in; ">
<table class="table" style="font-size: 9.7px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-132">Table 4.2: </span>Stand summary metrics in metric units
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
type
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
block
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
unit
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
ha
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
trees
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
trees ha<sup>-1</sup>
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>tree ht. (m)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Lorey’s<br>tree ht. (m)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>DBH (cm)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
QMD (cm)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
BA (m<sup>2</sup> ha<sup>-1</sup>)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>CBD (kg m<sup>-3</sup>)<br>LANDFIRE
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>CBD (kg m<sup>-3</sup>)<br>Cruz
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
control
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U11
</td>
<td style="text-align:left;">
11.5
</td>
<td style="text-align:left;">
9,614
</td>
<td style="text-align:left;">
832.4
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
23.0
</td>
<td style="text-align:left;">
24.2
</td>
<td style="text-align:left;">
38.4
</td>
<td style="text-align:left;">
0.664
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U23
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
10,443
</td>
<td style="text-align:left;">
1,013.1
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
5.3
</td>
<td style="text-align:left;">
24.0
</td>
<td style="text-align:left;">
25.5
</td>
<td style="text-align:left;">
51.8
</td>
<td style="text-align:left;">
0.680
</td>
<td style="text-align:left;">
1.158
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U21
</td>
<td style="text-align:left;">
8.1
</td>
<td style="text-align:left;">
8,410
</td>
<td style="text-align:left;">
1,039.4
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
23.5
</td>
<td style="text-align:left;">
24.7
</td>
<td style="text-align:left;">
49.9
</td>
<td style="text-align:left;">
0.508
</td>
<td style="text-align:left;">
0.982
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U4
</td>
<td style="text-align:left;">
6.7
</td>
<td style="text-align:left;">
6,417
</td>
<td style="text-align:left;">
958.8
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
22.7
</td>
<td style="text-align:left;">
24.3
</td>
<td style="text-align:left;">
44.3
</td>
<td style="text-align:left;">
0.642
</td>
<td style="text-align:left;">
1.044
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U38
</td>
<td style="text-align:left;">
8.6
</td>
<td style="text-align:left;">
7,030
</td>
<td style="text-align:left;">
817.8
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
23.3
</td>
<td style="text-align:left;">
24.5
</td>
<td style="text-align:left;">
38.6
</td>
<td style="text-align:left;">
0.423
</td>
<td style="text-align:left;">
0.626
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U30
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
10,692
</td>
<td style="text-align:left;">
1,055.2
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
23.2
</td>
<td style="text-align:left;">
24.3
</td>
<td style="text-align:left;">
48.9
</td>
<td style="text-align:left;">
0.508
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U46
</td>
<td style="text-align:left;">
8.6
</td>
<td style="text-align:left;">
7,783
</td>
<td style="text-align:left;">
910.0
</td>
<td style="text-align:left;">
4.6
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
25.1
</td>
<td style="text-align:left;">
26.5
</td>
<td style="text-align:left;">
50.1
</td>
<td style="text-align:left;">
0.560
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U31
</td>
<td style="text-align:left;">
8.1
</td>
<td style="text-align:left;">
7,378
</td>
<td style="text-align:left;">
912.4
</td>
<td style="text-align:left;">
4.6
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
25.1
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
49.8
</td>
<td style="text-align:left;">
0.562
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U54
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
8,839
</td>
<td style="text-align:left;">
854.1
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.3
</td>
<td style="text-align:left;">
25.2
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
46.8
</td>
<td style="text-align:left;">
0.681
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U42
</td>
<td style="text-align:left;">
8.3
</td>
<td style="text-align:left;">
6,306
</td>
<td style="text-align:left;">
755.6
</td>
<td style="text-align:left;">
4.1
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
22.6
</td>
<td style="text-align:left;">
24.1
</td>
<td style="text-align:left;">
34.3
</td>
<td style="text-align:left;">
0.663
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U48
</td>
<td style="text-align:left;">
8.3
</td>
<td style="text-align:left;">
6,534
</td>
<td style="text-align:left;">
789.5
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
23.8
</td>
<td style="text-align:left;">
25.3
</td>
<td style="text-align:left;">
39.6
</td>
<td style="text-align:left;">
0.713
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U34
</td>
<td style="text-align:left;">
9.2
</td>
<td style="text-align:left;">
9,752
</td>
<td style="text-align:left;">
1,055.5
</td>
<td style="text-align:left;">
3.8
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
20.6
</td>
<td style="text-align:left;">
21.7
</td>
<td style="text-align:left;">
39.0
</td>
<td style="text-align:left;">
0.664
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
heterogenous
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U40
</td>
<td style="text-align:left;">
9.1
</td>
<td style="text-align:left;">
4,623
</td>
<td style="text-align:left;">
506.8
</td>
<td style="text-align:left;">
4.6
</td>
<td style="text-align:left;">
5.3
</td>
<td style="text-align:left;">
25.3
</td>
<td style="text-align:left;">
26.6
</td>
<td style="text-align:left;">
28.1
</td>
<td style="text-align:left;">
0.921
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U16
</td>
<td style="text-align:left;">
9.5
</td>
<td style="text-align:left;">
5,576
</td>
<td style="text-align:left;">
586.6
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
25.9
</td>
<td style="text-align:left;">
27.2
</td>
<td style="text-align:left;">
34.0
</td>
<td style="text-align:left;">
0.981
</td>
<td style="text-align:left;">
1.054
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U26
</td>
<td style="text-align:left;">
9.0
</td>
<td style="text-align:left;">
4,586
</td>
<td style="text-align:left;">
511.3
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.7
</td>
<td style="text-align:left;">
25.9
</td>
<td style="text-align:left;">
27.4
</td>
<td style="text-align:left;">
30.1
</td>
<td style="text-align:left;">
0.859
</td>
<td style="text-align:left;">
0.906
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U36
</td>
<td style="text-align:left;">
8.5
</td>
<td style="text-align:left;">
4,014
</td>
<td style="text-align:left;">
472.0
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.3
</td>
<td style="text-align:left;">
24.9
</td>
<td style="text-align:left;">
26.1
</td>
<td style="text-align:left;">
25.3
</td>
<td style="text-align:left;">
0.764
</td>
<td style="text-align:left;">
0.787
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U39
</td>
<td style="text-align:left;">
8.3
</td>
<td style="text-align:left;">
4,108
</td>
<td style="text-align:left;">
494.3
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
27.4
</td>
<td style="text-align:left;">
29.1
</td>
<td style="text-align:left;">
0.850
</td>
<td style="text-align:left;">
0.909
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U29
</td>
<td style="text-align:left;">
9.2
</td>
<td style="text-align:left;">
5,487
</td>
<td style="text-align:left;">
598.2
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
25.1
</td>
<td style="text-align:left;">
26.1
</td>
<td style="text-align:left;">
32.1
</td>
<td style="text-align:left;">
0.777
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U44
</td>
<td style="text-align:left;">
8.6
</td>
<td style="text-align:left;">
4,792
</td>
<td style="text-align:left;">
556.9
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
24.5
</td>
<td style="text-align:left;">
25.6
</td>
<td style="text-align:left;">
28.6
</td>
<td style="text-align:left;">
0.965
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U2
</td>
<td style="text-align:left;">
8.3
</td>
<td style="text-align:left;">
4,327
</td>
<td style="text-align:left;">
522.2
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
27.5
</td>
<td style="text-align:left;">
30.9
</td>
<td style="text-align:left;">
0.964
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U53
</td>
<td style="text-align:left;">
8.4
</td>
<td style="text-align:left;">
4,835
</td>
<td style="text-align:left;">
573.0
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
24.1
</td>
<td style="text-align:left;">
25.2
</td>
<td style="text-align:left;">
28.6
</td>
<td style="text-align:left;">
1.015
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U41
</td>
<td style="text-align:left;">
8.2
</td>
<td style="text-align:left;">
4,475
</td>
<td style="text-align:left;">
545.7
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
26.9
</td>
<td style="text-align:left;">
28.1
</td>
<td style="text-align:left;">
33.8
</td>
<td style="text-align:left;">
0.874
</td>
<td style="text-align:left;">
0.699
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U43
</td>
<td style="text-align:left;">
8.1
</td>
<td style="text-align:left;">
4,481
</td>
<td style="text-align:left;">
550.9
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
26.0
</td>
<td style="text-align:left;">
27.2
</td>
<td style="text-align:left;">
31.9
</td>
<td style="text-align:left;">
0.972
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U55
</td>
<td style="text-align:left;">
9.2
</td>
<td style="text-align:left;">
5,556
</td>
<td style="text-align:left;">
603.6
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
24.6
</td>
<td style="text-align:left;">
25.6
</td>
<td style="text-align:left;">
31.2
</td>
<td style="text-align:left;">
0.936
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
uniform- high
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U10
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
1,877
</td>
<td style="text-align:left;">
362.7
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
27.1
</td>
<td style="text-align:left;">
28.1
</td>
<td style="text-align:left;">
22.4
</td>
<td style="text-align:left;">
1.104
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U19
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
1,339
</td>
<td style="text-align:left;">
298.1
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
26.7
</td>
<td style="text-align:left;">
28.0
</td>
<td style="text-align:left;">
18.4
</td>
<td style="text-align:left;">
0.990
</td>
<td style="text-align:left;">
1.166
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U18
</td>
<td style="text-align:left;">
4.1
</td>
<td style="text-align:left;">
1,072
</td>
<td style="text-align:left;">
261.0
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
24.5
</td>
<td style="text-align:left;">
26.0
</td>
<td style="text-align:left;">
13.9
</td>
<td style="text-align:left;">
0.973
</td>
<td style="text-align:left;">
1.010
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U27
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
1,746
</td>
<td style="text-align:left;">
419.3
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
5.8
</td>
<td style="text-align:left;">
28.6
</td>
<td style="text-align:left;">
29.5
</td>
<td style="text-align:left;">
28.7
</td>
<td style="text-align:left;">
1.166
</td>
<td style="text-align:left;">
1.072
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U37
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
1,576
</td>
<td style="text-align:left;">
280.3
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
6.0
</td>
<td style="text-align:left;">
28.2
</td>
<td style="text-align:left;">
29.4
</td>
<td style="text-align:left;">
19.0
</td>
<td style="text-align:left;">
1.022
</td>
<td style="text-align:left;">
0.838
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U28
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
999
</td>
<td style="text-align:left;">
232.8
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
27.1
</td>
<td style="text-align:left;">
28.1
</td>
<td style="text-align:left;">
14.5
</td>
<td style="text-align:left;">
1.046
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U45
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
981
</td>
<td style="text-align:left;">
228.3
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
5.8
</td>
<td style="text-align:left;">
28.2
</td>
<td style="text-align:left;">
29.3
</td>
<td style="text-align:left;">
15.4
</td>
<td style="text-align:left;">
0.955
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U33
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
863
</td>
<td style="text-align:left;">
192.4
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.3
</td>
<td style="text-align:left;">
26.8
</td>
<td style="text-align:left;">
27.6
</td>
<td style="text-align:left;">
11.5
</td>
<td style="text-align:left;">
1.076
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U52
</td>
<td style="text-align:left;">
4.1
</td>
<td style="text-align:left;">
1,606
</td>
<td style="text-align:left;">
391.6
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
27.3
</td>
<td style="text-align:left;">
22.9
</td>
<td style="text-align:left;">
1.238
</td>
<td style="text-align:left;">
1.123
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U35
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
1,036
</td>
<td style="text-align:left;">
233.5
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
26.2
</td>
<td style="text-align:left;">
27.1
</td>
<td style="text-align:left;">
13.5
</td>
<td style="text-align:left;">
1.009
</td>
<td style="text-align:left;">
1.184
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U49
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
1,828
</td>
<td style="text-align:left;">
416.2
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
5.7
</td>
<td style="text-align:left;">
28.7
</td>
<td style="text-align:left;">
29.6
</td>
<td style="text-align:left;">
28.6
</td>
<td style="text-align:left;">
1.179
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U32
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
978
</td>
<td style="text-align:left;">
193.6
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
27.4
</td>
<td style="text-align:left;">
11.4
</td>
<td style="text-align:left;">
1.090
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
uniform- low
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U10
</td>
<td style="text-align:left;">
5.2
</td>
<td style="text-align:left;">
1,888
</td>
<td style="text-align:left;">
364.8
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
24.8
</td>
<td style="text-align:left;">
25.8
</td>
<td style="text-align:left;">
19.1
</td>
<td style="text-align:left;">
1.011
</td>
<td style="text-align:left;">
0.973
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U19
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
2,458
</td>
<td style="text-align:left;">
547.2
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
26.9
</td>
<td style="text-align:left;">
28.1
</td>
<td style="text-align:left;">
33.9
</td>
<td style="text-align:left;">
1.105
</td>
<td style="text-align:left;">
1.330
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U18
</td>
<td style="text-align:left;">
4.1
</td>
<td style="text-align:left;">
1,521
</td>
<td style="text-align:left;">
370.4
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
24.9
</td>
<td style="text-align:left;">
26.0
</td>
<td style="text-align:left;">
19.6
</td>
<td style="text-align:left;">
1.129
</td>
<td style="text-align:left;">
0.924
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U27
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
1,921
</td>
<td style="text-align:left;">
461.3
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
26.8
</td>
<td style="text-align:left;">
27.9
</td>
<td style="text-align:left;">
28.2
</td>
<td style="text-align:left;">
1.089
</td>
<td style="text-align:left;">
1.100
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U37
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
2,009
</td>
<td style="text-align:left;">
357.3
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
25.3
</td>
<td style="text-align:left;">
26.2
</td>
<td style="text-align:left;">
19.3
</td>
<td style="text-align:left;">
0.957
</td>
<td style="text-align:left;">
0.534
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U28
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
1,784
</td>
<td style="text-align:left;">
415.7
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
5.3
</td>
<td style="text-align:left;">
26.2
</td>
<td style="text-align:left;">
27.2
</td>
<td style="text-align:left;">
24.2
</td>
<td style="text-align:left;">
1.118
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U45
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
1,228
</td>
<td style="text-align:left;">
285.8
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
5.7
</td>
<td style="text-align:left;">
27.6
</td>
<td style="text-align:left;">
28.6
</td>
<td style="text-align:left;">
18.4
</td>
<td style="text-align:left;">
1.110
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U33
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
1,630
</td>
<td style="text-align:left;">
363.4
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
25.5
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
19.9
</td>
<td style="text-align:left;">
1.057
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U52
</td>
<td style="text-align:left;">
4.1
</td>
<td style="text-align:left;">
2,056
</td>
<td style="text-align:left;">
501.4
</td>
<td style="text-align:left;">
4.6
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
25.7
</td>
<td style="text-align:left;">
26.6
</td>
<td style="text-align:left;">
27.8
</td>
<td style="text-align:left;">
1.282
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U35
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
2,033
</td>
<td style="text-align:left;">
458.3
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
26.6
</td>
<td style="text-align:left;">
27.8
</td>
<td style="text-align:left;">
27.8
</td>
<td style="text-align:left;">
1.021
</td>
<td style="text-align:left;">
1.392
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U49
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
2,472
</td>
<td style="text-align:left;">
562.9
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
27.3
</td>
<td style="text-align:left;">
28.3
</td>
<td style="text-align:left;">
35.4
</td>
<td style="text-align:left;">
1.043
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U32
</td>
<td style="text-align:left;">
5.1
</td>
<td style="text-align:left;">
2,176
</td>
<td style="text-align:left;">
430.8
</td>
<td style="text-align:left;">
4.4
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
24.4
</td>
<td style="text-align:left;">
25.4
</td>
<td style="text-align:left;">
21.9
</td>
<td style="text-align:left;">
1.022
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="imperial-units" class="section level4 hasAnchor" number="4.3.1.2">
<h4><span class="header-section-number">4.3.1.2</span> Imperial units<a href="treatment-unit-silvicultural-summary.html#imperial-units" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="treatment-unit-silvicultural-summary.html#cb160-1" tabindex="-1"></a>unit_sum_df <span class="sc">%&gt;%</span> </span>
<span id="cb160-2"><a href="treatment-unit-silvicultural-summary.html#cb160-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(trtmnt_type, trtmnt_block, trtmnt_unit) <span class="sc">%&gt;%</span> </span>
<span id="cb160-3"><a href="treatment-unit-silvicultural-summary.html#cb160-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb160-4"><a href="treatment-unit-silvicultural-summary.html#cb160-4" tabindex="-1"></a>    trtmnt_type, trtmnt_block, trtmnt_unit</span>
<span id="cb160-5"><a href="treatment-unit-silvicultural-summary.html#cb160-5" tabindex="-1"></a>    , stand_area_ac</span>
<span id="cb160-6"><a href="treatment-unit-silvicultural-summary.html#cb160-6" tabindex="-1"></a>    <span class="co"># different</span></span>
<span id="cb160-7"><a href="treatment-unit-silvicultural-summary.html#cb160-7" tabindex="-1"></a>    , n_trees</span>
<span id="cb160-8"><a href="treatment-unit-silvicultural-summary.html#cb160-8" tabindex="-1"></a>    , trees_per_ac</span>
<span id="cb160-9"><a href="treatment-unit-silvicultural-summary.html#cb160-9" tabindex="-1"></a>    , mean_tree_height_ft</span>
<span id="cb160-10"><a href="treatment-unit-silvicultural-summary.html#cb160-10" tabindex="-1"></a>    , loreys_height_ft</span>
<span id="cb160-11"><a href="treatment-unit-silvicultural-summary.html#cb160-11" tabindex="-1"></a>    , mean_dbh_in</span>
<span id="cb160-12"><a href="treatment-unit-silvicultural-summary.html#cb160-12" tabindex="-1"></a>    , qmd_in</span>
<span id="cb160-13"><a href="treatment-unit-silvicultural-summary.html#cb160-13" tabindex="-1"></a>    , basal_area_ft2_per_ac</span>
<span id="cb160-14"><a href="treatment-unit-silvicultural-summary.html#cb160-14" tabindex="-1"></a>    , mean_landfire_tree_lbs_per_ft3</span>
<span id="cb160-15"><a href="treatment-unit-silvicultural-summary.html#cb160-15" tabindex="-1"></a>    , mean_cruz_tree_lbs_per_ft3</span>
<span id="cb160-16"><a href="treatment-unit-silvicultural-summary.html#cb160-16" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb160-17"><a href="treatment-unit-silvicultural-summary.html#cb160-17" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb160-18"><a href="treatment-unit-silvicultural-summary.html#cb160-18" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="fu">c</span>(n_trees), <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="dv">1</span>))</span>
<span id="cb160-19"><a href="treatment-unit-silvicultural-summary.html#cb160-19" tabindex="-1"></a>  , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb160-20"><a href="treatment-unit-silvicultural-summary.html#cb160-20" tabindex="-1"></a>    <span class="sc">-</span><span class="fu">c</span>(n_trees,tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;trtmnt_&quot;</span>),tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;3&quot;</span>))</span>
<span id="cb160-21"><a href="treatment-unit-silvicultural-summary.html#cb160-21" tabindex="-1"></a>    , <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb160-22"><a href="treatment-unit-silvicultural-summary.html#cb160-22" tabindex="-1"></a>  )</span>
<span id="cb160-23"><a href="treatment-unit-silvicultural-summary.html#cb160-23" tabindex="-1"></a>  , dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb160-24"><a href="treatment-unit-silvicultural-summary.html#cb160-24" tabindex="-1"></a>    tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;3&quot;</span>)</span>
<span id="cb160-25"><a href="treatment-unit-silvicultural-summary.html#cb160-25" tabindex="-1"></a>    , <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="fl">0.001</span>)</span>
<span id="cb160-26"><a href="treatment-unit-silvicultural-summary.html#cb160-26" tabindex="-1"></a>  )</span>
<span id="cb160-27"><a href="treatment-unit-silvicultural-summary.html#cb160-27" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb160-28"><a href="treatment-unit-silvicultural-summary.html#cb160-28" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb160-29"><a href="treatment-unit-silvicultural-summary.html#cb160-29" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&quot;Stand summary metrics in imperial units&quot;</span></span>
<span id="cb160-30"><a href="treatment-unit-silvicultural-summary.html#cb160-30" tabindex="-1"></a>  , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb160-31"><a href="treatment-unit-silvicultural-summary.html#cb160-31" tabindex="-1"></a>    <span class="st">&quot;type&quot;</span>,<span class="st">&quot;block&quot;</span>,<span class="st">&quot;unit&quot;</span>,<span class="st">&quot;ac&quot;</span></span>
<span id="cb160-32"><a href="treatment-unit-silvicultural-summary.html#cb160-32" tabindex="-1"></a>    , <span class="st">&quot;trees&quot;</span></span>
<span id="cb160-33"><a href="treatment-unit-silvicultural-summary.html#cb160-33" tabindex="-1"></a>    , <span class="st">&quot;trees ac&lt;sup&gt;-1&lt;/sup&gt;&quot;</span></span>
<span id="cb160-34"><a href="treatment-unit-silvicultural-summary.html#cb160-34" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;tree ht. (ft)&quot;</span></span>
<span id="cb160-35"><a href="treatment-unit-silvicultural-summary.html#cb160-35" tabindex="-1"></a>    , <span class="st">&quot;Lorey&#39;s&lt;br&gt;tree ht. (ft)&quot;</span></span>
<span id="cb160-36"><a href="treatment-unit-silvicultural-summary.html#cb160-36" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;DBH (in)&quot;</span></span>
<span id="cb160-37"><a href="treatment-unit-silvicultural-summary.html#cb160-37" tabindex="-1"></a>    , <span class="st">&quot;QMD (in)&quot;</span></span>
<span id="cb160-38"><a href="treatment-unit-silvicultural-summary.html#cb160-38" tabindex="-1"></a>    , <span class="st">&quot;BA (ft&lt;sup&gt;2&lt;/sup&gt; ac&lt;sup&gt;-1&lt;/sup&gt;)&quot;</span></span>
<span id="cb160-39"><a href="treatment-unit-silvicultural-summary.html#cb160-39" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;CBD (lb ft&lt;sup&gt;-3&lt;/sup&gt;)&lt;br&gt;LANDFIRE&quot;</span></span>
<span id="cb160-40"><a href="treatment-unit-silvicultural-summary.html#cb160-40" tabindex="-1"></a>    , <span class="st">&quot;mean&lt;br&gt;CBD (lb ft&lt;sup&gt;-3&lt;/sup&gt;)&lt;br&gt;Cruz&quot;</span></span>
<span id="cb160-41"><a href="treatment-unit-silvicultural-summary.html#cb160-41" tabindex="-1"></a>  )</span>
<span id="cb160-42"><a href="treatment-unit-silvicultural-summary.html#cb160-42" tabindex="-1"></a>  , <span class="at">escape =</span> F</span>
<span id="cb160-43"><a href="treatment-unit-silvicultural-summary.html#cb160-43" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb160-44"><a href="treatment-unit-silvicultural-summary.html#cb160-44" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="fl">9.7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb160-45"><a href="treatment-unit-silvicultural-summary.html#cb160-45" tabindex="-1"></a><span class="co"># kableExtra::column_spec(seq(4,10,by=2), border_right = TRUE, include_thead = TRUE) %&gt;% </span></span>
<span id="cb160-46"><a href="treatment-unit-silvicultural-summary.html#cb160-46" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb160-47"><a href="treatment-unit-silvicultural-summary.html#cb160-47" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8.4in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8.4in; ">
<table class="table" style="font-size: 9.7px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-133">Table 4.3: </span>Stand summary metrics in imperial units
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
type
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
block
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
unit
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
ac
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
trees
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
trees ac<sup>-1</sup>
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>tree ht. (ft)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Lorey’s<br>tree ht. (ft)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>DBH (in)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
QMD (in)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
BA (ft<sup>2</sup> ac<sup>-1</sup>)
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>CBD (lb ft<sup>-3</sup>)<br>LANDFIRE
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
mean<br>CBD (lb ft<sup>-3</sup>)<br>Cruz
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
control
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U11
</td>
<td style="text-align:left;">
28.5
</td>
<td style="text-align:left;">
9,614
</td>
<td style="text-align:left;">
337.1
</td>
<td style="text-align:left;">
13.6
</td>
<td style="text-align:left;">
16.1
</td>
<td style="text-align:left;">
9.0
</td>
<td style="text-align:left;">
9.5
</td>
<td style="text-align:left;">
167.3
</td>
<td style="text-align:left;">
0.041
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U23
</td>
<td style="text-align:left;">
25.5
</td>
<td style="text-align:left;">
10,443
</td>
<td style="text-align:left;">
410.3
</td>
<td style="text-align:left;">
14.4
</td>
<td style="text-align:left;">
17.5
</td>
<td style="text-align:left;">
9.5
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
226.0
</td>
<td style="text-align:left;">
0.042
</td>
<td style="text-align:left;">
0.072
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U21
</td>
<td style="text-align:left;">
20.0
</td>
<td style="text-align:left;">
8,410
</td>
<td style="text-align:left;">
420.9
</td>
<td style="text-align:left;">
13.9
</td>
<td style="text-align:left;">
16.2
</td>
<td style="text-align:left;">
9.3
</td>
<td style="text-align:left;">
9.7
</td>
<td style="text-align:left;">
217.4
</td>
<td style="text-align:left;">
0.032
</td>
<td style="text-align:left;">
0.061
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U4
</td>
<td style="text-align:left;">
16.5
</td>
<td style="text-align:left;">
6,417
</td>
<td style="text-align:left;">
388.3
</td>
<td style="text-align:left;">
13.6
</td>
<td style="text-align:left;">
16.8
</td>
<td style="text-align:left;">
8.9
</td>
<td style="text-align:left;">
9.6
</td>
<td style="text-align:left;">
193.1
</td>
<td style="text-align:left;">
0.040
</td>
<td style="text-align:left;">
0.065
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U38
</td>
<td style="text-align:left;">
21.2
</td>
<td style="text-align:left;">
7,030
</td>
<td style="text-align:left;">
331.2
</td>
<td style="text-align:left;">
13.8
</td>
<td style="text-align:left;">
16.3
</td>
<td style="text-align:left;">
9.2
</td>
<td style="text-align:left;">
9.7
</td>
<td style="text-align:left;">
168.4
</td>
<td style="text-align:left;">
0.026
</td>
<td style="text-align:left;">
0.039
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U30
</td>
<td style="text-align:left;">
25.0
</td>
<td style="text-align:left;">
10,692
</td>
<td style="text-align:left;">
427.4
</td>
<td style="text-align:left;">
13.7
</td>
<td style="text-align:left;">
15.8
</td>
<td style="text-align:left;">
9.1
</td>
<td style="text-align:left;">
9.6
</td>
<td style="text-align:left;">
213.1
</td>
<td style="text-align:left;">
0.032
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U46
</td>
<td style="text-align:left;">
21.1
</td>
<td style="text-align:left;">
7,783
</td>
<td style="text-align:left;">
368.5
</td>
<td style="text-align:left;">
15.0
</td>
<td style="text-align:left;">
17.9
</td>
<td style="text-align:left;">
9.9
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
218.5
</td>
<td style="text-align:left;">
0.035
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U31
</td>
<td style="text-align:left;">
20.0
</td>
<td style="text-align:left;">
7,378
</td>
<td style="text-align:left;">
369.5
</td>
<td style="text-align:left;">
15.0
</td>
<td style="text-align:left;">
17.7
</td>
<td style="text-align:left;">
9.9
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
217.1
</td>
<td style="text-align:left;">
0.035
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U54
</td>
<td style="text-align:left;">
25.6
</td>
<td style="text-align:left;">
8,839
</td>
<td style="text-align:left;">
345.9
</td>
<td style="text-align:left;">
14.9
</td>
<td style="text-align:left;">
17.3
</td>
<td style="text-align:left;">
9.9
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
204.2
</td>
<td style="text-align:left;">
0.042
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U42
</td>
<td style="text-align:left;">
20.6
</td>
<td style="text-align:left;">
6,306
</td>
<td style="text-align:left;">
306.0
</td>
<td style="text-align:left;">
13.5
</td>
<td style="text-align:left;">
16.3
</td>
<td style="text-align:left;">
8.9
</td>
<td style="text-align:left;">
9.5
</td>
<td style="text-align:left;">
149.7
</td>
<td style="text-align:left;">
0.041
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U48
</td>
<td style="text-align:left;">
20.5
</td>
<td style="text-align:left;">
6,534
</td>
<td style="text-align:left;">
319.7
</td>
<td style="text-align:left;">
14.2
</td>
<td style="text-align:left;">
17.1
</td>
<td style="text-align:left;">
9.4
</td>
<td style="text-align:left;">
10.0
</td>
<td style="text-align:left;">
172.8
</td>
<td style="text-align:left;">
0.045
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U34
</td>
<td style="text-align:left;">
22.8
</td>
<td style="text-align:left;">
9,752
</td>
<td style="text-align:left;">
427.5
</td>
<td style="text-align:left;">
12.3
</td>
<td style="text-align:left;">
14.4
</td>
<td style="text-align:left;">
8.1
</td>
<td style="text-align:left;">
8.5
</td>
<td style="text-align:left;">
170.0
</td>
<td style="text-align:left;">
0.041
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
heterogenous
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U40
</td>
<td style="text-align:left;">
22.5
</td>
<td style="text-align:left;">
4,623
</td>
<td style="text-align:left;">
205.3
</td>
<td style="text-align:left;">
15.0
</td>
<td style="text-align:left;">
17.5
</td>
<td style="text-align:left;">
10.0
</td>
<td style="text-align:left;">
10.5
</td>
<td style="text-align:left;">
122.6
</td>
<td style="text-align:left;">
0.058
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U16
</td>
<td style="text-align:left;">
23.5
</td>
<td style="text-align:left;">
5,576
</td>
<td style="text-align:left;">
237.6
</td>
<td style="text-align:left;">
15.5
</td>
<td style="text-align:left;">
18.2
</td>
<td style="text-align:left;">
10.2
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
148.4
</td>
<td style="text-align:left;">
0.061
</td>
<td style="text-align:left;">
0.066
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U26
</td>
<td style="text-align:left;">
22.2
</td>
<td style="text-align:left;">
4,586
</td>
<td style="text-align:left;">
207.1
</td>
<td style="text-align:left;">
15.6
</td>
<td style="text-align:left;">
18.7
</td>
<td style="text-align:left;">
10.2
</td>
<td style="text-align:left;">
10.8
</td>
<td style="text-align:left;">
131.3
</td>
<td style="text-align:left;">
0.054
</td>
<td style="text-align:left;">
0.057
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U36
</td>
<td style="text-align:left;">
21.0
</td>
<td style="text-align:left;">
4,014
</td>
<td style="text-align:left;">
191.1
</td>
<td style="text-align:left;">
14.8
</td>
<td style="text-align:left;">
17.4
</td>
<td style="text-align:left;">
9.8
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
110.4
</td>
<td style="text-align:left;">
0.048
</td>
<td style="text-align:left;">
0.049
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U39
</td>
<td style="text-align:left;">
20.5
</td>
<td style="text-align:left;">
4,108
</td>
<td style="text-align:left;">
200.2
</td>
<td style="text-align:left;">
15.5
</td>
<td style="text-align:left;">
17.6
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
10.8
</td>
<td style="text-align:left;">
127.0
</td>
<td style="text-align:left;">
0.053
</td>
<td style="text-align:left;">
0.057
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U29
</td>
<td style="text-align:left;">
22.7
</td>
<td style="text-align:left;">
5,487
</td>
<td style="text-align:left;">
242.3
</td>
<td style="text-align:left;">
14.7
</td>
<td style="text-align:left;">
16.8
</td>
<td style="text-align:left;">
9.9
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
139.8
</td>
<td style="text-align:left;">
0.048
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U44
</td>
<td style="text-align:left;">
21.3
</td>
<td style="text-align:left;">
4,792
</td>
<td style="text-align:left;">
225.5
</td>
<td style="text-align:left;">
14.4
</td>
<td style="text-align:left;">
16.4
</td>
<td style="text-align:left;">
9.7
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
124.8
</td>
<td style="text-align:left;">
0.060
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U2
</td>
<td style="text-align:left;">
20.5
</td>
<td style="text-align:left;">
4,327
</td>
<td style="text-align:left;">
211.5
</td>
<td style="text-align:left;">
15.6
</td>
<td style="text-align:left;">
17.9
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
10.8
</td>
<td style="text-align:left;">
134.8
</td>
<td style="text-align:left;">
0.060
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U53
</td>
<td style="text-align:left;">
20.9
</td>
<td style="text-align:left;">
4,835
</td>
<td style="text-align:left;">
232.1
</td>
<td style="text-align:left;">
14.2
</td>
<td style="text-align:left;">
16.4
</td>
<td style="text-align:left;">
9.5
</td>
<td style="text-align:left;">
9.9
</td>
<td style="text-align:left;">
124.9
</td>
<td style="text-align:left;">
0.063
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U41
</td>
<td style="text-align:left;">
20.3
</td>
<td style="text-align:left;">
4,475
</td>
<td style="text-align:left;">
221.0
</td>
<td style="text-align:left;">
16.0
</td>
<td style="text-align:left;">
18.3
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
147.3
</td>
<td style="text-align:left;">
0.055
</td>
<td style="text-align:left;">
0.044
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U43
</td>
<td style="text-align:left;">
20.1
</td>
<td style="text-align:left;">
4,481
</td>
<td style="text-align:left;">
223.1
</td>
<td style="text-align:left;">
15.4
</td>
<td style="text-align:left;">
17.7
</td>
<td style="text-align:left;">
10.2
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
139.1
</td>
<td style="text-align:left;">
0.061
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U55
</td>
<td style="text-align:left;">
22.7
</td>
<td style="text-align:left;">
5,556
</td>
<td style="text-align:left;">
244.4
</td>
<td style="text-align:left;">
14.4
</td>
<td style="text-align:left;">
16.4
</td>
<td style="text-align:left;">
9.7
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
135.8
</td>
<td style="text-align:left;">
0.058
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
uniform- high
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U10
</td>
<td style="text-align:left;">
12.8
</td>
<td style="text-align:left;">
1,877
</td>
<td style="text-align:left;">
146.9
</td>
<td style="text-align:left;">
15.9
</td>
<td style="text-align:left;">
17.8
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
97.7
</td>
<td style="text-align:left;">
0.069
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U19
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
1,339
</td>
<td style="text-align:left;">
120.7
</td>
<td style="text-align:left;">
15.9
</td>
<td style="text-align:left;">
18.5
</td>
<td style="text-align:left;">
10.5
</td>
<td style="text-align:left;">
11.0
</td>
<td style="text-align:left;">
80.0
</td>
<td style="text-align:left;">
0.062
</td>
<td style="text-align:left;">
0.073
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U18
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
1,072
</td>
<td style="text-align:left;">
105.7
</td>
<td style="text-align:left;">
14.7
</td>
<td style="text-align:left;">
17.9
</td>
<td style="text-align:left;">
9.6
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
60.5
</td>
<td style="text-align:left;">
0.061
</td>
<td style="text-align:left;">
0.063
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U27
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
1,746
</td>
<td style="text-align:left;">
169.8
</td>
<td style="text-align:left;">
17.0
</td>
<td style="text-align:left;">
19.1
</td>
<td style="text-align:left;">
11.3
</td>
<td style="text-align:left;">
11.6
</td>
<td style="text-align:left;">
125.2
</td>
<td style="text-align:left;">
0.073
</td>
<td style="text-align:left;">
0.067
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U37
</td>
<td style="text-align:left;">
13.9
</td>
<td style="text-align:left;">
1,576
</td>
<td style="text-align:left;">
113.5
</td>
<td style="text-align:left;">
17.1
</td>
<td style="text-align:left;">
19.7
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
11.6
</td>
<td style="text-align:left;">
82.7
</td>
<td style="text-align:left;">
0.064
</td>
<td style="text-align:left;">
0.052
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U28
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
999
</td>
<td style="text-align:left;">
94.3
</td>
<td style="text-align:left;">
16.0
</td>
<td style="text-align:left;">
18.1
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
63.1
</td>
<td style="text-align:left;">
0.065
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U45
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
981
</td>
<td style="text-align:left;">
92.5
</td>
<td style="text-align:left;">
16.8
</td>
<td style="text-align:left;">
19.0
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
11.5
</td>
<td style="text-align:left;">
67.0
</td>
<td style="text-align:left;">
0.060
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U33
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
863
</td>
<td style="text-align:left;">
77.9
</td>
<td style="text-align:left;">
15.6
</td>
<td style="text-align:left;">
17.2
</td>
<td style="text-align:left;">
10.5
</td>
<td style="text-align:left;">
10.9
</td>
<td style="text-align:left;">
50.1
</td>
<td style="text-align:left;">
0.067
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U52
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
1,606
</td>
<td style="text-align:left;">
158.6
</td>
<td style="text-align:left;">
15.4
</td>
<td style="text-align:left;">
17.2
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
10.8
</td>
<td style="text-align:left;">
100.0
</td>
<td style="text-align:left;">
0.077
</td>
<td style="text-align:left;">
0.070
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U35
</td>
<td style="text-align:left;">
11.0
</td>
<td style="text-align:left;">
1,036
</td>
<td style="text-align:left;">
94.6
</td>
<td style="text-align:left;">
15.3
</td>
<td style="text-align:left;">
17.1
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
58.8
</td>
<td style="text-align:left;">
0.063
</td>
<td style="text-align:left;">
0.074
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U49
</td>
<td style="text-align:left;">
10.9
</td>
<td style="text-align:left;">
1,828
</td>
<td style="text-align:left;">
168.6
</td>
<td style="text-align:left;">
17.0
</td>
<td style="text-align:left;">
18.9
</td>
<td style="text-align:left;">
11.3
</td>
<td style="text-align:left;">
11.6
</td>
<td style="text-align:left;">
124.6
</td>
<td style="text-align:left;">
0.074
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U32
</td>
<td style="text-align:left;">
12.5
</td>
<td style="text-align:left;">
978
</td>
<td style="text-align:left;">
78.4
</td>
<td style="text-align:left;">
15.5
</td>
<td style="text-align:left;">
17.6
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
10.8
</td>
<td style="text-align:left;">
49.9
</td>
<td style="text-align:left;">
0.068
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
uniform- low
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
U10
</td>
<td style="text-align:left;">
12.8
</td>
<td style="text-align:left;">
1,888
</td>
<td style="text-align:left;">
147.8
</td>
<td style="text-align:left;">
14.5
</td>
<td style="text-align:left;">
16.4
</td>
<td style="text-align:left;">
9.8
</td>
<td style="text-align:left;">
10.2
</td>
<td style="text-align:left;">
83.2
</td>
<td style="text-align:left;">
0.063
</td>
<td style="text-align:left;">
0.061
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
U19
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
2,458
</td>
<td style="text-align:left;">
221.6
</td>
<td style="text-align:left;">
16.0
</td>
<td style="text-align:left;">
18.3
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
147.7
</td>
<td style="text-align:left;">
0.069
</td>
<td style="text-align:left;">
0.083
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
U18
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
1,521
</td>
<td style="text-align:left;">
150.0
</td>
<td style="text-align:left;">
14.6
</td>
<td style="text-align:left;">
16.7
</td>
<td style="text-align:left;">
9.8
</td>
<td style="text-align:left;">
10.2
</td>
<td style="text-align:left;">
85.5
</td>
<td style="text-align:left;">
0.070
</td>
<td style="text-align:left;">
0.058
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
U27
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
1,921
</td>
<td style="text-align:left;">
186.8
</td>
<td style="text-align:left;">
15.9
</td>
<td style="text-align:left;">
18.2
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
11.0
</td>
<td style="text-align:left;">
122.8
</td>
<td style="text-align:left;">
0.068
</td>
<td style="text-align:left;">
0.069
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
U37
</td>
<td style="text-align:left;">
13.9
</td>
<td style="text-align:left;">
2,009
</td>
<td style="text-align:left;">
144.7
</td>
<td style="text-align:left;">
14.7
</td>
<td style="text-align:left;">
16.4
</td>
<td style="text-align:left;">
10.0
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
84.1
</td>
<td style="text-align:left;">
0.060
</td>
<td style="text-align:left;">
0.033
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
U28
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
1,784
</td>
<td style="text-align:left;">
168.4
</td>
<td style="text-align:left;">
15.4
</td>
<td style="text-align:left;">
17.4
</td>
<td style="text-align:left;">
10.3
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
105.4
</td>
<td style="text-align:left;">
0.070
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
U45
</td>
<td style="text-align:left;">
10.6
</td>
<td style="text-align:left;">
1,228
</td>
<td style="text-align:left;">
115.8
</td>
<td style="text-align:left;">
16.5
</td>
<td style="text-align:left;">
18.7
</td>
<td style="text-align:left;">
10.9
</td>
<td style="text-align:left;">
11.3
</td>
<td style="text-align:left;">
80.2
</td>
<td style="text-align:left;">
0.069
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
U33
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
1,630
</td>
<td style="text-align:left;">
147.2
</td>
<td style="text-align:left;">
14.9
</td>
<td style="text-align:left;">
16.6
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
10.4
</td>
<td style="text-align:left;">
86.9
</td>
<td style="text-align:left;">
0.066
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
U52
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
2,056
</td>
<td style="text-align:left;">
203.1
</td>
<td style="text-align:left;">
15.0
</td>
<td style="text-align:left;">
16.7
</td>
<td style="text-align:left;">
10.1
</td>
<td style="text-align:left;">
10.5
</td>
<td style="text-align:left;">
121.3
</td>
<td style="text-align:left;">
0.080
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
U35
</td>
<td style="text-align:left;">
11.0
</td>
<td style="text-align:left;">
2,033
</td>
<td style="text-align:left;">
185.6
</td>
<td style="text-align:left;">
15.8
</td>
<td style="text-align:left;">
18.1
</td>
<td style="text-align:left;">
10.5
</td>
<td style="text-align:left;">
10.9
</td>
<td style="text-align:left;">
121.1
</td>
<td style="text-align:left;">
0.064
</td>
<td style="text-align:left;">
0.087
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
U49
</td>
<td style="text-align:left;">
10.9
</td>
<td style="text-align:left;">
2,472
</td>
<td style="text-align:left;">
228.0
</td>
<td style="text-align:left;">
16.2
</td>
<td style="text-align:left;">
18.5
</td>
<td style="text-align:left;">
10.7
</td>
<td style="text-align:left;">
11.2
</td>
<td style="text-align:left;">
154.5
</td>
<td style="text-align:left;">
0.065
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
U32
</td>
<td style="text-align:left;">
12.5
</td>
<td style="text-align:left;">
2,176
</td>
<td style="text-align:left;">
174.5
</td>
<td style="text-align:left;">
14.3
</td>
<td style="text-align:left;">
16.2
</td>
<td style="text-align:left;">
9.6
</td>
<td style="text-align:left;">
10.0
</td>
<td style="text-align:left;">
95.3
</td>
<td style="text-align:left;">
0.064
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="visual" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Visual<a href="treatment-unit-silvicultural-summary.html#visual" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>we’ll start with a simple bar plot to see if the aggregated trees per ha generally align with the treatment types</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="treatment-unit-silvicultural-summary.html#cb161-1" tabindex="-1"></a>unit_sum_df <span class="sc">%&gt;%</span> </span>
<span id="cb161-2"><a href="treatment-unit-silvicultural-summary.html#cb161-2" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x=</span>trees_per_ha,<span class="at">y=</span>my_fct,<span class="at">fill=</span>trtmnt_type,<span class="at">group =</span> trtmnt_type)) <span class="sc">+</span></span>
<span id="cb161-3"><a href="treatment-unit-silvicultural-summary.html#cb161-3" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb161-4"><a href="treatment-unit-silvicultural-summary.html#cb161-4" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb161-5"><a href="treatment-unit-silvicultural-summary.html#cb161-5" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb161-6"><a href="treatment-unit-silvicultural-summary.html#cb161-6" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb161-7"><a href="treatment-unit-silvicultural-summary.html#cb161-7" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;trees per ha&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb161-8"><a href="treatment-unit-silvicultural-summary.html#cb161-8" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb161-9"><a href="treatment-unit-silvicultural-summary.html#cb161-9" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb161-10"><a href="treatment-unit-silvicultural-summary.html#cb161-10" tabindex="-1"></a>    , <span class="at">axis.text.y =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>)</span>
<span id="cb161-11"><a href="treatment-unit-silvicultural-summary.html#cb161-11" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb161-12"><a href="treatment-unit-silvicultural-summary.html#cb161-12" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-134-1.png" alt="" width="1008" /></p>
<p>that’s looks about right, let’s check out a unit-level distribution of the TPH</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="treatment-unit-silvicultural-summary.html#cb162-1" tabindex="-1"></a><span class="co"># reusable function for plotting</span></span>
<span id="cb162-2"><a href="treatment-unit-silvicultural-summary.html#cb162-2" tabindex="-1"></a>plt_metric_dist_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(df, metric_name, <span class="at">metric_label =</span> <span class="cn">NA</span>) {</span>
<span id="cb162-3"><a href="treatment-unit-silvicultural-summary.html#cb162-3" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">is.na</span>(metric_label))){metric_label <span class="ot">&lt;-</span> metric_name}</span>
<span id="cb162-4"><a href="treatment-unit-silvicultural-summary.html#cb162-4" tabindex="-1"></a>  tit <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb162-5"><a href="treatment-unit-silvicultural-summary.html#cb162-5" tabindex="-1"></a>    <span class="st">&quot;distribution of treatment unit&quot;</span></span>
<span id="cb162-6"><a href="treatment-unit-silvicultural-summary.html#cb162-6" tabindex="-1"></a>    ,metric_label</span>
<span id="cb162-7"><a href="treatment-unit-silvicultural-summary.html#cb162-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb162-8"><a href="treatment-unit-silvicultural-summary.html#cb162-8" tabindex="-1"></a>  latex2exp<span class="sc">::</span><span class="fu">TeX</span>()</span>
<span id="cb162-9"><a href="treatment-unit-silvicultural-summary.html#cb162-9" tabindex="-1"></a>  </span>
<span id="cb162-10"><a href="treatment-unit-silvicultural-summary.html#cb162-10" tabindex="-1"></a>  df <span class="sc">%&gt;%</span> </span>
<span id="cb162-11"><a href="treatment-unit-silvicultural-summary.html#cb162-11" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x=</span>.data[[metric_name]],<span class="at">fill=</span>trtmnt_type)) <span class="sc">+</span></span>
<span id="cb162-12"><a href="treatment-unit-silvicultural-summary.html#cb162-12" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y=</span>ggplot2<span class="sc">::</span><span class="fu">after_stat</span>(scaled)), <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb162-13"><a href="treatment-unit-silvicultural-summary.html#cb162-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_grid</span>(</span>
<span id="cb162-14"><a href="treatment-unit-silvicultural-summary.html#cb162-14" tabindex="-1"></a>    <span class="at">rows =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(trtmnt_type)</span>
<span id="cb162-15"><a href="treatment-unit-silvicultural-summary.html#cb162-15" tabindex="-1"></a>    , <span class="at">axes =</span> <span class="st">&quot;all&quot;</span></span>
<span id="cb162-16"><a href="treatment-unit-silvicultural-summary.html#cb162-16" tabindex="-1"></a>    , <span class="at">switch =</span> <span class="st">&quot;y&quot;</span></span>
<span id="cb162-17"><a href="treatment-unit-silvicultural-summary.html#cb162-17" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb162-18"><a href="treatment-unit-silvicultural-summary.html#cb162-18" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb162-19"><a href="treatment-unit-silvicultural-summary.html#cb162-19" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="cn">NA</span>),<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb162-20"><a href="treatment-unit-silvicultural-summary.html#cb162-20" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks=</span><span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb162-21"><a href="treatment-unit-silvicultural-summary.html#cb162-21" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb162-22"><a href="treatment-unit-silvicultural-summary.html#cb162-22" tabindex="-1"></a>    <span class="at">fill=</span><span class="st">&quot;&quot;</span>,<span class="at">x=</span>latex2exp<span class="sc">::</span><span class="fu">TeX</span>(metric_label),<span class="at">y=</span><span class="st">&quot;&quot;</span></span>
<span id="cb162-23"><a href="treatment-unit-silvicultural-summary.html#cb162-23" tabindex="-1"></a>    , <span class="at">title =</span> tit</span>
<span id="cb162-24"><a href="treatment-unit-silvicultural-summary.html#cb162-24" tabindex="-1"></a>    , <span class="at">subtitle =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">by treatment type&quot;</span></span>
<span id="cb162-25"><a href="treatment-unit-silvicultural-summary.html#cb162-25" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb162-26"><a href="treatment-unit-silvicultural-summary.html#cb162-26" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb162-27"><a href="treatment-unit-silvicultural-summary.html#cb162-27" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb162-28"><a href="treatment-unit-silvicultural-summary.html#cb162-28" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb162-29"><a href="treatment-unit-silvicultural-summary.html#cb162-29" tabindex="-1"></a>    , <span class="at">strip.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb162-30"><a href="treatment-unit-silvicultural-summary.html#cb162-30" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb162-31"><a href="treatment-unit-silvicultural-summary.html#cb162-31" tabindex="-1"></a>    , <span class="at">plot.subtitle =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="sc">-</span><span class="dv">20</span>, <span class="at">unit =</span> <span class="st">&quot;pt&quot;</span>))</span>
<span id="cb162-32"><a href="treatment-unit-silvicultural-summary.html#cb162-32" tabindex="-1"></a>    </span>
<span id="cb162-33"><a href="treatment-unit-silvicultural-summary.html#cb162-33" tabindex="-1"></a>  )</span>
<span id="cb162-34"><a href="treatment-unit-silvicultural-summary.html#cb162-34" tabindex="-1"></a>}</span>
<span id="cb162-35"><a href="treatment-unit-silvicultural-summary.html#cb162-35" tabindex="-1"></a>plt_metric_violin_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(df, metric_name, <span class="at">metric_label =</span> <span class="cn">NA</span>) {</span>
<span id="cb162-36"><a href="treatment-unit-silvicultural-summary.html#cb162-36" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">is.na</span>(metric_label))){metric_label <span class="ot">&lt;-</span> metric_name}</span>
<span id="cb162-37"><a href="treatment-unit-silvicultural-summary.html#cb162-37" tabindex="-1"></a>  tit <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb162-38"><a href="treatment-unit-silvicultural-summary.html#cb162-38" tabindex="-1"></a>    <span class="st">&quot;distribution of treatment unit&quot;</span></span>
<span id="cb162-39"><a href="treatment-unit-silvicultural-summary.html#cb162-39" tabindex="-1"></a>    ,metric_label</span>
<span id="cb162-40"><a href="treatment-unit-silvicultural-summary.html#cb162-40" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb162-41"><a href="treatment-unit-silvicultural-summary.html#cb162-41" tabindex="-1"></a>  latex2exp<span class="sc">::</span><span class="fu">TeX</span>()</span>
<span id="cb162-42"><a href="treatment-unit-silvicultural-summary.html#cb162-42" tabindex="-1"></a>  </span>
<span id="cb162-43"><a href="treatment-unit-silvicultural-summary.html#cb162-43" tabindex="-1"></a>  df <span class="sc">%&gt;%</span> </span>
<span id="cb162-44"><a href="treatment-unit-silvicultural-summary.html#cb162-44" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x=</span>.data[[metric_name]])) <span class="sc">+</span></span>
<span id="cb162-45"><a href="treatment-unit-silvicultural-summary.html#cb162-45" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_violin</span>(</span>
<span id="cb162-46"><a href="treatment-unit-silvicultural-summary.html#cb162-46" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y =</span> <span class="dv">0</span>, <span class="at">fill=</span>trtmnt_type)</span>
<span id="cb162-47"><a href="treatment-unit-silvicultural-summary.html#cb162-47" tabindex="-1"></a>    , <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">color =</span> <span class="cn">NA</span></span>
<span id="cb162-48"><a href="treatment-unit-silvicultural-summary.html#cb162-48" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb162-49"><a href="treatment-unit-silvicultural-summary.html#cb162-49" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.1</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">outliers =</span> F) <span class="sc">+</span></span>
<span id="cb162-50"><a href="treatment-unit-silvicultural-summary.html#cb162-50" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_grid</span>(</span>
<span id="cb162-51"><a href="treatment-unit-silvicultural-summary.html#cb162-51" tabindex="-1"></a>    <span class="at">rows =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(trtmnt_type)</span>
<span id="cb162-52"><a href="treatment-unit-silvicultural-summary.html#cb162-52" tabindex="-1"></a>    , <span class="at">axes =</span> <span class="st">&quot;all&quot;</span></span>
<span id="cb162-53"><a href="treatment-unit-silvicultural-summary.html#cb162-53" tabindex="-1"></a>    , <span class="at">switch =</span> <span class="st">&quot;y&quot;</span></span>
<span id="cb162-54"><a href="treatment-unit-silvicultural-summary.html#cb162-54" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb162-55"><a href="treatment-unit-silvicultural-summary.html#cb162-55" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb162-56"><a href="treatment-unit-silvicultural-summary.html#cb162-56" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="cn">NA</span>),<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb162-57"><a href="treatment-unit-silvicultural-summary.html#cb162-57" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks=</span><span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb162-58"><a href="treatment-unit-silvicultural-summary.html#cb162-58" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb162-59"><a href="treatment-unit-silvicultural-summary.html#cb162-59" tabindex="-1"></a>    <span class="at">fill=</span><span class="st">&quot;&quot;</span>,<span class="at">x=</span>latex2exp<span class="sc">::</span><span class="fu">TeX</span>(metric_label),<span class="at">y=</span><span class="st">&quot;&quot;</span></span>
<span id="cb162-60"><a href="treatment-unit-silvicultural-summary.html#cb162-60" tabindex="-1"></a>    , <span class="at">title =</span> tit</span>
<span id="cb162-61"><a href="treatment-unit-silvicultural-summary.html#cb162-61" tabindex="-1"></a>    , <span class="at">subtitle =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">by treatment type&quot;</span></span>
<span id="cb162-62"><a href="treatment-unit-silvicultural-summary.html#cb162-62" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb162-63"><a href="treatment-unit-silvicultural-summary.html#cb162-63" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb162-64"><a href="treatment-unit-silvicultural-summary.html#cb162-64" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb162-65"><a href="treatment-unit-silvicultural-summary.html#cb162-65" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb162-66"><a href="treatment-unit-silvicultural-summary.html#cb162-66" tabindex="-1"></a>    , <span class="at">strip.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb162-67"><a href="treatment-unit-silvicultural-summary.html#cb162-67" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb162-68"><a href="treatment-unit-silvicultural-summary.html#cb162-68" tabindex="-1"></a>    , <span class="at">plot.subtitle =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="sc">-</span><span class="dv">20</span>, <span class="at">unit =</span> <span class="st">&quot;pt&quot;</span>))</span>
<span id="cb162-69"><a href="treatment-unit-silvicultural-summary.html#cb162-69" tabindex="-1"></a>  )</span>
<span id="cb162-70"><a href="treatment-unit-silvicultural-summary.html#cb162-70" tabindex="-1"></a>}</span>
<span id="cb162-71"><a href="treatment-unit-silvicultural-summary.html#cb162-71" tabindex="-1"></a><span class="co"># plot it</span></span>
<span id="cb162-72"><a href="treatment-unit-silvicultural-summary.html#cb162-72" tabindex="-1"></a><span class="fu">plt_metric_violin_fn</span>(unit_sum_df,<span class="st">&quot;trees_per_ha&quot;</span>,<span class="at">metric_label =</span> <span class="st">&quot;trees $ha^{-1}$&quot;</span>)</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-135-1.png" alt="" width="1008" /></p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="treatment-unit-silvicultural-summary.html#cb163-1" tabindex="-1"></a><span class="co"># plt_metric_dist_fn(unit_sum_df,&quot;trees_per_ha&quot;,metric_label = &quot;trees $ha^{-1}$&quot;)</span></span></code></pre></div>
<p>since we also have imperial units let’s see TPA</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="treatment-unit-silvicultural-summary.html#cb164-1" tabindex="-1"></a><span class="fu">plt_metric_violin_fn</span>(unit_sum_df,<span class="st">&quot;trees_per_ac&quot;</span>,<span class="at">metric_label =</span> <span class="st">&quot;trees $ac^{-1}$&quot;</span>)</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-136-1.png" alt="" width="1008" /></p>
<p>we can also look at the QMD in cm</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="treatment-unit-silvicultural-summary.html#cb165-1" tabindex="-1"></a><span class="fu">plt_metric_violin_fn</span>(unit_sum_df,<span class="st">&quot;qmd_cm&quot;</span>,<span class="at">metric_label =</span> <span class="st">&quot;QMD (cm)&quot;</span>)</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-137-1.png" alt="" width="1008" /></p>
<p>and QMD in inches</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="treatment-unit-silvicultural-summary.html#cb166-1" tabindex="-1"></a><span class="fu">plt_metric_violin_fn</span>(unit_sum_df,<span class="st">&quot;qmd_in&quot;</span>,<span class="at">metric_label =</span> <span class="st">&quot;QMD (in)&quot;</span>)</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-138-1.png" alt="" width="1008" /></p>
<p>and basal area in square meters per hectare</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="treatment-unit-silvicultural-summary.html#cb167-1" tabindex="-1"></a><span class="fu">plt_metric_violin_fn</span>(unit_sum_df,<span class="st">&quot;basal_area_m2_per_ha&quot;</span>,<span class="at">metric_label =</span> <span class="st">&quot;basal area ($m^{2} ha^{-1}$)&quot;</span>)</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-139-1.png" alt="" width="1008" /></p>
<p>but also basal area in square feet per acre</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="treatment-unit-silvicultural-summary.html#cb168-1" tabindex="-1"></a><span class="fu">plt_metric_violin_fn</span>(unit_sum_df,<span class="st">&quot;basal_area_ft2_per_ac&quot;</span>,<span class="at">metric_label =</span> <span class="st">&quot;basal area ($ft^{2} ac^{-1}$)&quot;</span>)</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-140-1.png" alt="" width="1008" /></p>
</div>
</div>
<div id="tree-distribution-by-treatment-type" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Tree Distribution by Treatment Type<a href="treatment-unit-silvicultural-summary.html#tree-distribution-by-treatment-type" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>distribution of individual tree height and DBH by treatment type (this groups all trees under the same treatment type together)</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="treatment-unit-silvicultural-summary.html#cb169-1" tabindex="-1"></a>treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb169-2"><a href="treatment-unit-silvicultural-summary.html#cb169-2" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb169-3"><a href="treatment-unit-silvicultural-summary.html#cb169-3" tabindex="-1"></a>  <span class="co"># dplyr::count(trtmnt_type, trtmnt_block)</span></span>
<span id="cb169-4"><a href="treatment-unit-silvicultural-summary.html#cb169-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(trtmnt_type, tree_height_m, dbh_cm) <span class="sc">%&gt;%</span> </span>
<span id="cb169-5"><a href="treatment-unit-silvicultural-summary.html#cb169-5" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(trtmnt_type)) <span class="sc">%&gt;%</span> </span>
<span id="cb169-6"><a href="treatment-unit-silvicultural-summary.html#cb169-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb169-7"><a href="treatment-unit-silvicultural-summary.html#cb169-7" tabindex="-1"></a>    <span class="at">name =</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(</span>
<span id="cb169-8"><a href="treatment-unit-silvicultural-summary.html#cb169-8" tabindex="-1"></a>      name</span>
<span id="cb169-9"><a href="treatment-unit-silvicultural-summary.html#cb169-9" tabindex="-1"></a>      , <span class="st">&quot;tree_height_m&quot;</span> <span class="sc">~</span> <span class="st">&quot;tree height (m)&quot;</span></span>
<span id="cb169-10"><a href="treatment-unit-silvicultural-summary.html#cb169-10" tabindex="-1"></a>      , <span class="st">&quot;dbh_cm&quot;</span> <span class="sc">~</span> <span class="st">&quot;tree DBH (cm)&quot;</span></span>
<span id="cb169-11"><a href="treatment-unit-silvicultural-summary.html#cb169-11" tabindex="-1"></a>    )</span>
<span id="cb169-12"><a href="treatment-unit-silvicultural-summary.html#cb169-12" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb169-13"><a href="treatment-unit-silvicultural-summary.html#cb169-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(</span>
<span id="cb169-14"><a href="treatment-unit-silvicultural-summary.html#cb169-14" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">fill =</span> trtmnt_type)</span>
<span id="cb169-15"><a href="treatment-unit-silvicultural-summary.html#cb169-15" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb169-16"><a href="treatment-unit-silvicultural-summary.html#cb169-16" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(</span>
<span id="cb169-17"><a href="treatment-unit-silvicultural-summary.html#cb169-17" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> value,<span class="at">y=</span>ggplot2<span class="sc">::</span><span class="fu">after_stat</span>(scaled))</span>
<span id="cb169-18"><a href="treatment-unit-silvicultural-summary.html#cb169-18" tabindex="-1"></a>    , <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">color =</span> <span class="cn">NA</span></span>
<span id="cb169-19"><a href="treatment-unit-silvicultural-summary.html#cb169-19" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb169-20"><a href="treatment-unit-silvicultural-summary.html#cb169-20" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_vline</span>(</span>
<span id="cb169-21"><a href="treatment-unit-silvicultural-summary.html#cb169-21" tabindex="-1"></a>    <span class="at">data =</span> </span>
<span id="cb169-22"><a href="treatment-unit-silvicultural-summary.html#cb169-22" tabindex="-1"></a>      treetops_sf <span class="sc">%&gt;%</span></span>
<span id="cb169-23"><a href="treatment-unit-silvicultural-summary.html#cb169-23" tabindex="-1"></a>        sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb169-24"><a href="treatment-unit-silvicultural-summary.html#cb169-24" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">group_by</span>(trtmnt_type) <span class="sc">%&gt;%</span></span>
<span id="cb169-25"><a href="treatment-unit-silvicultural-summary.html#cb169-25" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">summarise</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb169-26"><a href="treatment-unit-silvicultural-summary.html#cb169-26" tabindex="-1"></a>          <span class="at">.cols =</span> <span class="fu">c</span>(tree_height_m, dbh_cm) </span>
<span id="cb169-27"><a href="treatment-unit-silvicultural-summary.html#cb169-27" tabindex="-1"></a>          , <span class="sc">~</span><span class="fu">median</span>(.x,<span class="at">na.rm=</span>T)</span>
<span id="cb169-28"><a href="treatment-unit-silvicultural-summary.html#cb169-28" tabindex="-1"></a>        )) <span class="sc">%&gt;%</span> </span>
<span id="cb169-29"><a href="treatment-unit-silvicultural-summary.html#cb169-29" tabindex="-1"></a>        tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(trtmnt_type)) <span class="sc">%&gt;%</span> </span>
<span id="cb169-30"><a href="treatment-unit-silvicultural-summary.html#cb169-30" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb169-31"><a href="treatment-unit-silvicultural-summary.html#cb169-31" tabindex="-1"></a>          <span class="at">name =</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(</span>
<span id="cb169-32"><a href="treatment-unit-silvicultural-summary.html#cb169-32" tabindex="-1"></a>            name</span>
<span id="cb169-33"><a href="treatment-unit-silvicultural-summary.html#cb169-33" tabindex="-1"></a>            , <span class="st">&quot;tree_height_m&quot;</span> <span class="sc">~</span> <span class="st">&quot;tree height (m)&quot;</span></span>
<span id="cb169-34"><a href="treatment-unit-silvicultural-summary.html#cb169-34" tabindex="-1"></a>            , <span class="st">&quot;dbh_cm&quot;</span> <span class="sc">~</span> <span class="st">&quot;tree DBH (cm)&quot;</span></span>
<span id="cb169-35"><a href="treatment-unit-silvicultural-summary.html#cb169-35" tabindex="-1"></a>          )</span>
<span id="cb169-36"><a href="treatment-unit-silvicultural-summary.html#cb169-36" tabindex="-1"></a>        )</span>
<span id="cb169-37"><a href="treatment-unit-silvicultural-summary.html#cb169-37" tabindex="-1"></a>    , <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">xintercept =</span> value)</span>
<span id="cb169-38"><a href="treatment-unit-silvicultural-summary.html#cb169-38" tabindex="-1"></a>    , <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">lwd =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span></span>
<span id="cb169-39"><a href="treatment-unit-silvicultural-summary.html#cb169-39" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb169-40"><a href="treatment-unit-silvicultural-summary.html#cb169-40" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_grid</span>(</span>
<span id="cb169-41"><a href="treatment-unit-silvicultural-summary.html#cb169-41" tabindex="-1"></a>    <span class="at">rows =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(trtmnt_type)</span>
<span id="cb169-42"><a href="treatment-unit-silvicultural-summary.html#cb169-42" tabindex="-1"></a>    , <span class="at">cols =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(name)</span>
<span id="cb169-43"><a href="treatment-unit-silvicultural-summary.html#cb169-43" tabindex="-1"></a>    <span class="co"># rows = dplyr::vars(trtmnt_block)</span></span>
<span id="cb169-44"><a href="treatment-unit-silvicultural-summary.html#cb169-44" tabindex="-1"></a>    , <span class="at">axes =</span> <span class="st">&quot;all&quot;</span></span>
<span id="cb169-45"><a href="treatment-unit-silvicultural-summary.html#cb169-45" tabindex="-1"></a>    , <span class="at">switch =</span> <span class="st">&quot;y&quot;</span></span>
<span id="cb169-46"><a href="treatment-unit-silvicultural-summary.html#cb169-46" tabindex="-1"></a>    , <span class="at">scales =</span> <span class="st">&quot;free_x&quot;</span></span>
<span id="cb169-47"><a href="treatment-unit-silvicultural-summary.html#cb169-47" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb169-48"><a href="treatment-unit-silvicultural-summary.html#cb169-48" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb169-49"><a href="treatment-unit-silvicultural-summary.html#cb169-49" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="cn">NA</span>),<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb169-50"><a href="treatment-unit-silvicultural-summary.html#cb169-50" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks=</span><span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb169-51"><a href="treatment-unit-silvicultural-summary.html#cb169-51" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb169-52"><a href="treatment-unit-silvicultural-summary.html#cb169-52" tabindex="-1"></a>    <span class="at">fill=</span><span class="st">&quot;&quot;</span></span>
<span id="cb169-53"><a href="treatment-unit-silvicultural-summary.html#cb169-53" tabindex="-1"></a>    , <span class="at">x=</span><span class="st">&quot;&quot;</span></span>
<span id="cb169-54"><a href="treatment-unit-silvicultural-summary.html#cb169-54" tabindex="-1"></a>    ,<span class="at">y=</span><span class="st">&quot;&quot;</span></span>
<span id="cb169-55"><a href="treatment-unit-silvicultural-summary.html#cb169-55" tabindex="-1"></a>    , <span class="at">title =</span> <span class="st">&quot;distribution of individual tree measurements with line at median value&quot;</span></span>
<span id="cb169-56"><a href="treatment-unit-silvicultural-summary.html#cb169-56" tabindex="-1"></a>    , <span class="at">subtitle =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">by treatment type&quot;</span></span>
<span id="cb169-57"><a href="treatment-unit-silvicultural-summary.html#cb169-57" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;*minimum height to be considered a &#39;tree&#39;: 2 m&quot;</span></span>
<span id="cb169-58"><a href="treatment-unit-silvicultural-summary.html#cb169-58" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb169-59"><a href="treatment-unit-silvicultural-summary.html#cb169-59" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb169-60"><a href="treatment-unit-silvicultural-summary.html#cb169-60" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb169-61"><a href="treatment-unit-silvicultural-summary.html#cb169-61" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb169-62"><a href="treatment-unit-silvicultural-summary.html#cb169-62" tabindex="-1"></a>    , <span class="at">strip.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb169-63"><a href="treatment-unit-silvicultural-summary.html#cb169-63" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb169-64"><a href="treatment-unit-silvicultural-summary.html#cb169-64" tabindex="-1"></a>    , <span class="at">plot.subtitle =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="sc">-</span><span class="dv">20</span>, <span class="at">unit =</span> <span class="st">&quot;pt&quot;</span>))</span>
<span id="cb169-65"><a href="treatment-unit-silvicultural-summary.html#cb169-65" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-141-1.png" alt="" width="1008" /></p>
<p>and in imperial units</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="treatment-unit-silvicultural-summary.html#cb170-1" tabindex="-1"></a>treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb170-2"><a href="treatment-unit-silvicultural-summary.html#cb170-2" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb170-3"><a href="treatment-unit-silvicultural-summary.html#cb170-3" tabindex="-1"></a>  <span class="co"># dplyr::count(trtmnt_type, trtmnt_block)</span></span>
<span id="cb170-4"><a href="treatment-unit-silvicultural-summary.html#cb170-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(trtmnt_type, tree_height_m, dbh_cm) <span class="sc">%&gt;%</span> </span>
<span id="cb170-5"><a href="treatment-unit-silvicultural-summary.html#cb170-5" tabindex="-1"></a>  <span class="fu">calc_imperial_units_fn</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb170-6"><a href="treatment-unit-silvicultural-summary.html#cb170-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(tree_height_m, dbh_cm)) <span class="sc">%&gt;%</span> </span>
<span id="cb170-7"><a href="treatment-unit-silvicultural-summary.html#cb170-7" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(trtmnt_type)) <span class="sc">%&gt;%</span> </span>
<span id="cb170-8"><a href="treatment-unit-silvicultural-summary.html#cb170-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb170-9"><a href="treatment-unit-silvicultural-summary.html#cb170-9" tabindex="-1"></a>    <span class="at">name =</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(</span>
<span id="cb170-10"><a href="treatment-unit-silvicultural-summary.html#cb170-10" tabindex="-1"></a>      name</span>
<span id="cb170-11"><a href="treatment-unit-silvicultural-summary.html#cb170-11" tabindex="-1"></a>      , <span class="st">&quot;tree_height_ft&quot;</span> <span class="sc">~</span> <span class="st">&quot;tree height (ft)&quot;</span></span>
<span id="cb170-12"><a href="treatment-unit-silvicultural-summary.html#cb170-12" tabindex="-1"></a>      , <span class="st">&quot;dbh_in&quot;</span> <span class="sc">~</span> <span class="st">&quot;tree DBH (in)&quot;</span></span>
<span id="cb170-13"><a href="treatment-unit-silvicultural-summary.html#cb170-13" tabindex="-1"></a>    )</span>
<span id="cb170-14"><a href="treatment-unit-silvicultural-summary.html#cb170-14" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb170-15"><a href="treatment-unit-silvicultural-summary.html#cb170-15" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(</span>
<span id="cb170-16"><a href="treatment-unit-silvicultural-summary.html#cb170-16" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">fill =</span> trtmnt_type)</span>
<span id="cb170-17"><a href="treatment-unit-silvicultural-summary.html#cb170-17" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb170-18"><a href="treatment-unit-silvicultural-summary.html#cb170-18" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(</span>
<span id="cb170-19"><a href="treatment-unit-silvicultural-summary.html#cb170-19" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> value,<span class="at">y=</span>ggplot2<span class="sc">::</span><span class="fu">after_stat</span>(scaled))</span>
<span id="cb170-20"><a href="treatment-unit-silvicultural-summary.html#cb170-20" tabindex="-1"></a>    , <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">color =</span> <span class="cn">NA</span></span>
<span id="cb170-21"><a href="treatment-unit-silvicultural-summary.html#cb170-21" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb170-22"><a href="treatment-unit-silvicultural-summary.html#cb170-22" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_vline</span>(</span>
<span id="cb170-23"><a href="treatment-unit-silvicultural-summary.html#cb170-23" tabindex="-1"></a>    <span class="at">data =</span> </span>
<span id="cb170-24"><a href="treatment-unit-silvicultural-summary.html#cb170-24" tabindex="-1"></a>      treetops_sf <span class="sc">%&gt;%</span></span>
<span id="cb170-25"><a href="treatment-unit-silvicultural-summary.html#cb170-25" tabindex="-1"></a>        sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb170-26"><a href="treatment-unit-silvicultural-summary.html#cb170-26" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">select</span>(trtmnt_type, tree_height_m, dbh_cm) <span class="sc">%&gt;%</span> </span>
<span id="cb170-27"><a href="treatment-unit-silvicultural-summary.html#cb170-27" tabindex="-1"></a>        <span class="fu">calc_imperial_units_fn</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb170-28"><a href="treatment-unit-silvicultural-summary.html#cb170-28" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(tree_height_m, dbh_cm)) <span class="sc">%&gt;%</span> </span>
<span id="cb170-29"><a href="treatment-unit-silvicultural-summary.html#cb170-29" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">group_by</span>(trtmnt_type) <span class="sc">%&gt;%</span></span>
<span id="cb170-30"><a href="treatment-unit-silvicultural-summary.html#cb170-30" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">summarise</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb170-31"><a href="treatment-unit-silvicultural-summary.html#cb170-31" tabindex="-1"></a>          <span class="at">.cols =</span> <span class="fu">c</span>(tree_height_ft, dbh_in) </span>
<span id="cb170-32"><a href="treatment-unit-silvicultural-summary.html#cb170-32" tabindex="-1"></a>          , <span class="sc">~</span><span class="fu">median</span>(.x,<span class="at">na.rm=</span>T)</span>
<span id="cb170-33"><a href="treatment-unit-silvicultural-summary.html#cb170-33" tabindex="-1"></a>        )) <span class="sc">%&gt;%</span> </span>
<span id="cb170-34"><a href="treatment-unit-silvicultural-summary.html#cb170-34" tabindex="-1"></a>        tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(trtmnt_type)) <span class="sc">%&gt;%</span> </span>
<span id="cb170-35"><a href="treatment-unit-silvicultural-summary.html#cb170-35" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb170-36"><a href="treatment-unit-silvicultural-summary.html#cb170-36" tabindex="-1"></a>          <span class="at">name =</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(</span>
<span id="cb170-37"><a href="treatment-unit-silvicultural-summary.html#cb170-37" tabindex="-1"></a>            name</span>
<span id="cb170-38"><a href="treatment-unit-silvicultural-summary.html#cb170-38" tabindex="-1"></a>            , <span class="st">&quot;tree_height_ft&quot;</span> <span class="sc">~</span> <span class="st">&quot;tree height (ft)&quot;</span></span>
<span id="cb170-39"><a href="treatment-unit-silvicultural-summary.html#cb170-39" tabindex="-1"></a>            , <span class="st">&quot;dbh_in&quot;</span> <span class="sc">~</span> <span class="st">&quot;tree DBH (in)&quot;</span></span>
<span id="cb170-40"><a href="treatment-unit-silvicultural-summary.html#cb170-40" tabindex="-1"></a>          )</span>
<span id="cb170-41"><a href="treatment-unit-silvicultural-summary.html#cb170-41" tabindex="-1"></a>        )</span>
<span id="cb170-42"><a href="treatment-unit-silvicultural-summary.html#cb170-42" tabindex="-1"></a>    , <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">xintercept =</span> value)</span>
<span id="cb170-43"><a href="treatment-unit-silvicultural-summary.html#cb170-43" tabindex="-1"></a>    , <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">lwd =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span></span>
<span id="cb170-44"><a href="treatment-unit-silvicultural-summary.html#cb170-44" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb170-45"><a href="treatment-unit-silvicultural-summary.html#cb170-45" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_grid</span>(</span>
<span id="cb170-46"><a href="treatment-unit-silvicultural-summary.html#cb170-46" tabindex="-1"></a>    <span class="at">rows =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(trtmnt_type)</span>
<span id="cb170-47"><a href="treatment-unit-silvicultural-summary.html#cb170-47" tabindex="-1"></a>    , <span class="at">cols =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(name)</span>
<span id="cb170-48"><a href="treatment-unit-silvicultural-summary.html#cb170-48" tabindex="-1"></a>    <span class="co"># rows = dplyr::vars(trtmnt_block)</span></span>
<span id="cb170-49"><a href="treatment-unit-silvicultural-summary.html#cb170-49" tabindex="-1"></a>    , <span class="at">axes =</span> <span class="st">&quot;all&quot;</span></span>
<span id="cb170-50"><a href="treatment-unit-silvicultural-summary.html#cb170-50" tabindex="-1"></a>    , <span class="at">switch =</span> <span class="st">&quot;y&quot;</span></span>
<span id="cb170-51"><a href="treatment-unit-silvicultural-summary.html#cb170-51" tabindex="-1"></a>    , <span class="at">scales =</span> <span class="st">&quot;free_x&quot;</span></span>
<span id="cb170-52"><a href="treatment-unit-silvicultural-summary.html#cb170-52" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb170-53"><a href="treatment-unit-silvicultural-summary.html#cb170-53" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb170-54"><a href="treatment-unit-silvicultural-summary.html#cb170-54" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="cn">NA</span>),<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb170-55"><a href="treatment-unit-silvicultural-summary.html#cb170-55" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks=</span><span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb170-56"><a href="treatment-unit-silvicultural-summary.html#cb170-56" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb170-57"><a href="treatment-unit-silvicultural-summary.html#cb170-57" tabindex="-1"></a>    <span class="at">fill=</span><span class="st">&quot;&quot;</span></span>
<span id="cb170-58"><a href="treatment-unit-silvicultural-summary.html#cb170-58" tabindex="-1"></a>    , <span class="at">x=</span><span class="st">&quot;&quot;</span></span>
<span id="cb170-59"><a href="treatment-unit-silvicultural-summary.html#cb170-59" tabindex="-1"></a>    ,<span class="at">y=</span><span class="st">&quot;&quot;</span></span>
<span id="cb170-60"><a href="treatment-unit-silvicultural-summary.html#cb170-60" tabindex="-1"></a>    , <span class="at">title =</span> <span class="st">&quot;distribution of individual tree measurements with line at median value&quot;</span></span>
<span id="cb170-61"><a href="treatment-unit-silvicultural-summary.html#cb170-61" tabindex="-1"></a>    , <span class="at">subtitle =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">by treatment type&quot;</span></span>
<span id="cb170-62"><a href="treatment-unit-silvicultural-summary.html#cb170-62" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;*minimum height to be considered a &#39;tree&#39;: 2 m&quot;</span></span>
<span id="cb170-63"><a href="treatment-unit-silvicultural-summary.html#cb170-63" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb170-64"><a href="treatment-unit-silvicultural-summary.html#cb170-64" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb170-65"><a href="treatment-unit-silvicultural-summary.html#cb170-65" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb170-66"><a href="treatment-unit-silvicultural-summary.html#cb170-66" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb170-67"><a href="treatment-unit-silvicultural-summary.html#cb170-67" tabindex="-1"></a>    , <span class="at">strip.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb170-68"><a href="treatment-unit-silvicultural-summary.html#cb170-68" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb170-69"><a href="treatment-unit-silvicultural-summary.html#cb170-69" tabindex="-1"></a>    , <span class="at">plot.subtitle =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="at">t =</span> <span class="sc">-</span><span class="dv">20</span>, <span class="at">unit =</span> <span class="st">&quot;pt&quot;</span>))</span>
<span id="cb170-70"><a href="treatment-unit-silvicultural-summary.html#cb170-70" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-142-1.png" alt="" width="1008" /></p>
<p>table it</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="treatment-unit-silvicultural-summary.html#cb171-1" tabindex="-1"></a>tbl_df_temp <span class="ot">&lt;-</span> </span>
<span id="cb171-2"><a href="treatment-unit-silvicultural-summary.html#cb171-2" tabindex="-1"></a>  treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb171-3"><a href="treatment-unit-silvicultural-summary.html#cb171-3" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb171-4"><a href="treatment-unit-silvicultural-summary.html#cb171-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(dbh_m,trtmnt_unit_area_ha, tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_ft2&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb171-5"><a href="treatment-unit-silvicultural-summary.html#cb171-5" tabindex="-1"></a>  <span class="fu">calc_imperial_units_fn</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb171-6"><a href="treatment-unit-silvicultural-summary.html#cb171-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb171-7"><a href="treatment-unit-silvicultural-summary.html#cb171-7" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">any_of</span>(<span class="fu">c</span>(tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;trtmnt_&quot;</span>)))</span>
<span id="cb171-8"><a href="treatment-unit-silvicultural-summary.html#cb171-8" tabindex="-1"></a>    , tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;dbh_&quot;</span>)</span>
<span id="cb171-9"><a href="treatment-unit-silvicultural-summary.html#cb171-9" tabindex="-1"></a>      <span class="sc">|</span> tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;tree_height_&quot;</span>)</span>
<span id="cb171-10"><a href="treatment-unit-silvicultural-summary.html#cb171-10" tabindex="-1"></a>      <span class="sc">|</span> tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;tree_cbh_&quot;</span>)</span>
<span id="cb171-11"><a href="treatment-unit-silvicultural-summary.html#cb171-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb171-12"><a href="treatment-unit-silvicultural-summary.html#cb171-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(</span>
<span id="cb171-13"><a href="treatment-unit-silvicultural-summary.html#cb171-13" tabindex="-1"></a>    trtmnt_type <span class="co"># , trtmnt_block, trtmnt_unit,trtmnt_unit_area_ha</span></span>
<span id="cb171-14"><a href="treatment-unit-silvicultural-summary.html#cb171-14" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb171-15"><a href="treatment-unit-silvicultural-summary.html#cb171-15" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb171-16"><a href="treatment-unit-silvicultural-summary.html#cb171-16" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb171-17"><a href="treatment-unit-silvicultural-summary.html#cb171-17" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">where</span>(is.numeric)</span>
<span id="cb171-18"><a href="treatment-unit-silvicultural-summary.html#cb171-18" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="fu">list</span>(</span>
<span id="cb171-19"><a href="treatment-unit-silvicultural-summary.html#cb171-19" tabindex="-1"></a>        <span class="at">mean =</span> <span class="sc">~</span><span class="fu">mean</span>(.x,<span class="at">na.rm=</span>T)</span>
<span id="cb171-20"><a href="treatment-unit-silvicultural-summary.html#cb171-20" tabindex="-1"></a>        , <span class="at">sd =</span> <span class="sc">~</span><span class="fu">sd</span>(.x,<span class="at">na.rm=</span>T)</span>
<span id="cb171-21"><a href="treatment-unit-silvicultural-summary.html#cb171-21" tabindex="-1"></a>        <span class="co"># , q10 = ~quantile(.x,na.rm=T,probs=0.1)</span></span>
<span id="cb171-22"><a href="treatment-unit-silvicultural-summary.html#cb171-22" tabindex="-1"></a>        <span class="co"># , q50 = ~quantile(.x,na.rm=T,probs=0.5)</span></span>
<span id="cb171-23"><a href="treatment-unit-silvicultural-summary.html#cb171-23" tabindex="-1"></a>        <span class="co"># , q90 = ~quantile(.x,na.rm=T,probs=0.9)</span></span>
<span id="cb171-24"><a href="treatment-unit-silvicultural-summary.html#cb171-24" tabindex="-1"></a>        <span class="co"># , min = ~min(.x,na.rm=T)</span></span>
<span id="cb171-25"><a href="treatment-unit-silvicultural-summary.html#cb171-25" tabindex="-1"></a>        <span class="co"># , max = ~max(.x,na.rm=T)</span></span>
<span id="cb171-26"><a href="treatment-unit-silvicultural-summary.html#cb171-26" tabindex="-1"></a>        , <span class="at">range =</span> <span class="sc">~</span><span class="fu">paste0</span>(</span>
<span id="cb171-27"><a href="treatment-unit-silvicultural-summary.html#cb171-27" tabindex="-1"></a>          scales<span class="sc">::</span><span class="fu">comma</span>(<span class="fu">min</span>(.x,<span class="at">na.rm=</span>T), <span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb171-28"><a href="treatment-unit-silvicultural-summary.html#cb171-28" tabindex="-1"></a>          ,<span class="st">&quot;-&quot;</span></span>
<span id="cb171-29"><a href="treatment-unit-silvicultural-summary.html#cb171-29" tabindex="-1"></a>          , scales<span class="sc">::</span><span class="fu">comma</span>(<span class="fu">max</span>(.x,<span class="at">na.rm=</span>T), <span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb171-30"><a href="treatment-unit-silvicultural-summary.html#cb171-30" tabindex="-1"></a>        )</span>
<span id="cb171-31"><a href="treatment-unit-silvicultural-summary.html#cb171-31" tabindex="-1"></a>      )</span>
<span id="cb171-32"><a href="treatment-unit-silvicultural-summary.html#cb171-32" tabindex="-1"></a>    )</span>
<span id="cb171-33"><a href="treatment-unit-silvicultural-summary.html#cb171-33" tabindex="-1"></a>    , <span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()</span>
<span id="cb171-34"><a href="treatment-unit-silvicultural-summary.html#cb171-34" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb171-35"><a href="treatment-unit-silvicultural-summary.html#cb171-35" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() </span>
<span id="cb171-36"><a href="treatment-unit-silvicultural-summary.html#cb171-36" tabindex="-1"></a><span class="co"># tbl_df_temp %&gt;% dplyr::glimpse()</span></span></code></pre></div>
<p>summary statistics of selected tree metrics by treatment type</p>
<p><em>metric</em> units</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="treatment-unit-silvicultural-summary.html#cb172-1" tabindex="-1"></a><span class="co"># table metric</span></span>
<span id="cb172-2"><a href="treatment-unit-silvicultural-summary.html#cb172-2" tabindex="-1"></a>tbl_df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb172-3"><a href="treatment-unit-silvicultural-summary.html#cb172-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb172-4"><a href="treatment-unit-silvicultural-summary.html#cb172-4" tabindex="-1"></a>    <span class="sc">-</span><span class="fu">c</span>(</span>
<span id="cb172-5"><a href="treatment-unit-silvicultural-summary.html#cb172-5" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">contains</span>(<span class="st">&quot;_in_&quot;</span>)</span>
<span id="cb172-6"><a href="treatment-unit-silvicultural-summary.html#cb172-6" tabindex="-1"></a>      , tidyselect<span class="sc">::</span><span class="fu">contains</span>(<span class="st">&quot;_ft_&quot;</span>)</span>
<span id="cb172-7"><a href="treatment-unit-silvicultural-summary.html#cb172-7" tabindex="-1"></a>      , n</span>
<span id="cb172-8"><a href="treatment-unit-silvicultural-summary.html#cb172-8" tabindex="-1"></a>    )</span>
<span id="cb172-9"><a href="treatment-unit-silvicultural-summary.html#cb172-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb172-10"><a href="treatment-unit-silvicultural-summary.html#cb172-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb172-11"><a href="treatment-unit-silvicultural-summary.html#cb172-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb172-12"><a href="treatment-unit-silvicultural-summary.html#cb172-12" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">where</span>(is.numeric)</span>
<span id="cb172-13"><a href="treatment-unit-silvicultural-summary.html#cb172-13" tabindex="-1"></a>      , <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb172-14"><a href="treatment-unit-silvicultural-summary.html#cb172-14" tabindex="-1"></a>    )</span>
<span id="cb172-15"><a href="treatment-unit-silvicultural-summary.html#cb172-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb172-16"><a href="treatment-unit-silvicultural-summary.html#cb172-16" tabindex="-1"></a>  <span class="co"># ncol()</span></span>
<span id="cb172-17"><a href="treatment-unit-silvicultural-summary.html#cb172-17" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb172-18"><a href="treatment-unit-silvicultural-summary.html#cb172-18" tabindex="-1"></a>    <span class="at">caption =</span> <span class="fu">paste0</span>(</span>
<span id="cb172-19"><a href="treatment-unit-silvicultural-summary.html#cb172-19" tabindex="-1"></a>      <span class="st">&quot;Summary statistics of individual tree measurements&quot;</span></span>
<span id="cb172-20"><a href="treatment-unit-silvicultural-summary.html#cb172-20" tabindex="-1"></a>      ,<span class="st">&quot;&lt;br&gt;&quot;</span></span>
<span id="cb172-21"><a href="treatment-unit-silvicultural-summary.html#cb172-21" tabindex="-1"></a>      , <span class="st">&quot;by treatment type&quot;</span></span>
<span id="cb172-22"><a href="treatment-unit-silvicultural-summary.html#cb172-22" tabindex="-1"></a>    )</span>
<span id="cb172-23"><a href="treatment-unit-silvicultural-summary.html#cb172-23" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb172-24"><a href="treatment-unit-silvicultural-summary.html#cb172-24" tabindex="-1"></a>      <span class="st">&quot; &quot;</span></span>
<span id="cb172-25"><a href="treatment-unit-silvicultural-summary.html#cb172-25" tabindex="-1"></a>      , <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Mean&quot;</span>,<span class="st">&quot;Std Dev&quot;</span>,<span class="st">&quot;Range&quot;</span>), <span class="at">times =</span> <span class="dv">3</span>)</span>
<span id="cb172-26"><a href="treatment-unit-silvicultural-summary.html#cb172-26" tabindex="-1"></a>    )</span>
<span id="cb172-27"><a href="treatment-unit-silvicultural-summary.html#cb172-27" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb172-28"><a href="treatment-unit-silvicultural-summary.html#cb172-28" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb172-29"><a href="treatment-unit-silvicultural-summary.html#cb172-29" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="fl">11.5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb172-30"><a href="treatment-unit-silvicultural-summary.html#cb172-30" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">add_header_above</span>(</span>
<span id="cb172-31"><a href="treatment-unit-silvicultural-summary.html#cb172-31" tabindex="-1"></a>    <span class="fu">c</span>(</span>
<span id="cb172-32"><a href="treatment-unit-silvicultural-summary.html#cb172-32" tabindex="-1"></a>      <span class="st">&quot; &quot;</span><span class="ot">=</span><span class="dv">1</span></span>
<span id="cb172-33"><a href="treatment-unit-silvicultural-summary.html#cb172-33" tabindex="-1"></a>      , <span class="st">&quot;DBH (cm)&quot;</span> <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb172-34"><a href="treatment-unit-silvicultural-summary.html#cb172-34" tabindex="-1"></a>      , <span class="st">&quot;Height (m)&quot;</span> <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb172-35"><a href="treatment-unit-silvicultural-summary.html#cb172-35" tabindex="-1"></a>      , <span class="st">&quot;CBH (m)&quot;</span> <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb172-36"><a href="treatment-unit-silvicultural-summary.html#cb172-36" tabindex="-1"></a>    )</span>
<span id="cb172-37"><a href="treatment-unit-silvicultural-summary.html#cb172-37" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb172-38"><a href="treatment-unit-silvicultural-summary.html#cb172-38" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb172-39"><a href="treatment-unit-silvicultural-summary.html#cb172-39" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">column_spec</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>,<span class="at">by=</span><span class="dv">3</span>), <span class="at">border_right =</span> <span class="cn">TRUE</span>, <span class="at">include_thead =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb172-40"><a href="treatment-unit-silvicultural-summary.html#cb172-40" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">column_spec</span>(</span>
<span id="cb172-41"><a href="treatment-unit-silvicultural-summary.html#cb172-41" tabindex="-1"></a>    <span class="at">column =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb172-42"><a href="treatment-unit-silvicultural-summary.html#cb172-42" tabindex="-1"></a>    , <span class="at">extra_css =</span> <span class="st">&quot;font-size: 11px;&quot;</span></span>
<span id="cb172-43"><a href="treatment-unit-silvicultural-summary.html#cb172-43" tabindex="-1"></a>    , <span class="at">include_thead =</span> T</span>
<span id="cb172-44"><a href="treatment-unit-silvicultural-summary.html#cb172-44" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb172-45"><a href="treatment-unit-silvicultural-summary.html#cb172-45" tabindex="-1"></a>  <span class="co"># kableExtra::scroll_box(width = &quot;740px&quot;)</span></span>
<span id="cb172-46"><a href="treatment-unit-silvicultural-summary.html#cb172-46" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">footnote</span>(</span>
<span id="cb172-47"><a href="treatment-unit-silvicultural-summary.html#cb172-47" tabindex="-1"></a>    <span class="at">general =</span> <span class="st">&quot;*minimum height to be considered a &#39;tree&#39;: 2 m&quot;</span></span>
<span id="cb172-48"><a href="treatment-unit-silvicultural-summary.html#cb172-48" tabindex="-1"></a>    <span class="co"># , number = c(&quot;Footnote 1; &quot;, &quot;Footnote 2; &quot;)</span></span>
<span id="cb172-49"><a href="treatment-unit-silvicultural-summary.html#cb172-49" tabindex="-1"></a>    <span class="co"># , alphabet = c(&quot;Footnote A; &quot;, &quot;Footnote B; &quot;)</span></span>
<span id="cb172-50"><a href="treatment-unit-silvicultural-summary.html#cb172-50" tabindex="-1"></a>    <span class="co"># , symbol = c(&quot;Footnote Symbol 1; &quot;, &quot;Footnote Symbol 2&quot;)</span></span>
<span id="cb172-51"><a href="treatment-unit-silvicultural-summary.html#cb172-51" tabindex="-1"></a>  )</span></code></pre></div>
<table class="table" style="font-size: 11.5px; margin-left: auto; margin-right: auto;border-bottom: 0;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-144">Table 4.4: </span>Summary statistics of individual tree measurements<br>by treatment type
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
DBH (cm)
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Height (m)
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
CBH (m)
</div>
</th>
</tr>
<tr>
<th style="text-align:left;border-right:1px solid;font-size: 11px;">
</th>
<th style="text-align:left;font-size: 11px;">
Mean
</th>
<th style="text-align:left;font-size: 11px;">
Std Dev
</th>
<th style="text-align:left;border-right:1px solid;font-size: 11px;">
Range
</th>
<th style="text-align:left;font-size: 11px;">
Mean
</th>
<th style="text-align:left;font-size: 11px;">
Std Dev
</th>
<th style="text-align:left;border-right:1px solid;font-size: 11px;">
Range
</th>
<th style="text-align:left;font-size: 11px;">
Mean
</th>
<th style="text-align:left;font-size: 11px;">
Std Dev
</th>
<th style="text-align:left;border-right:1px solid;font-size: 11px;">
Range
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
control
</td>
<td style="text-align:left;font-size: 11px;">
23.5
</td>
<td style="text-align:left;font-size: 11px;">
8.1
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
8.0-41.5
</td>
<td style="text-align:left;font-size: 11px;">
4.3
</td>
<td style="text-align:left;font-size: 11px;">
1.3
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
2.0-18.8
</td>
<td style="text-align:left;font-size: 11px;">
2.0
</td>
<td style="text-align:left;font-size: 11px;">
0.3
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
1.5-7.5
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
heterogenous
</td>
<td style="text-align:left;font-size: 11px;">
25.5
</td>
<td style="text-align:left;font-size: 11px;">
7.8
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
8.0-41.4
</td>
<td style="text-align:left;font-size: 11px;">
4.6
</td>
<td style="text-align:left;font-size: 11px;">
1.4
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
2.0-11.8
</td>
<td style="text-align:left;font-size: 11px;">
2.1
</td>
<td style="text-align:left;font-size: 11px;">
0.4
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
1.5-7.5
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
uniform- high
</td>
<td style="text-align:left;font-size: 11px;">
27.2
</td>
<td style="text-align:left;font-size: 11px;">
7.7
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
8.0-40.5
</td>
<td style="text-align:left;font-size: 11px;">
4.9
</td>
<td style="text-align:left;font-size: 11px;">
1.4
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
2.0-10.1
</td>
<td style="text-align:left;font-size: 11px;">
2.2
</td>
<td style="text-align:left;font-size: 11px;">
0.4
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
1.5-5.5
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
uniform- low
</td>
<td style="text-align:left;font-size: 11px;">
26.0
</td>
<td style="text-align:left;font-size: 11px;">
7.5
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
8.0-40.6
</td>
<td style="text-align:left;font-size: 11px;">
4.7
</td>
<td style="text-align:left;font-size: 11px;">
1.3
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
2.0-10.2
</td>
<td style="text-align:left;font-size: 11px;">
2.1
</td>
<td style="text-align:left;font-size: 11px;">
0.4
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
1.5-6.5
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Note: </span>
</td>
</tr>
<tr>
<td style="padding: 0; " colspan="100%">
<sup></sup> *minimum height to be considered a ‘tree’: 2 m
</td>
</tr>
</tfoot>
</table>
<p><em>imperial</em> units</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="treatment-unit-silvicultural-summary.html#cb173-1" tabindex="-1"></a><span class="co"># table metric</span></span>
<span id="cb173-2"><a href="treatment-unit-silvicultural-summary.html#cb173-2" tabindex="-1"></a>tbl_df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb173-3"><a href="treatment-unit-silvicultural-summary.html#cb173-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb173-4"><a href="treatment-unit-silvicultural-summary.html#cb173-4" tabindex="-1"></a>    <span class="sc">-</span><span class="fu">c</span>(</span>
<span id="cb173-5"><a href="treatment-unit-silvicultural-summary.html#cb173-5" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">contains</span>(<span class="st">&quot;_cm_&quot;</span>)</span>
<span id="cb173-6"><a href="treatment-unit-silvicultural-summary.html#cb173-6" tabindex="-1"></a>      , tidyselect<span class="sc">::</span><span class="fu">contains</span>(<span class="st">&quot;_m_&quot;</span>)</span>
<span id="cb173-7"><a href="treatment-unit-silvicultural-summary.html#cb173-7" tabindex="-1"></a>      , n</span>
<span id="cb173-8"><a href="treatment-unit-silvicultural-summary.html#cb173-8" tabindex="-1"></a>    )</span>
<span id="cb173-9"><a href="treatment-unit-silvicultural-summary.html#cb173-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb173-10"><a href="treatment-unit-silvicultural-summary.html#cb173-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb173-11"><a href="treatment-unit-silvicultural-summary.html#cb173-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb173-12"><a href="treatment-unit-silvicultural-summary.html#cb173-12" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">where</span>(is.numeric)</span>
<span id="cb173-13"><a href="treatment-unit-silvicultural-summary.html#cb173-13" tabindex="-1"></a>      , <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">comma</span>(.x,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb173-14"><a href="treatment-unit-silvicultural-summary.html#cb173-14" tabindex="-1"></a>    )</span>
<span id="cb173-15"><a href="treatment-unit-silvicultural-summary.html#cb173-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb173-16"><a href="treatment-unit-silvicultural-summary.html#cb173-16" tabindex="-1"></a>  <span class="co"># ncol()</span></span>
<span id="cb173-17"><a href="treatment-unit-silvicultural-summary.html#cb173-17" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb173-18"><a href="treatment-unit-silvicultural-summary.html#cb173-18" tabindex="-1"></a>    <span class="at">caption =</span> <span class="fu">paste0</span>(</span>
<span id="cb173-19"><a href="treatment-unit-silvicultural-summary.html#cb173-19" tabindex="-1"></a>      <span class="st">&quot;Summary statistics of individual tree measurements&quot;</span></span>
<span id="cb173-20"><a href="treatment-unit-silvicultural-summary.html#cb173-20" tabindex="-1"></a>      ,<span class="st">&quot;&lt;br&gt;&quot;</span></span>
<span id="cb173-21"><a href="treatment-unit-silvicultural-summary.html#cb173-21" tabindex="-1"></a>      , <span class="st">&quot;by treatment type&quot;</span></span>
<span id="cb173-22"><a href="treatment-unit-silvicultural-summary.html#cb173-22" tabindex="-1"></a>    )</span>
<span id="cb173-23"><a href="treatment-unit-silvicultural-summary.html#cb173-23" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb173-24"><a href="treatment-unit-silvicultural-summary.html#cb173-24" tabindex="-1"></a>      <span class="st">&quot; &quot;</span></span>
<span id="cb173-25"><a href="treatment-unit-silvicultural-summary.html#cb173-25" tabindex="-1"></a>      , <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Mean&quot;</span>,<span class="st">&quot;Std Dev&quot;</span>,<span class="st">&quot;Range&quot;</span>), <span class="at">times =</span> <span class="dv">3</span>)</span>
<span id="cb173-26"><a href="treatment-unit-silvicultural-summary.html#cb173-26" tabindex="-1"></a>    )</span>
<span id="cb173-27"><a href="treatment-unit-silvicultural-summary.html#cb173-27" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb173-28"><a href="treatment-unit-silvicultural-summary.html#cb173-28" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb173-29"><a href="treatment-unit-silvicultural-summary.html#cb173-29" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="fl">11.5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb173-30"><a href="treatment-unit-silvicultural-summary.html#cb173-30" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">add_header_above</span>(</span>
<span id="cb173-31"><a href="treatment-unit-silvicultural-summary.html#cb173-31" tabindex="-1"></a>    <span class="fu">c</span>(</span>
<span id="cb173-32"><a href="treatment-unit-silvicultural-summary.html#cb173-32" tabindex="-1"></a>      <span class="st">&quot; &quot;</span><span class="ot">=</span><span class="dv">1</span></span>
<span id="cb173-33"><a href="treatment-unit-silvicultural-summary.html#cb173-33" tabindex="-1"></a>      , <span class="st">&quot;DBH (in)&quot;</span> <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb173-34"><a href="treatment-unit-silvicultural-summary.html#cb173-34" tabindex="-1"></a>      , <span class="st">&quot;Height (ft)&quot;</span> <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb173-35"><a href="treatment-unit-silvicultural-summary.html#cb173-35" tabindex="-1"></a>      , <span class="st">&quot;CBH (ft)&quot;</span> <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb173-36"><a href="treatment-unit-silvicultural-summary.html#cb173-36" tabindex="-1"></a>    )</span>
<span id="cb173-37"><a href="treatment-unit-silvicultural-summary.html#cb173-37" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb173-38"><a href="treatment-unit-silvicultural-summary.html#cb173-38" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb173-39"><a href="treatment-unit-silvicultural-summary.html#cb173-39" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">column_spec</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>,<span class="at">by=</span><span class="dv">3</span>), <span class="at">border_right =</span> <span class="cn">TRUE</span>, <span class="at">include_thead =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb173-40"><a href="treatment-unit-silvicultural-summary.html#cb173-40" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">column_spec</span>(</span>
<span id="cb173-41"><a href="treatment-unit-silvicultural-summary.html#cb173-41" tabindex="-1"></a>    <span class="at">column =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb173-42"><a href="treatment-unit-silvicultural-summary.html#cb173-42" tabindex="-1"></a>    , <span class="at">extra_css =</span> <span class="st">&quot;font-size: 11px;&quot;</span></span>
<span id="cb173-43"><a href="treatment-unit-silvicultural-summary.html#cb173-43" tabindex="-1"></a>    , <span class="at">include_thead =</span> T</span>
<span id="cb173-44"><a href="treatment-unit-silvicultural-summary.html#cb173-44" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb173-45"><a href="treatment-unit-silvicultural-summary.html#cb173-45" tabindex="-1"></a>  <span class="co"># kableExtra::scroll_box(width = &quot;740px&quot;)</span></span>
<span id="cb173-46"><a href="treatment-unit-silvicultural-summary.html#cb173-46" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">footnote</span>(</span>
<span id="cb173-47"><a href="treatment-unit-silvicultural-summary.html#cb173-47" tabindex="-1"></a>    <span class="at">general =</span> <span class="st">&quot;*minimum height to be considered a &#39;tree&#39;: 2 m&quot;</span></span>
<span id="cb173-48"><a href="treatment-unit-silvicultural-summary.html#cb173-48" tabindex="-1"></a>    <span class="co"># , number = c(&quot;Footnote 1; &quot;, &quot;Footnote 2; &quot;)</span></span>
<span id="cb173-49"><a href="treatment-unit-silvicultural-summary.html#cb173-49" tabindex="-1"></a>    <span class="co"># , alphabet = c(&quot;Footnote A; &quot;, &quot;Footnote B; &quot;)</span></span>
<span id="cb173-50"><a href="treatment-unit-silvicultural-summary.html#cb173-50" tabindex="-1"></a>    <span class="co"># , symbol = c(&quot;Footnote Symbol 1; &quot;, &quot;Footnote Symbol 2&quot;)</span></span>
<span id="cb173-51"><a href="treatment-unit-silvicultural-summary.html#cb173-51" tabindex="-1"></a>  )</span></code></pre></div>
<table class="table" style="font-size: 11.5px; margin-left: auto; margin-right: auto;border-bottom: 0;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-145">Table 4.5: </span>Summary statistics of individual tree measurements<br>by treatment type
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
DBH (in)
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Height (ft)
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
CBH (ft)
</div>
</th>
</tr>
<tr>
<th style="text-align:left;border-right:1px solid;font-size: 11px;">
</th>
<th style="text-align:left;font-size: 11px;">
Mean
</th>
<th style="text-align:left;font-size: 11px;">
Std Dev
</th>
<th style="text-align:left;border-right:1px solid;font-size: 11px;">
Range
</th>
<th style="text-align:left;font-size: 11px;">
Mean
</th>
<th style="text-align:left;font-size: 11px;">
Std Dev
</th>
<th style="text-align:left;border-right:1px solid;font-size: 11px;">
Range
</th>
<th style="text-align:left;font-size: 11px;">
Mean
</th>
<th style="text-align:left;font-size: 11px;">
Std Dev
</th>
<th style="text-align:left;border-right:1px solid;font-size: 11px;">
Range
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
control
</td>
<td style="text-align:left;font-size: 11px;">
9.2
</td>
<td style="text-align:left;font-size: 11px;">
3.2
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
3.2-16.4
</td>
<td style="text-align:left;font-size: 11px;">
14.0
</td>
<td style="text-align:left;font-size: 11px;">
4.4
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
6.6-61.6
</td>
<td style="text-align:left;font-size: 11px;">
6.6
</td>
<td style="text-align:left;font-size: 11px;">
1.1
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
4.9-24.6
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
heterogenous
</td>
<td style="text-align:left;font-size: 11px;">
10.0
</td>
<td style="text-align:left;font-size: 11px;">
3.1
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
3.2-16.3
</td>
<td style="text-align:left;font-size: 11px;">
15.1
</td>
<td style="text-align:left;font-size: 11px;">
4.5
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
6.6-38.8
</td>
<td style="text-align:left;font-size: 11px;">
6.8
</td>
<td style="text-align:left;font-size: 11px;">
1.2
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
4.9-24.6
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
uniform- high
</td>
<td style="text-align:left;font-size: 11px;">
10.7
</td>
<td style="text-align:left;font-size: 11px;">
3.0
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
3.2-16.0
</td>
<td style="text-align:left;font-size: 11px;">
16.1
</td>
<td style="text-align:left;font-size: 11px;">
4.6
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
6.6-33.2
</td>
<td style="text-align:left;font-size: 11px;">
7.1
</td>
<td style="text-align:left;font-size: 11px;">
1.3
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
4.9-18.0
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
uniform- low
</td>
<td style="text-align:left;font-size: 11px;">
10.2
</td>
<td style="text-align:left;font-size: 11px;">
2.9
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
3.2-16.0
</td>
<td style="text-align:left;font-size: 11px;">
15.3
</td>
<td style="text-align:left;font-size: 11px;">
4.3
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
6.6-33.4
</td>
<td style="text-align:left;font-size: 11px;">
6.9
</td>
<td style="text-align:left;font-size: 11px;">
1.2
</td>
<td style="text-align:left;border-right:1px solid;font-size: 11px;">
4.9-21.3
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Note: </span>
</td>
</tr>
<tr>
<td style="padding: 0; " colspan="100%">
<sup></sup> *minimum height to be considered a ‘tree’: 2 m
</td>
</tr>
</tfoot>
</table>
<p>another common thing to look at are binned height/DBH distributions</p>
<p>we’ll start with DBH bins</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="treatment-unit-silvicultural-summary.html#cb174-1" tabindex="-1"></a><span class="co"># make ggplot2::cut_* bins pretty</span></span>
<span id="cb174-2"><a href="treatment-unit-silvicultural-summary.html#cb174-2" tabindex="-1"></a>make_bins_pretty <span class="ot">&lt;-</span> <span class="cf">function</span>(bin_factor, <span class="at">suffix =</span> <span class="st">&quot;&quot;</span>) {</span>
<span id="cb174-3"><a href="treatment-unit-silvicultural-summary.html#cb174-3" tabindex="-1"></a>  <span class="co"># convert factor to character and remove brackets and parens</span></span>
<span id="cb174-4"><a href="treatment-unit-silvicultural-summary.html#cb174-4" tabindex="-1"></a>  clean_labels <span class="ot">&lt;-</span> bin_factor <span class="sc">%&gt;%</span></span>
<span id="cb174-5"><a href="treatment-unit-silvicultural-summary.html#cb174-5" tabindex="-1"></a>    <span class="fu">as.character</span>() <span class="sc">%&gt;%</span></span>
<span id="cb174-6"><a href="treatment-unit-silvicultural-summary.html#cb174-6" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="fu">c</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">[&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">(&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">]&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">)&quot;</span> <span class="ot">=</span> <span class="st">&quot;&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb174-7"><a href="treatment-unit-silvicultural-summary.html#cb174-7" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">&quot;,&quot;</span>, <span class="st">&quot;-&quot;</span>)</span>
<span id="cb174-8"><a href="treatment-unit-silvicultural-summary.html#cb174-8" tabindex="-1"></a>  </span>
<span id="cb174-9"><a href="treatment-unit-silvicultural-summary.html#cb174-9" tabindex="-1"></a>  <span class="co"># suffix</span></span>
<span id="cb174-10"><a href="treatment-unit-silvicultural-summary.html#cb174-10" tabindex="-1"></a>  <span class="cf">if</span>(stringr<span class="sc">::</span><span class="fu">str_squish</span>(suffix) <span class="sc">!=</span> <span class="st">&quot;&quot;</span> <span class="sc">&amp;&amp;</span> <span class="fu">inherits</span>(suffix,<span class="st">&quot;character&quot;</span>)){</span>
<span id="cb174-11"><a href="treatment-unit-silvicultural-summary.html#cb174-11" tabindex="-1"></a>    clean_labels <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_c</span>(clean_labels, <span class="st">&quot; &quot;</span>, suffix) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_squish</span>()</span>
<span id="cb174-12"><a href="treatment-unit-silvicultural-summary.html#cb174-12" tabindex="-1"></a>  }</span>
<span id="cb174-13"><a href="treatment-unit-silvicultural-summary.html#cb174-13" tabindex="-1"></a>  </span>
<span id="cb174-14"><a href="treatment-unit-silvicultural-summary.html#cb174-14" tabindex="-1"></a>  <span class="co"># reorder based on the original factor levels </span></span>
<span id="cb174-15"><a href="treatment-unit-silvicultural-summary.html#cb174-15" tabindex="-1"></a>  forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(<span class="fu">factor</span>(clean_labels), <span class="fu">as.numeric</span>(bin_factor))</span>
<span id="cb174-16"><a href="treatment-unit-silvicultural-summary.html#cb174-16" tabindex="-1"></a>}</span>
<span id="cb174-17"><a href="treatment-unit-silvicultural-summary.html#cb174-17" tabindex="-1"></a><span class="co"># plot </span></span>
<span id="cb174-18"><a href="treatment-unit-silvicultural-summary.html#cb174-18" tabindex="-1"></a>treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb174-19"><a href="treatment-unit-silvicultural-summary.html#cb174-19" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb174-20"><a href="treatment-unit-silvicultural-summary.html#cb174-20" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(trtmnt_type,dbh_cm) <span class="sc">%&gt;%</span> </span>
<span id="cb174-21"><a href="treatment-unit-silvicultural-summary.html#cb174-21" tabindex="-1"></a>  <span class="fu">calc_imperial_units_fn</span>() <span class="sc">%&gt;%</span> <span class="co"># get dbh inches</span></span>
<span id="cb174-22"><a href="treatment-unit-silvicultural-summary.html#cb174-22" tabindex="-1"></a>  <span class="co"># metric cuts/bins</span></span>
<span id="cb174-23"><a href="treatment-unit-silvicultural-summary.html#cb174-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb174-24"><a href="treatment-unit-silvicultural-summary.html#cb174-24" tabindex="-1"></a>    <span class="at">dbh_in_bin =</span> ggplot2<span class="sc">::</span><span class="fu">cut_width</span>(dbh_in, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">boundary =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb174-25"><a href="treatment-unit-silvicultural-summary.html#cb174-25" tabindex="-1"></a>      <span class="fu">make_bins_pretty</span>(<span class="at">suffix =</span> <span class="st">&quot;in&quot;</span>) <span class="co"># pretty that</span></span>
<span id="cb174-26"><a href="treatment-unit-silvicultural-summary.html#cb174-26" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb174-27"><a href="treatment-unit-silvicultural-summary.html#cb174-27" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(trtmnt_type, dbh_in_bin) <span class="sc">%&gt;%</span> </span>
<span id="cb174-28"><a href="treatment-unit-silvicultural-summary.html#cb174-28" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb174-29"><a href="treatment-unit-silvicultural-summary.html#cb174-29" tabindex="-1"></a>  <span class="co"># area by type</span></span>
<span id="cb174-30"><a href="treatment-unit-silvicultural-summary.html#cb174-30" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb174-31"><a href="treatment-unit-silvicultural-summary.html#cb174-31" tabindex="-1"></a>    unit_sum_df <span class="sc">%&gt;%</span> </span>
<span id="cb174-32"><a href="treatment-unit-silvicultural-summary.html#cb174-32" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">group_by</span>(trtmnt_type) <span class="sc">%&gt;%</span> </span>
<span id="cb174-33"><a href="treatment-unit-silvicultural-summary.html#cb174-33" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">trtmnt_unit_area_ha=</span><span class="fu">sum</span>(trtmnt_unit_area_ha,<span class="at">na.rm=</span>T))</span>
<span id="cb174-34"><a href="treatment-unit-silvicultural-summary.html#cb174-34" tabindex="-1"></a>    , <span class="at">by =</span> <span class="st">&quot;trtmnt_type&quot;</span></span>
<span id="cb174-35"><a href="treatment-unit-silvicultural-summary.html#cb174-35" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb174-36"><a href="treatment-unit-silvicultural-summary.html#cb174-36" tabindex="-1"></a>  <span class="fu">calc_imperial_units_fn</span>() <span class="sc">%&gt;%</span> <span class="co"># get acres</span></span>
<span id="cb174-37"><a href="treatment-unit-silvicultural-summary.html#cb174-37" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(trtmnt_type) <span class="sc">%&gt;%</span> </span>
<span id="cb174-38"><a href="treatment-unit-silvicultural-summary.html#cb174-38" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb174-39"><a href="treatment-unit-silvicultural-summary.html#cb174-39" tabindex="-1"></a>    <span class="at">pct =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)</span>
<span id="cb174-40"><a href="treatment-unit-silvicultural-summary.html#cb174-40" tabindex="-1"></a>    <span class="co"># , pct_lab = scales::percent(pct,accuracy=0.1)</span></span>
<span id="cb174-41"><a href="treatment-unit-silvicultural-summary.html#cb174-41" tabindex="-1"></a>    , <span class="at">tpa =</span> n<span class="sc">/</span>trtmnt_unit_area_ac</span>
<span id="cb174-42"><a href="treatment-unit-silvicultural-summary.html#cb174-42" tabindex="-1"></a>    , <span class="at">tph =</span> n<span class="sc">/</span>trtmnt_unit_area_ha</span>
<span id="cb174-43"><a href="treatment-unit-silvicultural-summary.html#cb174-43" tabindex="-1"></a>    , <span class="at">lab =</span> <span class="fu">paste0</span>(scales<span class="sc">::</span><span class="fu">comma</span>(tpa,<span class="at">accuracy=</span><span class="dv">1</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,scales<span class="sc">::</span><span class="fu">percent</span>(pct,<span class="at">accuracy=</span><span class="dv">1</span>) )</span>
<span id="cb174-44"><a href="treatment-unit-silvicultural-summary.html#cb174-44" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb174-45"><a href="treatment-unit-silvicultural-summary.html#cb174-45" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb174-46"><a href="treatment-unit-silvicultural-summary.html#cb174-46" tabindex="-1"></a>  <span class="co"># dplyr::glimpse()</span></span>
<span id="cb174-47"><a href="treatment-unit-silvicultural-summary.html#cb174-47" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(</span>
<span id="cb174-48"><a href="treatment-unit-silvicultural-summary.html#cb174-48" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y =</span> tpa, <span class="at">x =</span> dbh_in_bin)</span>
<span id="cb174-49"><a href="treatment-unit-silvicultural-summary.html#cb174-49" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb174-50"><a href="treatment-unit-silvicultural-summary.html#cb174-50" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_col</span>(</span>
<span id="cb174-51"><a href="treatment-unit-silvicultural-summary.html#cb174-51" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">fill =</span> trtmnt_type)</span>
<span id="cb174-52"><a href="treatment-unit-silvicultural-summary.html#cb174-52" tabindex="-1"></a>    , <span class="at">width =</span> <span class="fl">0.6</span></span>
<span id="cb174-53"><a href="treatment-unit-silvicultural-summary.html#cb174-53" tabindex="-1"></a>    , <span class="at">color =</span> <span class="cn">NA</span>, <span class="at">alpha =</span> <span class="fl">0.8</span></span>
<span id="cb174-54"><a href="treatment-unit-silvicultural-summary.html#cb174-54" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb174-55"><a href="treatment-unit-silvicultural-summary.html#cb174-55" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_text</span>(</span>
<span id="cb174-56"><a href="treatment-unit-silvicultural-summary.html#cb174-56" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">label =</span> lab)</span>
<span id="cb174-57"><a href="treatment-unit-silvicultural-summary.html#cb174-57" tabindex="-1"></a>    , <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.2</span></span>
<span id="cb174-58"><a href="treatment-unit-silvicultural-summary.html#cb174-58" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb174-59"><a href="treatment-unit-silvicultural-summary.html#cb174-59" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb174-60"><a href="treatment-unit-silvicultural-summary.html#cb174-60" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_discrete</span>(<span class="at">drop =</span> F) <span class="sc">+</span> </span>
<span id="cb174-61"><a href="treatment-unit-silvicultural-summary.html#cb174-61" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(</span>
<span id="cb174-62"><a href="treatment-unit-silvicultural-summary.html#cb174-62" tabindex="-1"></a>    <span class="co"># breaks = seq(0,1,by=0.2)</span></span>
<span id="cb174-63"><a href="treatment-unit-silvicultural-summary.html#cb174-63" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span>comma</span>
<span id="cb174-64"><a href="treatment-unit-silvicultural-summary.html#cb174-64" tabindex="-1"></a>    , <span class="at">expand =</span> ggplot2<span class="sc">::</span><span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>))</span>
<span id="cb174-65"><a href="treatment-unit-silvicultural-summary.html#cb174-65" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb174-66"><a href="treatment-unit-silvicultural-summary.html#cb174-66" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_grid</span>(</span>
<span id="cb174-67"><a href="treatment-unit-silvicultural-summary.html#cb174-67" tabindex="-1"></a>    <span class="at">cols =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(trtmnt_type)</span>
<span id="cb174-68"><a href="treatment-unit-silvicultural-summary.html#cb174-68" tabindex="-1"></a>    <span class="co"># , rows = dplyr::vars(trtmnt_block)</span></span>
<span id="cb174-69"><a href="treatment-unit-silvicultural-summary.html#cb174-69" tabindex="-1"></a>    <span class="co"># , ncol = 2</span></span>
<span id="cb174-70"><a href="treatment-unit-silvicultural-summary.html#cb174-70" tabindex="-1"></a>    , <span class="at">axes =</span> <span class="st">&quot;all&quot;</span></span>
<span id="cb174-71"><a href="treatment-unit-silvicultural-summary.html#cb174-71" tabindex="-1"></a>    <span class="co"># , switch = &quot;y&quot;</span></span>
<span id="cb174-72"><a href="treatment-unit-silvicultural-summary.html#cb174-72" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb174-73"><a href="treatment-unit-silvicultural-summary.html#cb174-73" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb174-74"><a href="treatment-unit-silvicultural-summary.html#cb174-74" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;DBH&quot;</span>, <span class="at">y =</span> <span class="st">&quot;TPA&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb174-75"><a href="treatment-unit-silvicultural-summary.html#cb174-75" tabindex="-1"></a>    , <span class="at">subtitle =</span> <span class="st">&quot;Trees per acre by DBH bin&quot;</span></span>
<span id="cb174-76"><a href="treatment-unit-silvicultural-summary.html#cb174-76" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb174-77"><a href="treatment-unit-silvicultural-summary.html#cb174-77" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb174-78"><a href="treatment-unit-silvicultural-summary.html#cb174-78" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb174-79"><a href="treatment-unit-silvicultural-summary.html#cb174-79" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb174-80"><a href="treatment-unit-silvicultural-summary.html#cb174-80" tabindex="-1"></a>    , <span class="at">strip.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb174-81"><a href="treatment-unit-silvicultural-summary.html#cb174-81" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>, <span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">1</span>)</span>
<span id="cb174-82"><a href="treatment-unit-silvicultural-summary.html#cb174-82" tabindex="-1"></a>    <span class="co"># , axis.text.x = ggplot2::element_text(size = 12)</span></span>
<span id="cb174-83"><a href="treatment-unit-silvicultural-summary.html#cb174-83" tabindex="-1"></a>    <span class="co"># , axis.text.y = ggplot2::element_blank()</span></span>
<span id="cb174-84"><a href="treatment-unit-silvicultural-summary.html#cb174-84" tabindex="-1"></a>    <span class="co"># , axis.ticks.y = ggplot2::element_blank()</span></span>
<span id="cb174-85"><a href="treatment-unit-silvicultural-summary.html#cb174-85" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-147-1.png" alt="" width="1008" /></p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="treatment-unit-silvicultural-summary.html#cb175-1" tabindex="-1"></a><span class="co"># ggplot2::ggsave(&quot;../data/explt.jpg&quot;, height = 7.5, width = 10.5, dpi = &quot;print&quot;)</span></span></code></pre></div>
<p>and height bins</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="treatment-unit-silvicultural-summary.html#cb176-1" tabindex="-1"></a><span class="co"># plot </span></span>
<span id="cb176-2"><a href="treatment-unit-silvicultural-summary.html#cb176-2" tabindex="-1"></a>treetops_sf <span class="sc">%&gt;%</span> </span>
<span id="cb176-3"><a href="treatment-unit-silvicultural-summary.html#cb176-3" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb176-4"><a href="treatment-unit-silvicultural-summary.html#cb176-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(trtmnt_type,tree_height_m) <span class="sc">%&gt;%</span> </span>
<span id="cb176-5"><a href="treatment-unit-silvicultural-summary.html#cb176-5" tabindex="-1"></a>  <span class="fu">calc_imperial_units_fn</span>() <span class="sc">%&gt;%</span> <span class="co"># get ft</span></span>
<span id="cb176-6"><a href="treatment-unit-silvicultural-summary.html#cb176-6" tabindex="-1"></a>  <span class="co"># metric cuts/bins</span></span>
<span id="cb176-7"><a href="treatment-unit-silvicultural-summary.html#cb176-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb176-8"><a href="treatment-unit-silvicultural-summary.html#cb176-8" tabindex="-1"></a>    <span class="at">tree_height_ft_bin =</span> ggplot2<span class="sc">::</span><span class="fu">cut_width</span>(tree_height_ft, <span class="at">width =</span> <span class="dv">3</span>, <span class="at">boundary =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb176-9"><a href="treatment-unit-silvicultural-summary.html#cb176-9" tabindex="-1"></a>      <span class="fu">make_bins_pretty</span>(<span class="at">suffix =</span> <span class="st">&quot;ft&quot;</span>) <span class="co"># pretty that</span></span>
<span id="cb176-10"><a href="treatment-unit-silvicultural-summary.html#cb176-10" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb176-11"><a href="treatment-unit-silvicultural-summary.html#cb176-11" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(trtmnt_type, tree_height_ft_bin) <span class="sc">%&gt;%</span> </span>
<span id="cb176-12"><a href="treatment-unit-silvicultural-summary.html#cb176-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb176-13"><a href="treatment-unit-silvicultural-summary.html#cb176-13" tabindex="-1"></a>  <span class="co"># area by type</span></span>
<span id="cb176-14"><a href="treatment-unit-silvicultural-summary.html#cb176-14" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb176-15"><a href="treatment-unit-silvicultural-summary.html#cb176-15" tabindex="-1"></a>    unit_sum_df <span class="sc">%&gt;%</span> </span>
<span id="cb176-16"><a href="treatment-unit-silvicultural-summary.html#cb176-16" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">group_by</span>(trtmnt_type) <span class="sc">%&gt;%</span> </span>
<span id="cb176-17"><a href="treatment-unit-silvicultural-summary.html#cb176-17" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">trtmnt_unit_area_ha=</span><span class="fu">sum</span>(trtmnt_unit_area_ha,<span class="at">na.rm=</span>T))</span>
<span id="cb176-18"><a href="treatment-unit-silvicultural-summary.html#cb176-18" tabindex="-1"></a>    , <span class="at">by =</span> <span class="st">&quot;trtmnt_type&quot;</span></span>
<span id="cb176-19"><a href="treatment-unit-silvicultural-summary.html#cb176-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb176-20"><a href="treatment-unit-silvicultural-summary.html#cb176-20" tabindex="-1"></a>  <span class="fu">calc_imperial_units_fn</span>() <span class="sc">%&gt;%</span> <span class="co"># get acres</span></span>
<span id="cb176-21"><a href="treatment-unit-silvicultural-summary.html#cb176-21" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(trtmnt_type) <span class="sc">%&gt;%</span> </span>
<span id="cb176-22"><a href="treatment-unit-silvicultural-summary.html#cb176-22" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb176-23"><a href="treatment-unit-silvicultural-summary.html#cb176-23" tabindex="-1"></a>    <span class="at">pct =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)</span>
<span id="cb176-24"><a href="treatment-unit-silvicultural-summary.html#cb176-24" tabindex="-1"></a>    <span class="co"># , pct_lab = scales::percent(pct,accuracy=0.1)</span></span>
<span id="cb176-25"><a href="treatment-unit-silvicultural-summary.html#cb176-25" tabindex="-1"></a>    , <span class="at">tpa =</span> n<span class="sc">/</span>trtmnt_unit_area_ac</span>
<span id="cb176-26"><a href="treatment-unit-silvicultural-summary.html#cb176-26" tabindex="-1"></a>    , <span class="at">tph =</span> n<span class="sc">/</span>trtmnt_unit_area_ha</span>
<span id="cb176-27"><a href="treatment-unit-silvicultural-summary.html#cb176-27" tabindex="-1"></a>    , <span class="at">lab =</span> <span class="fu">ifelse</span>(</span>
<span id="cb176-28"><a href="treatment-unit-silvicultural-summary.html#cb176-28" tabindex="-1"></a>      pct<span class="sc">&gt;</span><span class="fl">0.02</span></span>
<span id="cb176-29"><a href="treatment-unit-silvicultural-summary.html#cb176-29" tabindex="-1"></a>      , <span class="fu">paste0</span>(scales<span class="sc">::</span><span class="fu">comma</span>(tpa,<span class="at">accuracy=</span><span class="dv">1</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,scales<span class="sc">::</span><span class="fu">percent</span>(pct,<span class="at">accuracy=</span><span class="dv">1</span>) )</span>
<span id="cb176-30"><a href="treatment-unit-silvicultural-summary.html#cb176-30" tabindex="-1"></a>      , <span class="st">&quot;&quot;</span></span>
<span id="cb176-31"><a href="treatment-unit-silvicultural-summary.html#cb176-31" tabindex="-1"></a>    )</span>
<span id="cb176-32"><a href="treatment-unit-silvicultural-summary.html#cb176-32" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb176-33"><a href="treatment-unit-silvicultural-summary.html#cb176-33" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb176-34"><a href="treatment-unit-silvicultural-summary.html#cb176-34" tabindex="-1"></a>  </span>
<span id="cb176-35"><a href="treatment-unit-silvicultural-summary.html#cb176-35" tabindex="-1"></a>  <span class="do">###### this makes sure the long tail isn&#39;t plotted :/</span></span>
<span id="cb176-36"><a href="treatment-unit-silvicultural-summary.html#cb176-36" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(trtmnt_type) <span class="sc">%&gt;%</span> </span>
<span id="cb176-37"><a href="treatment-unit-silvicultural-summary.html#cb176-37" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(trtmnt_type,tree_height_ft_bin) <span class="sc">%&gt;%</span> </span>
<span id="cb176-38"><a href="treatment-unit-silvicultural-summary.html#cb176-38" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">cum =</span> <span class="fu">cumsum</span>(pct)) <span class="sc">%&gt;%</span> </span>
<span id="cb176-39"><a href="treatment-unit-silvicultural-summary.html#cb176-39" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(tree_height_ft_bin) <span class="sc">%&gt;%</span> </span>
<span id="cb176-40"><a href="treatment-unit-silvicultural-summary.html#cb176-40" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">min</span>(cum)<span class="sc">&lt;</span><span class="fl">0.998</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb176-41"><a href="treatment-unit-silvicultural-summary.html#cb176-41" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb176-42"><a href="treatment-unit-silvicultural-summary.html#cb176-42" tabindex="-1"></a>  <span class="do">###### this makes sure the long tail isn&#39;t plotted :/</span></span>
<span id="cb176-43"><a href="treatment-unit-silvicultural-summary.html#cb176-43" tabindex="-1"></a>  </span>
<span id="cb176-44"><a href="treatment-unit-silvicultural-summary.html#cb176-44" tabindex="-1"></a>  <span class="co"># dplyr::glimpse()</span></span>
<span id="cb176-45"><a href="treatment-unit-silvicultural-summary.html#cb176-45" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(</span>
<span id="cb176-46"><a href="treatment-unit-silvicultural-summary.html#cb176-46" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y =</span> tpa, <span class="at">x =</span> tree_height_ft_bin)</span>
<span id="cb176-47"><a href="treatment-unit-silvicultural-summary.html#cb176-47" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb176-48"><a href="treatment-unit-silvicultural-summary.html#cb176-48" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_col</span>(</span>
<span id="cb176-49"><a href="treatment-unit-silvicultural-summary.html#cb176-49" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">fill =</span> trtmnt_type)</span>
<span id="cb176-50"><a href="treatment-unit-silvicultural-summary.html#cb176-50" tabindex="-1"></a>    , <span class="at">width =</span> <span class="fl">0.6</span></span>
<span id="cb176-51"><a href="treatment-unit-silvicultural-summary.html#cb176-51" tabindex="-1"></a>    , <span class="at">color =</span> <span class="cn">NA</span>, <span class="at">alpha =</span> <span class="fl">0.8</span></span>
<span id="cb176-52"><a href="treatment-unit-silvicultural-summary.html#cb176-52" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb176-53"><a href="treatment-unit-silvicultural-summary.html#cb176-53" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_text</span>(</span>
<span id="cb176-54"><a href="treatment-unit-silvicultural-summary.html#cb176-54" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">label =</span> lab)</span>
<span id="cb176-55"><a href="treatment-unit-silvicultural-summary.html#cb176-55" tabindex="-1"></a>    , <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.2</span></span>
<span id="cb176-56"><a href="treatment-unit-silvicultural-summary.html#cb176-56" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb176-57"><a href="treatment-unit-silvicultural-summary.html#cb176-57" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb176-58"><a href="treatment-unit-silvicultural-summary.html#cb176-58" tabindex="-1"></a>  <span class="co"># ggplot2::scale_x_discrete(drop = F) + </span></span>
<span id="cb176-59"><a href="treatment-unit-silvicultural-summary.html#cb176-59" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(</span>
<span id="cb176-60"><a href="treatment-unit-silvicultural-summary.html#cb176-60" tabindex="-1"></a>    <span class="co"># breaks = seq(0,1,by=0.2)</span></span>
<span id="cb176-61"><a href="treatment-unit-silvicultural-summary.html#cb176-61" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span>comma</span>
<span id="cb176-62"><a href="treatment-unit-silvicultural-summary.html#cb176-62" tabindex="-1"></a>    , <span class="at">expand =</span> ggplot2<span class="sc">::</span><span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>))</span>
<span id="cb176-63"><a href="treatment-unit-silvicultural-summary.html#cb176-63" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb176-64"><a href="treatment-unit-silvicultural-summary.html#cb176-64" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_grid</span>(</span>
<span id="cb176-65"><a href="treatment-unit-silvicultural-summary.html#cb176-65" tabindex="-1"></a>    <span class="at">cols =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(trtmnt_type)</span>
<span id="cb176-66"><a href="treatment-unit-silvicultural-summary.html#cb176-66" tabindex="-1"></a>    <span class="co"># , rows = dplyr::vars(trtmnt_block)</span></span>
<span id="cb176-67"><a href="treatment-unit-silvicultural-summary.html#cb176-67" tabindex="-1"></a>    <span class="co"># , ncol = 2</span></span>
<span id="cb176-68"><a href="treatment-unit-silvicultural-summary.html#cb176-68" tabindex="-1"></a>    , <span class="at">axes =</span> <span class="st">&quot;all&quot;</span></span>
<span id="cb176-69"><a href="treatment-unit-silvicultural-summary.html#cb176-69" tabindex="-1"></a>    <span class="co"># , switch = &quot;y&quot;</span></span>
<span id="cb176-70"><a href="treatment-unit-silvicultural-summary.html#cb176-70" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb176-71"><a href="treatment-unit-silvicultural-summary.html#cb176-71" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb176-72"><a href="treatment-unit-silvicultural-summary.html#cb176-72" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;tree height&quot;</span>, <span class="at">y =</span> <span class="st">&quot;TPA&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb176-73"><a href="treatment-unit-silvicultural-summary.html#cb176-73" tabindex="-1"></a>    , <span class="at">subtitle =</span> <span class="st">&quot;Trees per acre by tree height bin&quot;</span></span>
<span id="cb176-74"><a href="treatment-unit-silvicultural-summary.html#cb176-74" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb176-75"><a href="treatment-unit-silvicultural-summary.html#cb176-75" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb176-76"><a href="treatment-unit-silvicultural-summary.html#cb176-76" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb176-77"><a href="treatment-unit-silvicultural-summary.html#cb176-77" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb176-78"><a href="treatment-unit-silvicultural-summary.html#cb176-78" tabindex="-1"></a>    , <span class="at">strip.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb176-79"><a href="treatment-unit-silvicultural-summary.html#cb176-79" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">1</span>)</span>
<span id="cb176-80"><a href="treatment-unit-silvicultural-summary.html#cb176-80" tabindex="-1"></a>    <span class="co"># , axis.text.x = ggplot2::element_text(size = 12)</span></span>
<span id="cb176-81"><a href="treatment-unit-silvicultural-summary.html#cb176-81" tabindex="-1"></a>    <span class="co"># , axis.text.y = ggplot2::element_blank()</span></span>
<span id="cb176-82"><a href="treatment-unit-silvicultural-summary.html#cb176-82" tabindex="-1"></a>    <span class="co"># , axis.ticks.y = ggplot2::element_blank()</span></span>
<span id="cb176-83"><a href="treatment-unit-silvicultural-summary.html#cb176-83" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="blm_trfo_uas_files/figure-html/unnamed-chunk-148-1.png" alt="" width="1008" /></p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="treatment-unit-silvicultural-summary.html#cb177-1" tabindex="-1"></a><span class="co"># ggplot2::ggsave(&quot;../data/explt.jpg&quot;, height = 7.5, width = 10.5, dpi = &quot;print&quot;)</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="slash-piles.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

</body>

</html>
